(()=>{var wa=Object.create;var $r=Object.defineProperty;var xa=Object.getOwnPropertyDescriptor;var ba=Object.getOwnPropertyNames;var La=Object.getPrototypeOf,Pa=Object.prototype.hasOwnProperty;var Gr=(r,i)=>()=>(i||r((i={exports:{}}).exports,i),i.exports);var ka=(r,i,o,a)=>{if(i&&typeof i=="object"||typeof i=="function")for(let h of ba(i))!Pa.call(r,h)&&h!==o&&$r(r,h,{get:()=>i[h],enumerable:!(a=xa(i,h))||a.enumerable});return r};var Kr=(r,i,o)=>(o=r!=null?wa(La(r)):{},ka(i||!r||!r.__esModule?$r(o,"default",{value:r,enumerable:!0}):o,r));var co=Gr((wi,uo)=>{(function(r,i){typeof wi=="object"&&typeof uo<"u"?i(wi):typeof define=="function"&&define.amd?define(["exports"],i):(r=typeof globalThis<"u"?globalThis:r||self,i(r.leaflet={}))})(wi,function(r){"use strict";var i="1.9.4";function o(t){var e,n,s,l;for(n=1,s=arguments.length;n<s;n++){l=arguments[n];for(e in l)t[e]=l[e]}return t}var a=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function h(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var s=n.call(arguments,2);return function(){return t.apply(e,s.length?s.concat(n.call(arguments)):arguments)}}var u=0;function c(t){return"_leaflet_id"in t||(t._leaflet_id=++u),t._leaflet_id}function d(t,e,n){var s,l,f,_;return _=function(){s=!1,l&&(f.apply(n,l),l=!1)},f=function(){s?l=arguments:(t.apply(n,arguments),setTimeout(_,e),s=!0)},f}function m(t,e,n){var s=e[1],l=e[0],f=s-l;return t===s&&n?t:((t-l)%f+f)%f+l}function p(){return!1}function v(t,e){if(e===!1)return t;var n=Math.pow(10,e===void 0?6:e);return Math.round(t*n)/n}function x(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function k(t){return x(t).split(/\s+/)}function T(t,e){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?a(t.options):{});for(var n in e)t.options[n]=e[n];return t.options}function E(t,e,n){var s=[];for(var l in t)s.push(encodeURIComponent(n?l.toUpperCase():l)+"="+encodeURIComponent(t[l]));return(!e||e.indexOf("?")===-1?"?":"&")+s.join("&")}var Z=/\{ *([\w_ -]+) *\}/g;function g(t,e){return t.replace(Z,function(n,s){var l=e[s];if(l===void 0)throw new Error("No value provided for variable "+n);return typeof l=="function"&&(l=l(e)),l})}var y=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function b(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var C="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function z(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var S=0;function A(t){var e=+new Date,n=Math.max(0,16-(e-S));return S=e+n,window.setTimeout(t,n)}var B=window.requestAnimationFrame||z("RequestAnimationFrame")||A,D=window.cancelAnimationFrame||z("CancelAnimationFrame")||z("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function O(t,e,n){if(n&&B===A)t.call(e);else return B.call(window,h(t,e))}function V(t){t&&D.call(window,t)}var $={__proto__:null,extend:o,create:a,bind:h,get lastId(){return u},stamp:c,throttle:d,wrapNum:m,falseFn:p,formatNum:v,trim:x,splitWords:k,setOptions:T,getParamString:E,template:g,isArray:y,indexOf:b,emptyImageUrl:C,requestFn:B,cancelFn:D,requestAnimFrame:O,cancelAnimFrame:V};function tt(){}tt.extend=function(t){var e=function(){T(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=e.__super__=this.prototype,s=a(n);s.constructor=e,e.prototype=s;for(var l in this)Object.prototype.hasOwnProperty.call(this,l)&&l!=="prototype"&&l!=="__super__"&&(e[l]=this[l]);return t.statics&&o(e,t.statics),t.includes&&(Rt(t.includes),o.apply(null,[s].concat(t.includes))),o(s,t),delete s.statics,delete s.includes,s.options&&(s.options=n.options?a(n.options):{},o(s.options,t.options)),s._initHooks=[],s.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var f=0,_=s._initHooks.length;f<_;f++)s._initHooks[f].call(this)}},e},tt.include=function(t){var e=this.prototype.options;return o(this.prototype,t),t.options&&(this.prototype.options=e,this.mergeOptions(t.options)),this},tt.mergeOptions=function(t){return o(this.prototype.options,t),this},tt.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n=typeof t=="function"?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};function Rt(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=y(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ot={on:function(t,e,n){if(typeof t=="object")for(var s in t)this._on(s,t[s],e);else{t=k(t);for(var l=0,f=t.length;l<f;l++)this._on(t[l],e,n)}return this},off:function(t,e,n){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var s in t)this._off(s,t[s],e);else{t=k(t);for(var l=arguments.length===1,f=0,_=t.length;f<_;f++)l?this._off(t[f]):this._off(t[f],e,n)}return this},_on:function(t,e,n,s){if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}if(this._listens(t,e,n)===!1){n===this&&(n=void 0);var l={fn:e,ctx:n};s&&(l.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(l)}},_off:function(t,e,n){var s,l,f;if(this._events&&(s=this._events[t],!!s)){if(arguments.length===1){if(this._firingCount)for(l=0,f=s.length;l<f;l++)s[l].fn=p;delete this._events[t];return}if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}var _=this._listens(t,e,n);if(_!==!1){var w=s[_];this._firingCount&&(w.fn=p,this._events[t]=s=s.slice()),s.splice(_,1)}}},fire:function(t,e,n){if(!this.listens(t,n))return this;var s=o({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var l=this._events[t];if(l){this._firingCount=this._firingCount+1||1;for(var f=0,_=l.length;f<_;f++){var w=l[f],P=w.fn;w.once&&this.off(t,P,w.ctx),P.call(w.ctx||this,s)}this._firingCount--}}return n&&this._propagateEvent(s),this},listens:function(t,e,n,s){typeof t!="string"&&console.warn('"string" type argument expected');var l=e;typeof e!="function"&&(s=!!e,l=void 0,n=void 0);var f=this._events&&this._events[t];if(f&&f.length&&this._listens(t,l,n)!==!1)return!0;if(s){for(var _ in this._eventParents)if(this._eventParents[_].listens(t,e,n,s))return!0}return!1},_listens:function(t,e,n){if(!this._events)return!1;var s=this._events[t]||[];if(!e)return!!s.length;n===this&&(n=void 0);for(var l=0,f=s.length;l<f;l++)if(s[l].fn===e&&s[l].ctx===n)return l;return!1},once:function(t,e,n){if(typeof t=="object")for(var s in t)this._on(s,t[s],e,!0);else{t=k(t);for(var l=0,f=t.length;l<f;l++)this._on(t[l],e,n,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[c(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[c(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,o({layer:t.target,propagatedFrom:t.target},t),!0)}};ot.addEventListener=ot.on,ot.removeEventListener=ot.clearAllEventListeners=ot.off,ot.addOneTimeEventListener=ot.once,ot.fireEvent=ot.fire,ot.hasEventListeners=ot.listens;var ft=tt.extend(ot);function N(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var Gt=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};N.prototype={clone:function(){return new N(this.x,this.y)},add:function(t){return this.clone()._add(F(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(F(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new N(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new N(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Gt(this.x),this.y=Gt(this.y),this},distanceTo:function(t){t=F(t);var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return t=F(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=F(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function F(t,e,n){return t instanceof N?t:y(t)?new N(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new N(t.x,t.y):new N(t,e,n)}function K(t,e){if(t)for(var n=e?[t,e]:t,s=0,l=n.length;s<l;s++)this.extend(n[s])}K.prototype={extend:function(t){var e,n;if(!t)return this;if(t instanceof N||typeof t[0]=="number"||"x"in t)e=n=F(t);else if(t=et(t),e=t.min,n=t.max,!e||!n)return this;return!this.min&&!this.max?(this.min=e.clone(),this.max=n.clone()):(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)),this},getCenter:function(t){return F((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return F(this.min.x,this.max.y)},getTopRight:function(){return F(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return typeof t[0]=="number"||t instanceof N?t=F(t):t=et(t),t instanceof K?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=et(t);var e=this.min,n=this.max,s=t.min,l=t.max,f=l.x>=e.x&&s.x<=n.x,_=l.y>=e.y&&s.y<=n.y;return f&&_},overlaps:function(t){t=et(t);var e=this.min,n=this.max,s=t.min,l=t.max,f=l.x>e.x&&s.x<n.x,_=l.y>e.y&&s.y<n.y;return f&&_},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var e=this.min,n=this.max,s=Math.abs(e.x-n.x)*t,l=Math.abs(e.y-n.y)*t;return et(F(e.x-s,e.y-l),F(n.x+s,n.y+l))},equals:function(t){return t?(t=et(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function et(t,e){return!t||t instanceof K?t:new K(t,e)}function dt(t,e){if(t)for(var n=e?[t,e]:t,s=0,l=n.length;s<l;s++)this.extend(n[s])}dt.prototype={extend:function(t){var e=this._southWest,n=this._northEast,s,l;if(t instanceof J)s=t,l=t;else if(t instanceof dt){if(s=t._southWest,l=t._northEast,!s||!l)return this}else return t?this.extend(U(t)||nt(t)):this;return!e&&!n?(this._southWest=new J(s.lat,s.lng),this._northEast=new J(l.lat,l.lng)):(e.lat=Math.min(s.lat,e.lat),e.lng=Math.min(s.lng,e.lng),n.lat=Math.max(l.lat,n.lat),n.lng=Math.max(l.lng,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,s=Math.abs(e.lat-n.lat)*t,l=Math.abs(e.lng-n.lng)*t;return new dt(new J(e.lat-s,e.lng-l),new J(n.lat+s,n.lng+l))},getCenter:function(){return new J((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new J(this.getNorth(),this.getWest())},getSouthEast:function(){return new J(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof J||"lat"in t?t=U(t):t=nt(t);var e=this._southWest,n=this._northEast,s,l;return t instanceof dt?(s=t.getSouthWest(),l=t.getNorthEast()):s=l=t,s.lat>=e.lat&&l.lat<=n.lat&&s.lng>=e.lng&&l.lng<=n.lng},intersects:function(t){t=nt(t);var e=this._southWest,n=this._northEast,s=t.getSouthWest(),l=t.getNorthEast(),f=l.lat>=e.lat&&s.lat<=n.lat,_=l.lng>=e.lng&&s.lng<=n.lng;return f&&_},overlaps:function(t){t=nt(t);var e=this._southWest,n=this._northEast,s=t.getSouthWest(),l=t.getNorthEast(),f=l.lat>e.lat&&s.lat<n.lat,_=l.lng>e.lng&&s.lng<n.lng;return f&&_},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return t?(t=nt(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function nt(t,e){return t instanceof dt?t:new dt(t,e)}function J(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,n!==void 0&&(this.alt=+n)}J.prototype={equals:function(t,e){if(!t)return!1;t=U(t);var n=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return n<=(e===void 0?1e-9:e)},toString:function(t){return"LatLng("+v(this.lat,t)+", "+v(this.lng,t)+")"},distanceTo:function(t){return kt.distance(this,U(t))},wrap:function(){return kt.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return nt([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new J(this.lat,this.lng,this.alt)}};function U(t,e,n){return t instanceof J?t:y(t)&&typeof t[0]!="object"?t.length===3?new J(t[0],t[1],t[2]):t.length===2?new J(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new J(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===void 0?null:new J(t,e,n)}var xt={latLngToPoint:function(t,e){var n=this.projection.project(t),s=this.scale(e);return this.transformation._transform(n,s)},pointToLatLng:function(t,e){var n=this.scale(e),s=this.transformation.untransform(t,n);return this.projection.unproject(s)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t),s=this.transformation.transform(e.min,n),l=this.transformation.transform(e.max,n);return new K(s,l)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?m(t.lng,this.wrapLng,!0):t.lng,n=this.wrapLat?m(t.lat,this.wrapLat,!0):t.lat,s=t.alt;return new J(n,e,s)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),s=e.lat-n.lat,l=e.lng-n.lng;if(s===0&&l===0)return t;var f=t.getSouthWest(),_=t.getNorthEast(),w=new J(f.lat-s,f.lng-l),P=new J(_.lat-s,_.lng-l);return new dt(w,P)}},kt=o({},xt,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,s=t.lat*n,l=e.lat*n,f=Math.sin((e.lat-t.lat)*n/2),_=Math.sin((e.lng-t.lng)*n/2),w=f*f+Math.cos(s)*Math.cos(l)*_*_,P=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return this.R*P}}),ne=6378137,re={R:ne,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,s=Math.max(Math.min(n,t.lat),-n),l=Math.sin(s*e);return new N(this.R*t.lng*e,this.R*Math.log((1+l)/(1-l))/2)},unproject:function(t){var e=180/Math.PI;return new J((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=ne*Math.PI;return new K([-t,-t],[t,t])}()};function be(t,e,n,s){if(y(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=e,this._c=n,this._d=s}be.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new N((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};function Wt(t,e,n,s){return new be(t,e,n,s)}var oe=o({},kt,{code:"EPSG:3857",projection:re,transformation:function(){var t=.5/(Math.PI*re.R);return Wt(t,.5,-t,.5)}()}),Ge=o({},oe,{code:"EPSG:900913"});function Nn(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Vn(t,e){var n="",s,l,f,_,w,P;for(s=0,f=t.length;s<f;s++){for(w=t[s],l=0,_=w.length;l<_;l++)P=w[l],n+=(l?"L":"M")+P.x+" "+P.y;n+=e?R.svg?"z":"x":""}return n||"M0 0"}var Vi=document.documentElement.style,Ke="ActiveXObject"in window,Ko=Ke&&!document.addEventListener,jn="msLaunchUri"in navigator&&!("documentMode"in document),ji=It("webkit"),Hn=It("android"),Un=It("android 2")||It("android 3"),Jo=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Qo=Hn&&It("Google")&&Jo<537&&!("AudioNode"in window),Hi=!!window.opera,Wn=!jn&&It("chrome"),Yn=It("gecko")&&!ji&&!Hi&&!Ke,ts=!Wn&&It("safari"),Xn=It("phantom"),qn="OTransition"in Vi,es=navigator.platform.indexOf("Win")===0,$n=Ke&&"transition"in Vi,Ui="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Un,Gn="MozPerspective"in Vi,is=!window.L_DISABLE_3D&&($n||Ui||Gn)&&!qn&&!Xn,Le=typeof orientation<"u"||It("mobile"),ns=Le&&ji,rs=Le&&Ui,Kn=!window.PointerEvent&&window.MSPointerEvent,Jn=!!(window.PointerEvent||Kn),Qn="ontouchstart"in window||!!window.TouchEvent,os=!window.L_NO_TOUCH&&(Qn||Jn),ss=Le&&Hi,as=Le&&Yn,hs=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ls=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",p,e),window.removeEventListener("testPassiveEventSupport",p,e)}catch{}return t}(),us=function(){return!!document.createElement("canvas").getContext}(),Wi=!!(document.createElementNS&&Nn("svg").createSVGRect),cs=!!Wi&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),fs=!Wi&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&typeof e.adj=="object"}catch{return!1}}(),ds=navigator.platform.indexOf("Mac")===0,_s=navigator.platform.indexOf("Linux")===0;function It(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var R={ie:Ke,ielt9:Ko,edge:jn,webkit:ji,android:Hn,android23:Un,androidStock:Qo,opera:Hi,chrome:Wn,gecko:Yn,safari:ts,phantom:Xn,opera12:qn,win:es,ie3d:$n,webkit3d:Ui,gecko3d:Gn,any3d:is,mobile:Le,mobileWebkit:ns,mobileWebkit3d:rs,msPointer:Kn,pointer:Jn,touch:os,touchNative:Qn,mobileOpera:ss,mobileGecko:as,retina:hs,passiveEvents:ls,canvas:us,svg:Wi,vml:fs,inlineSvg:cs,mac:ds,linux:_s},tr=R.msPointer?"MSPointerDown":"pointerdown",er=R.msPointer?"MSPointerMove":"pointermove",ir=R.msPointer?"MSPointerUp":"pointerup",nr=R.msPointer?"MSPointerCancel":"pointercancel",Yi={touchstart:tr,touchmove:er,touchend:ir,touchcancel:nr},rr={touchstart:ws,touchmove:Je,touchend:Je,touchcancel:Je},se={},or=!1;function ms(t,e,n){return e==="touchstart"&&ys(),rr[e]?(n=rr[e].bind(this,n),t.addEventListener(Yi[e],n,!1),n):(console.warn("wrong event specified:",e),p)}function ps(t,e,n){if(!Yi[e]){console.warn("wrong event specified:",e);return}t.removeEventListener(Yi[e],n,!1)}function gs(t){se[t.pointerId]=t}function vs(t){se[t.pointerId]&&(se[t.pointerId]=t)}function sr(t){delete se[t.pointerId]}function ys(){or||(document.addEventListener(tr,gs,!0),document.addEventListener(er,vs,!0),document.addEventListener(ir,sr,!0),document.addEventListener(nr,sr,!0),or=!0)}function Je(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){e.touches=[];for(var n in se)e.touches.push(se[n]);e.changedTouches=[e],t(e)}}function ws(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&mt(e),Je(t,e)}function xs(t){var e={},n,s;for(s in t)n=t[s],e[s]=n&&n.bind?n.bind(t):n;return t=e,e.type="dblclick",e.detail=2,e.isTrusted=!1,e._simulated=!0,e}var bs=200;function Ls(t,e){t.addEventListener("dblclick",e);var n=0,s;function l(f){if(f.detail!==1){s=f.detail;return}if(!(f.pointerType==="mouse"||f.sourceCapabilities&&!f.sourceCapabilities.firesTouchEvents)){var _=cr(f);if(!(_.some(function(P){return P instanceof HTMLLabelElement&&P.attributes.for})&&!_.some(function(P){return P instanceof HTMLInputElement||P instanceof HTMLSelectElement}))){var w=Date.now();w-n<=bs?(s++,s===2&&e(xs(f))):s=1,n=w}}}return t.addEventListener("click",l),{dblclick:e,simDblclick:l}}function Ps(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}var Xi=ei(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Pe=ei(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ar=Pe==="webkitTransition"||Pe==="OTransition"?Pe+"End":"transitionend";function hr(t){return typeof t=="string"?document.getElementById(t):t}function ke(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||n==="auto")&&document.defaultView){var s=document.defaultView.getComputedStyle(t,null);n=s?s[e]:null}return n==="auto"?null:n}function G(t,e,n){var s=document.createElement(t);return s.className=e||"",n&&n.appendChild(s),s}function st(t){var e=t.parentNode;e&&e.removeChild(t)}function Qe(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ae(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function he(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function qi(t,e){if(t.classList!==void 0)return t.classList.contains(e);var n=ti(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function W(t,e){if(t.classList!==void 0)for(var n=k(e),s=0,l=n.length;s<l;s++)t.classList.add(n[s]);else if(!qi(t,e)){var f=ti(t);$i(t,(f?f+" ":"")+e)}}function lt(t,e){t.classList!==void 0?t.classList.remove(e):$i(t,x((" "+ti(t)+" ").replace(" "+e+" "," ")))}function $i(t,e){t.className.baseVal===void 0?t.className=e:t.className.baseVal=e}function ti(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function Tt(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&ks(t,e)}function ks(t,e){var n=!1,s="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(s)}catch{if(e===1)return}e=Math.round(e*100),n?(n.Enabled=e!==100,n.Opacity=e):t.style.filter+=" progid:"+s+"(opacity="+e+")"}function ei(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function Kt(t,e,n){var s=e||new N(0,0);t.style[Xi]=(R.ie3d?"translate("+s.x+"px,"+s.y+"px)":"translate3d("+s.x+"px,"+s.y+"px,0)")+(n?" scale("+n+")":"")}function ut(t,e){t._leaflet_pos=e,R.any3d?Kt(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function Jt(t){return t._leaflet_pos||new N(0,0)}var Te,ze,Gi;if("onselectstart"in document)Te=function(){H(window,"selectstart",mt)},ze=function(){rt(window,"selectstart",mt)};else{var Me=ei(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Te=function(){if(Me){var t=document.documentElement.style;Gi=t[Me],t[Me]="none"}},ze=function(){Me&&(document.documentElement.style[Me]=Gi,Gi=void 0)}}function Ki(){H(window,"dragstart",mt)}function Ji(){rt(window,"dragstart",mt)}var ii,Qi;function tn(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(ni(),ii=t,Qi=t.style.outlineStyle,t.style.outlineStyle="none",H(window,"keydown",ni))}function ni(){ii&&(ii.style.outlineStyle=Qi,ii=void 0,Qi=void 0,rt(window,"keydown",ni))}function lr(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function en(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Ts={__proto__:null,TRANSFORM:Xi,TRANSITION:Pe,TRANSITION_END:ar,get:hr,getStyle:ke,create:G,remove:st,empty:Qe,toFront:ae,toBack:he,hasClass:qi,addClass:W,removeClass:lt,setClass:$i,getClass:ti,setOpacity:Tt,testProp:ei,setTransform:Kt,setPosition:ut,getPosition:Jt,get disableTextSelection(){return Te},get enableTextSelection(){return ze},disableImageDrag:Ki,enableImageDrag:Ji,preventOutline:tn,restoreOutline:ni,getSizedParentNode:lr,getScale:en};function H(t,e,n,s){if(e&&typeof e=="object")for(var l in e)rn(t,l,e[l],n);else{e=k(e);for(var f=0,_=e.length;f<_;f++)rn(t,e[f],n,s)}return this}var Ot="_leaflet_events";function rt(t,e,n,s){if(arguments.length===1)ur(t),delete t[Ot];else if(e&&typeof e=="object")for(var l in e)on(t,l,e[l],n);else if(e=k(e),arguments.length===2)ur(t,function(w){return b(e,w)!==-1});else for(var f=0,_=e.length;f<_;f++)on(t,e[f],n,s);return this}function ur(t,e){for(var n in t[Ot]){var s=n.split(/\d/)[0];(!e||e(s))&&on(t,s,null,null,n)}}var nn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function rn(t,e,n,s){var l=e+c(n)+(s?"_"+c(s):"");if(t[Ot]&&t[Ot][l])return this;var f=function(w){return n.call(s||t,w||window.event)},_=f;!R.touchNative&&R.pointer&&e.indexOf("touch")===0?f=ms(t,e,f):R.touch&&e==="dblclick"?f=Ls(t,f):"addEventListener"in t?e==="touchstart"||e==="touchmove"||e==="wheel"||e==="mousewheel"?t.addEventListener(nn[e]||e,f,R.passiveEvents?{passive:!1}:!1):e==="mouseenter"||e==="mouseleave"?(f=function(w){w=w||window.event,an(t,w)&&_(w)},t.addEventListener(nn[e],f,!1)):t.addEventListener(e,_,!1):t.attachEvent("on"+e,f),t[Ot]=t[Ot]||{},t[Ot][l]=f}function on(t,e,n,s,l){l=l||e+c(n)+(s?"_"+c(s):"");var f=t[Ot]&&t[Ot][l];if(!f)return this;!R.touchNative&&R.pointer&&e.indexOf("touch")===0?ps(t,e,f):R.touch&&e==="dblclick"?Ps(t,f):"removeEventListener"in t?t.removeEventListener(nn[e]||e,f,!1):t.detachEvent("on"+e,f),t[Ot][l]=null}function Qt(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function sn(t){return rn(t,"wheel",Qt),this}function Se(t){return H(t,"mousedown touchstart dblclick contextmenu",Qt),t._leaflet_disable_click=!0,this}function mt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function te(t){return mt(t),Qt(t),this}function cr(t){if(t.composedPath)return t.composedPath();for(var e=[],n=t.target;n;)e.push(n),n=n.parentNode;return e}function fr(t,e){if(!e)return new N(t.clientX,t.clientY);var n=en(e),s=n.boundingClientRect;return new N((t.clientX-s.left)/n.x-e.clientLeft,(t.clientY-s.top)/n.y-e.clientTop)}var zs=R.linux&&R.chrome?window.devicePixelRatio:R.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function dr(t){return R.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/zs:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function an(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch{return!1}return n!==t}var Ms={__proto__:null,on:H,off:rt,stopPropagation:Qt,disableScrollPropagation:sn,disableClickPropagation:Se,preventDefault:mt,stop:te,getPropagationPath:cr,getMousePosition:fr,getWheelDelta:dr,isExternalTarget:an,addListener:H,removeListener:rt},_r=ft.extend({run:function(t,e,n,s){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(s||.5,.2),this._startPos=Jt(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=O(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=this._duration*1e3;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),ut(this._el,n),this.fire("step")},_complete:function(){V(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),q=ft.extend({options:{crs:oe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=T(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=h(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==void 0&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==void 0&&this.setView(U(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Pe&&R.any3d&&!R.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),H(this._proxy,ar,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,n){if(e=e===void 0?this._zoom:this._limitZoom(e),t=this._limitCenter(U(t),e,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&n!==!0){n.animate!==void 0&&(n.zoom=o({animate:n.animate},n.zoom),n.pan=o({animate:n.animate,duration:n.duration},n.pan));var s=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan);if(s)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e,n.pan&&n.pan.noMoveStart),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(R.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(R.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var s=this.getZoomScale(e),l=this.getSize().divideBy(2),f=t instanceof N?t:this.latLngToContainerPoint(t),_=f.subtract(l).multiplyBy(1-1/s),w=this.containerPointToLatLng(l.add(_));return this.setView(w,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():nt(t);var n=F(e.paddingTopLeft||e.padding||[0,0]),s=F(e.paddingBottomRight||e.padding||[0,0]),l=this.getBoundsZoom(t,!1,n.add(s));if(l=typeof e.maxZoom=="number"?Math.min(e.maxZoom,l):l,l===1/0)return{center:t.getCenter(),zoom:l};var f=s.subtract(n).divideBy(2),_=this.project(t.getSouthWest(),l),w=this.project(t.getNorthEast(),l),P=this.unproject(_.add(w).divideBy(2).add(f),l);return{center:P,zoom:l}},fitBounds:function(t,e){if(t=nt(t),!t.isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=F(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new _r,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){W(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(n=n||{},n.animate===!1||!R.any3d)return this.setView(t,e,n);this._stop();var s=this.project(this.getCenter()),l=this.project(t),f=this.getSize(),_=this._zoom;t=U(t),e=e===void 0?_:e;var w=Math.max(f.x,f.y),P=w*this.getZoomScale(_,e),M=l.distanceTo(s)||1,I=1.42,j=I*I;function X(ct){var mi=ct?-1:1,pa=ct?P:w,ga=P*P-w*w+mi*j*j*M*M,va=2*pa*j*M,vn=ga/va,qr=Math.sqrt(vn*vn+1)-vn,ya=qr<1e-9?-18:Math.log(qr);return ya}function vt(ct){return(Math.exp(ct)-Math.exp(-ct))/2}function _t(ct){return(Math.exp(ct)+Math.exp(-ct))/2}function Mt(ct){return vt(ct)/_t(ct)}var wt=X(0);function _e(ct){return w*(_t(wt)/_t(wt+I*ct))}function fa(ct){return w*(_t(wt)*Mt(wt+I*ct)-vt(wt))/j}function da(ct){return 1-Math.pow(1-ct,1.5)}var _a=Date.now(),Yr=(X(1)-wt)/I,ma=n.duration?1e3*n.duration:1e3*Yr*.8;function Xr(){var ct=(Date.now()-_a)/ma,mi=da(ct)*Yr;ct<=1?(this._flyToFrame=O(Xr,this),this._move(this.unproject(s.add(l.subtract(s).multiplyBy(fa(mi)/M)),_),this.getScaleZoom(w/_e(mi),_),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),Xr.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return t=nt(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),s=this._limitCenter(n,this._zoom,nt(t));return n.equals(s)||this.panTo(s,e),this._enforcingBounds=!1,this},panInside:function(t,e){e=e||{};var n=F(e.paddingTopLeft||e.padding||[0,0]),s=F(e.paddingBottomRight||e.padding||[0,0]),l=this.project(this.getCenter()),f=this.project(t),_=this.getPixelBounds(),w=et([_.min.add(n),_.max.subtract(s)]),P=w.getSize();if(!w.contains(f)){this._enforcingBounds=!0;var M=f.subtract(w.getCenter()),I=w.extend(f).getSize().subtract(P);l.x+=M.x<0?-I.x:I.x,l.y+=M.y<0?-I.y:I.y,this.panTo(this.unproject(l),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=o({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),s=e.divideBy(2).round(),l=n.divideBy(2).round(),f=s.subtract(l);return!f.x&&!f.y?this:(t.animate&&t.pan?this.panBy(f):(t.pan&&this._rawPanBy(f),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(h(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=o({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=h(this._handleGeolocationResponse,this),n=h(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,n=t.message||(e===1?"permission denied":e===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=t.coords.latitude,n=t.coords.longitude,s=new J(e,n),l=s.toBounds(t.coords.accuracy*2),f=this._locateOptions;if(f.setView){var _=this.getBoundsZoom(l);this.setView(s,f.maxZoom?Math.min(_,f.maxZoom):_)}var w={latlng:s,bounds:l,timestamp:t.timestamp};for(var P in t.coords)typeof t.coords[P]=="number"&&(w[P]=t.coords[P]);this.fire("locationfound",w)}},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),st(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(V(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)st(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),s=G("div",n,e||this._mapPane);return t&&(this._panes[t]=s),s},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new dt(e,n)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=nt(t),n=F(n||[0,0]);var s=this.getZoom()||0,l=this.getMinZoom(),f=this.getMaxZoom(),_=t.getNorthWest(),w=t.getSouthEast(),P=this.getSize().subtract(n),M=et(this.project(w,s),this.project(_,s)).getSize(),I=R.any3d?this.options.zoomSnap:1,j=P.x/M.x,X=P.y/M.y,vt=e?Math.max(j,X):Math.min(j,X);return s=this.getScaleZoom(vt,s),I&&(s=Math.round(s/(I/100))*(I/100),s=e?Math.ceil(s/I)*I:Math.floor(s/I)*I),Math.max(l,Math.min(f,s))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new N(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new K(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=e===void 0?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=e===void 0?this._zoom:e;var s=n.zoom(t*n.scale(e));return isNaN(s)?1/0:s},project:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.latLngToPoint(U(t),e)},unproject:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.pointToLatLng(F(t),e)},layerPointToLatLng:function(t){var e=F(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(U(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(U(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(nt(t))},distance:function(t,e){return this.options.crs.distance(U(t),U(e))},containerPointToLayerPoint:function(t){return F(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return F(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(F(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(U(t)))},mouseEventToContainerPoint:function(t){return fr(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=hr(t);if(e){if(e._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");H(e,"scroll",this._onScroll,this),this._containerId=c(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&R.any3d,W(t,"leaflet-container"+(R.touch?" leaflet-touch":"")+(R.retina?" leaflet-retina":"")+(R.ielt9?" leaflet-oldie":"")+(R.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=ke(t,"position");e!=="absolute"&&e!=="relative"&&e!=="fixed"&&e!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ut(this._mapPane,new N(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(W(t.markerPane,"leaflet-zoom-hide"),W(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,n){ut(this._mapPane,new N(0,0));var s=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var l=this._zoom!==e;this._moveStart(l,n)._move(t,e)._moveEnd(l),this.fire("viewreset"),s&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n,s){e===void 0&&(e=this._zoom);var l=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),s?n&&n.pinch&&this.fire("zoom",n):((l||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return V(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){ut(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[c(this._container)]=this;var e=t?rt:H;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),R.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){V(this._resizeRequest),this._resizeRequest=O(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n=[],s,l=e==="mouseout"||e==="mouseover",f=t.target||t.srcElement,_=!1;f;){if(s=this._targets[c(f)],s&&(e==="click"||e==="preclick")&&this._draggableMoved(s)){_=!0;break}if(s&&s.listens(e,!0)&&(l&&!an(f,t)||(n.push(s),l))||f===this._container)break;f=f.parentNode}return!n.length&&!_&&!l&&this.listens(e,!0)&&(n=[this]),n},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(e))){var n=t.type;n==="mousedown"&&tn(e),this._fireDOMEvent(t,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,n){if(t.type==="click"){var s=o({},t);s.type="preclick",this._fireDOMEvent(s,s.type,n)}var l=this._findEventTargets(t,e);if(n){for(var f=[],_=0;_<n.length;_++)n[_].listens(e,!0)&&f.push(n[_]);l=f.concat(l)}if(l.length){e==="contextmenu"&&mt(t);var w=l[0],P={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var M=w.getLatLng&&(!w._radius||w._radius<=10);P.containerPoint=M?this.latLngToContainerPoint(w.getLatLng()):this.mouseEventToContainerPoint(t),P.layerPoint=this.containerPointToLayerPoint(P.containerPoint),P.latlng=M?w.getLatLng():this.layerPointToLatLng(P.layerPoint)}for(_=0;_<l.length;_++)if(l[_].fire(e,P,!0),P.originalEvent._stopped||l[_].options.bubblingMouseEvents===!1&&b(this._mouseEvents,e)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return Jt(this._mapPane)||new N(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var n=t&&e!==void 0?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return n.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var s=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(s)},_latLngBoundsToNewLayerBounds:function(t,e,n){var s=this._getNewPixelOrigin(n,e);return et([this.project(t.getSouthWest(),e)._subtract(s),this.project(t.getNorthWest(),e)._subtract(s),this.project(t.getSouthEast(),e)._subtract(s),this.project(t.getNorthEast(),e)._subtract(s)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var s=this.project(t,e),l=this.getSize().divideBy(2),f=new K(s.subtract(l),s.add(l)),_=this._getBoundsOffset(f,n,e);return Math.abs(_.x)<=1&&Math.abs(_.y)<=1?t:this.unproject(s.add(_),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),s=new K(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(s,e))},_getBoundsOffset:function(t,e,n){var s=et(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),l=s.min.subtract(t.min),f=s.max.subtract(t.max),_=this._rebound(l.x,-f.x),w=this._rebound(l.y,-f.y);return new N(_,w)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),s=R.any3d?this.options.zoomSnap:1;return s&&(t=Math.round(t/s)*s),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){lt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return(e&&e.animate)!==!0&&!this.getSize().contains(n)?!1:(this.panBy(n,e),!0)},_createAnimProxy:function(){var t=this._proxy=G("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var n=Xi,s=this._proxy.style[n];Kt(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),s===this._proxy.style[n]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){st(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();Kt(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||n.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var s=this.getZoomScale(e),l=this._getCenterOffset(t)._divideBy(1-1/s);return n.animate!==!0&&!this.getSize().contains(l)?!1:(O(function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,n,s){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,W(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:s}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(h(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&lt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ss(t,e){return new q(t,e)}var Ct=tt.extend({options:{position:"topright"},initialize:function(t){T(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),s=t._controlCorners[n];return W(e,"leaflet-control"),n.indexOf("bottom")!==-1?s.insertBefore(e,s.firstChild):s.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(st(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Ce=function(t){return new Ct(t)};q.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=G("div",e+"control-container",this._container);function s(l,f){var _=e+l+" "+e+f;t[l+f]=G("div",_,n)}s("top","left"),s("top","right"),s("bottom","left"),s("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)st(this._controlCorners[t]);st(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var mr=Ct.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,s){return n<s?-1:s<n?1:0}},initialize:function(t,e,n){T(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var s in t)this._addLayer(t[s],s);for(s in e)this._addLayer(e[s],s,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Ct.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(c(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){W(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(W(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):lt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return lt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=G("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Se(e),sn(e);var s=this._section=G("section",t+"-list");n&&(this._map.on("click",this.collapse,this),H(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var l=this._layersLink=G("a",t+"-toggle",e);l.href="#",l.title="Layers",l.setAttribute("role","button"),H(l,{keydown:function(f){f.keyCode===13&&this._expandSafely()},click:function(f){mt(f),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=G("div",t+"-base",s),this._separator=G("div",t+"-separator",s),this._overlaysList=G("div",t+"-overlays",s),e.appendChild(s)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&c(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(h(function(s,l){return this.options.sortFunction(s.layer,l.layer,s.name,l.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Qe(this._baseLayersList),Qe(this._overlaysList),this._layerControlInputs=[];var t,e,n,s,l=0;for(n=0;n<this._layers.length;n++)s=this._layers[n],this._addItem(s),e=e||s.overlay,t=t||!s.overlay,l+=s.overlay?0:1;return this.options.hideSingleBase&&(t=t&&l>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(c(t.target)),n=e.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",s=document.createElement("div");return s.innerHTML=n,s.firstChild},_addItem:function(t){var e=document.createElement("label"),n=this._map.hasLayer(t.layer),s;t.overlay?(s=document.createElement("input"),s.type="checkbox",s.className="leaflet-control-layers-selector",s.defaultChecked=n):s=this._createRadioElement("leaflet-base-layers_"+c(this),n),this._layerControlInputs.push(s),s.layerId=c(t.layer),H(s,"click",this._onInputClick,this);var l=document.createElement("span");l.innerHTML=" "+t.name;var f=document.createElement("span");e.appendChild(f),f.appendChild(s),f.appendChild(l);var _=t.overlay?this._overlaysList:this._baseLayersList;return _.appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,e,n,s=[],l=[];this._handlingClick=!0;for(var f=t.length-1;f>=0;f--)e=t[f],n=this._getLayer(e.layerId).layer,e.checked?s.push(n):e.checked||l.push(n);for(f=0;f<l.length;f++)this._map.hasLayer(l[f])&&this._map.removeLayer(l[f]);for(f=0;f<s.length;f++)this._map.hasLayer(s[f])||this._map.addLayer(s[f]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,e,n,s=this._map.getZoom(),l=t.length-1;l>=0;l--)e=t[l],n=this._getLayer(e.layerId).layer,e.disabled=n.options.minZoom!==void 0&&s<n.options.minZoom||n.options.maxZoom!==void 0&&s>n.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,H(t,"click",mt),this.expand();var e=this;setTimeout(function(){rt(t,"click",mt),e._preventClick=!1})}}),Cs=function(t,e,n){return new mr(t,e,n)},hn=Ct.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=G("div",e+" leaflet-bar"),s=this.options;return this._zoomInButton=this._createButton(s.zoomInText,s.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(s.zoomOutText,s.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,s,l){var f=G("a",n,s);return f.innerHTML=t,f.href="#",f.title=e,f.setAttribute("role","button"),f.setAttribute("aria-label",e),Se(f),H(f,"click",te),H(f,"click",l,this),H(f,"click",this._refocusOnMap,this),f},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";lt(this._zoomInButton,e),lt(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(W(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(W(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});q.mergeOptions({zoomControl:!0}),q.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new hn,this.addControl(this.zoomControl))});var Es=function(t){return new hn(t)},pr=Ct.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=G("div",e),s=this.options;return this._addScales(s,e+"-line",n),t.on(s.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=G("div",e,n)),t.imperial&&(this._iScale=G("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e=t*3.2808399,n,s,l;e>5280?(n=e/5280,s=this._getRoundNum(n),this._updateScale(this._iScale,s+" mi",s/n)):(l=this._getRoundNum(e),this._updateScale(this._iScale,l+" ft",l/e))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,e*n}}),Bs=function(t){return new pr(t)},As='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ln=Ct.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(R.inlineSvg?As+" ":"")+"Leaflet</a>"},initialize:function(t){T(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=G("div","leaflet-control-attribution"),Se(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});q.mergeOptions({attributionControl:!0}),q.addInitHook(function(){this.options.attributionControl&&new ln().addTo(this)});var Is=function(t){return new ln(t)};Ct.Layers=mr,Ct.Zoom=hn,Ct.Scale=pr,Ct.Attribution=ln,Ce.layers=Cs,Ce.zoom=Es,Ce.scale=Bs,Ce.attribution=Is;var Dt=tt.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Dt.addTo=function(t,e){return t.addHandler(e,this),this};var Os={Events:ot},gr=R.touch?"touchstart mousedown":"mousedown",Yt=ft.extend({options:{clickTolerance:3},initialize:function(t,e,n,s){T(this,s),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(H(this._dragStartTarget,gr,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Yt._dragging===this&&this.finishDrag(!0),rt(this._dragStartTarget,gr,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!qi(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){Yt._dragging===this&&this.finishDrag();return}if(!(Yt._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(Yt._dragging=this,this._preventOutline&&tn(this._element),Ki(),Te(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t,n=lr(this._element);this._startPoint=new N(e.clientX,e.clientY),this._startPos=Jt(this._element),this._parentScale=en(n);var s=t.type==="mousedown";H(document,s?"mousemove":"touchmove",this._onMove,this),H(document,s?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var e=t.touches&&t.touches.length===1?t.touches[0]:t,n=new N(e.clientX,e.clientY)._subtract(this._startPoint);!n.x&&!n.y||Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,mt(t),this._moved||(this.fire("dragstart"),this._moved=!0,W(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),W(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),ut(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){lt(document.body,"leaflet-dragging"),this._lastTarget&&(lt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),rt(document,"mousemove touchmove",this._onMove,this),rt(document,"mouseup touchend touchcancel",this._onUp,this),Ji(),ze();var e=this._moved&&this._moving;this._moving=!1,Yt._dragging=!1,e&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function vr(t,e,n){var s,l=[1,4,2,8],f,_,w,P,M,I,j,X;for(f=0,I=t.length;f<I;f++)t[f]._code=ee(t[f],e);for(w=0;w<4;w++){for(j=l[w],s=[],f=0,I=t.length,_=I-1;f<I;_=f++)P=t[f],M=t[_],P._code&j?M._code&j||(X=ri(M,P,j,e,n),X._code=ee(X,e),s.push(X)):(M._code&j&&(X=ri(M,P,j,e,n),X._code=ee(X,e),s.push(X)),s.push(P));t=s}return t}function yr(t,e){var n,s,l,f,_,w,P,M,I;if(!t||t.length===0)throw new Error("latlngs not passed");zt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var j=U([0,0]),X=nt(t),vt=X.getNorthWest().distanceTo(X.getSouthWest())*X.getNorthEast().distanceTo(X.getNorthWest());vt<1700&&(j=un(t));var _t=t.length,Mt=[];for(n=0;n<_t;n++){var wt=U(t[n]);Mt.push(e.project(U([wt.lat-j.lat,wt.lng-j.lng])))}for(w=P=M=0,n=0,s=_t-1;n<_t;s=n++)l=Mt[n],f=Mt[s],_=l.y*f.x-f.y*l.x,P+=(l.x+f.x)*_,M+=(l.y+f.y)*_,w+=_*3;w===0?I=Mt[0]:I=[P/w,M/w];var _e=e.unproject(F(I));return U([_e.lat+j.lat,_e.lng+j.lng])}function un(t){for(var e=0,n=0,s=0,l=0;l<t.length;l++){var f=U(t[l]);e+=f.lat,n+=f.lng,s++}return U([e/s,n/s])}var Ds={__proto__:null,clipPolygon:vr,polygonCenter:yr,centroid:un};function wr(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=Rs(t,n),t=Fs(t,n),t}function xr(t,e,n){return Math.sqrt(Ee(t,e,n,!0))}function Zs(t,e,n){return Ee(t,e,n)}function Fs(t,e){var n=t.length,s=typeof Uint8Array<"u"?Uint8Array:Array,l=new s(n);l[0]=l[n-1]=1,cn(t,l,e,0,n-1);var f,_=[];for(f=0;f<n;f++)l[f]&&_.push(t[f]);return _}function cn(t,e,n,s,l){var f=0,_,w,P;for(w=s+1;w<=l-1;w++)P=Ee(t[w],t[s],t[l],!0),P>f&&(_=w,f=P);f>n&&(e[_]=1,cn(t,e,n,s,_),cn(t,e,n,_,l))}function Rs(t,e){for(var n=[t[0]],s=1,l=0,f=t.length;s<f;s++)Ns(t[s],t[l])>e&&(n.push(t[s]),l=s);return l<f-1&&n.push(t[f-1]),n}var br;function Lr(t,e,n,s,l){var f=s?br:ee(t,n),_=ee(e,n),w,P,M;for(br=_;;){if(!(f|_))return[t,e];if(f&_)return!1;w=f||_,P=ri(t,e,w,n,l),M=ee(P,n),w===f?(t=P,f=M):(e=P,_=M)}}function ri(t,e,n,s,l){var f=e.x-t.x,_=e.y-t.y,w=s.min,P=s.max,M,I;return n&8?(M=t.x+f*(P.y-t.y)/_,I=P.y):n&4?(M=t.x+f*(w.y-t.y)/_,I=w.y):n&2?(M=P.x,I=t.y+_*(P.x-t.x)/f):n&1&&(M=w.x,I=t.y+_*(w.x-t.x)/f),new N(M,I,l)}function ee(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function Ns(t,e){var n=e.x-t.x,s=e.y-t.y;return n*n+s*s}function Ee(t,e,n,s){var l=e.x,f=e.y,_=n.x-l,w=n.y-f,P=_*_+w*w,M;return P>0&&(M=((t.x-l)*_+(t.y-f)*w)/P,M>1?(l=n.x,f=n.y):M>0&&(l+=_*M,f+=w*M)),_=t.x-l,w=t.y-f,s?_*_+w*w:new N(l,f)}function zt(t){return!y(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Pr(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),zt(t)}function kr(t,e){var n,s,l,f,_,w,P,M;if(!t||t.length===0)throw new Error("latlngs not passed");zt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var I=U([0,0]),j=nt(t),X=j.getNorthWest().distanceTo(j.getSouthWest())*j.getNorthEast().distanceTo(j.getNorthWest());X<1700&&(I=un(t));var vt=t.length,_t=[];for(n=0;n<vt;n++){var Mt=U(t[n]);_t.push(e.project(U([Mt.lat-I.lat,Mt.lng-I.lng])))}for(n=0,s=0;n<vt-1;n++)s+=_t[n].distanceTo(_t[n+1])/2;if(s===0)M=_t[0];else for(n=0,f=0;n<vt-1;n++)if(_=_t[n],w=_t[n+1],l=_.distanceTo(w),f+=l,f>s){P=(f-s)/l,M=[w.x-P*(w.x-_.x),w.y-P*(w.y-_.y)];break}var wt=e.unproject(F(M));return U([wt.lat+I.lat,wt.lng+I.lng])}var Vs={__proto__:null,simplify:wr,pointToSegmentDistance:xr,closestPointOnSegment:Zs,clipSegment:Lr,_getEdgeIntersection:ri,_getBitCode:ee,_sqClosestPointOnSegment:Ee,isFlat:zt,_flat:Pr,polylineCenter:kr},fn={project:function(t){return new N(t.lng,t.lat)},unproject:function(t){return new J(t.y,t.x)},bounds:new K([-180,-90],[180,90])},dn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new K([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var e=Math.PI/180,n=this.R,s=t.lat*e,l=this.R_MINOR/n,f=Math.sqrt(1-l*l),_=f*Math.sin(s),w=Math.tan(Math.PI/4-s/2)/Math.pow((1-_)/(1+_),f/2);return s=-n*Math.log(Math.max(w,1e-10)),new N(t.lng*e*n,s)},unproject:function(t){for(var e=180/Math.PI,n=this.R,s=this.R_MINOR/n,l=Math.sqrt(1-s*s),f=Math.exp(-t.y/n),_=Math.PI/2-2*Math.atan(f),w=0,P=.1,M;w<15&&Math.abs(P)>1e-7;w++)M=l*Math.sin(_),M=Math.pow((1-M)/(1+M),l/2),P=Math.PI/2-2*Math.atan(f*M)-_,_+=P;return new J(_*e,t.x*e/n)}},js={__proto__:null,LonLat:fn,Mercator:dn,SphericalMercator:re},Hs=o({},kt,{code:"EPSG:3395",projection:dn,transformation:function(){var t=.5/(Math.PI*dn.R);return Wt(t,.5,-t,.5)}()}),Tr=o({},kt,{code:"EPSG:4326",projection:fn,transformation:Wt(1/180,1,-1/180,.5)}),Us=o({},xt,{projection:fn,transformation:Wt(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,s=e.lat-t.lat;return Math.sqrt(n*n+s*s)},infinite:!0});xt.Earth=kt,xt.EPSG3395=Hs,xt.EPSG3857=oe,xt.EPSG900913=Ge,xt.EPSG4326=Tr,xt.Simple=Us;var Et=ft.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[c(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[c(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});q.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=c(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=c(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return c(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){t=t?y(t)?t:[t]:[];for(var e=0,n=t.length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[c(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=c(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var s in this._zoomBoundLayers){var l=this._zoomBoundLayers[s].options;t=l.minZoom===void 0?t:Math.min(t,l.minZoom),e=l.maxZoom===void 0?e:Math.max(e,l.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var le=Et.extend({initialize:function(t,e){T(this,e),this._layers={};var n,s;if(t)for(n=0,s=t.length;n<s;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){var e=typeof t=="number"?t:this.getLayerId(t);return e in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e=Array.prototype.slice.call(arguments,1),n,s;for(n in this._layers)s=this._layers[n],s[t]&&s[t].apply(s,e);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return c(t)}}),Ws=function(t,e){return new le(t,e)},Nt=le.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),le.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),le.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new dt;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),Ys=function(t,e){return new Nt(t,e)},ue=tt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){T(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var s=this._createImg(n,e&&e.tagName==="IMG"?e:null);return this._setIconStyles(s,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(s.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),s},_setIconStyles:function(t,e){var n=this.options,s=n[e+"Size"];typeof s=="number"&&(s=[s,s]);var l=F(s),f=F(e==="shadow"&&n.shadowAnchor||n.iconAnchor||l&&l.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),f&&(t.style.marginLeft=-f.x+"px",t.style.marginTop=-f.y+"px"),l&&(t.style.width=l.x+"px",t.style.height=l.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return R.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Xs(t){return new ue(t)}var Be=ue.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Be.imagePath!="string"&&(Be.imagePath=this._detectIconPath()),(this.options.imagePath||Be.imagePath)+ue.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(n,s,l){var f=s.exec(n);return f&&f[l]};return t=e(t,/^url\((['"])?(.+)\1\)$/,2),t&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=G("div","leaflet-default-icon-path",document.body),e=ke(t,"background-image")||ke(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e),e)return e;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-11-1):""}}),zr=Dt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Yt(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),W(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&lt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,s=this._marker.options.autoPanSpeed,l=this._marker.options.autoPanPadding,f=Jt(e._icon),_=n.getPixelBounds(),w=n.getPixelOrigin(),P=et(_.min._subtract(w).add(l),_.max._subtract(w).subtract(l));if(!P.contains(f)){var M=F((Math.max(P.max.x,f.x)-P.max.x)/(_.max.x-P.max.x)-(Math.min(P.min.x,f.x)-P.min.x)/(_.min.x-P.min.x),(Math.max(P.max.y,f.y)-P.max.y)/(_.max.y-P.max.y)-(Math.min(P.min.y,f.y)-P.min.y)/(_.min.y-P.min.y)).multiplyBy(s);n.panBy(M,{animate:!1}),this._draggable._newPos._add(M),this._draggable._startPos._add(M),ut(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=O(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(V(this._panRequest),this._panRequest=O(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,s=Jt(e._icon),l=e._map.layerPointToLatLng(s);n&&ut(n,s),e._latlng=l,t.latlng=l,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){V(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),oi=Et.extend({options:{icon:new Be,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){T(this,e),this._latlng=U(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=U(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),s=!1;n!==this._icon&&(this._icon&&this._removeIcon(),s=!0,t.title&&(n.title=t.title),n.tagName==="IMG"&&(n.alt=t.alt||"")),W(n,e),t.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&H(n,"focus",this._panOnFocus,this);var l=t.icon.createShadow(this._shadow),f=!1;l!==this._shadow&&(this._removeShadow(),f=!0),l&&(W(l,e),l.alt=""),this._shadow=l,t.opacity<1&&this._updateOpacity(),s&&this.getPane().appendChild(this._icon),this._initInteraction(),l&&f&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&rt(this._icon,"focus",this._panOnFocus,this),st(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&st(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&ut(this._icon,t),this._shadow&&ut(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(W(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),zr)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new zr(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Tt(this._icon,t),this._shadow&&Tt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,n=e.iconSize?F(e.iconSize):F(0,0),s=e.iconAnchor?F(e.iconAnchor):F(0,0);t.panInside(this._latlng,{paddingTopLeft:s,paddingBottomRight:n.subtract(s)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function qs(t,e){return new oi(t,e)}var Xt=Et.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return T(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),si=Xt.extend({options:{fill:!0,radius:10},initialize:function(t,e){T(this,e),this._latlng=U(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=U(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Xt.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),s=[t+n,e+n];this._pxBounds=new K(this._point.subtract(s),this._point.add(s))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function $s(t,e){return new si(t,e)}var _n=si.extend({initialize:function(t,e,n){if(typeof e=="number"&&(e=o({},n,{radius:e})),T(this,e),this._latlng=U(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new dt(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Xt.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,s=n.options.crs;if(s.distance===kt.distance){var l=Math.PI/180,f=this._mRadius/kt.R/l,_=n.project([e+f,t]),w=n.project([e-f,t]),P=_.add(w).divideBy(2),M=n.unproject(P).lat,I=Math.acos((Math.cos(f*l)-Math.sin(e*l)*Math.sin(M*l))/(Math.cos(e*l)*Math.cos(M*l)))/l;(isNaN(I)||I===0)&&(I=f/Math.cos(Math.PI/180*e)),this._point=P.subtract(n.getPixelOrigin()),this._radius=isNaN(I)?0:P.x-n.project([M,t-I]).x,this._radiusY=P.y-_.y}else{var j=s.unproject(s.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(j).x}this._updateBounds()}});function Gs(t,e,n){return new _n(t,e,n)}var Vt=Xt.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){T(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e=1/0,n=null,s=Ee,l,f,_=0,w=this._parts.length;_<w;_++)for(var P=this._parts[_],M=1,I=P.length;M<I;M++){l=P[M-1],f=P[M];var j=s(t,l,f,!0);j<e&&(e=j,n=s(t,l,f))}return n&&(n.distance=Math.sqrt(e)),n},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return kr(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=U(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new dt,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return zt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=zt(t),s=0,l=t.length;s<l;s++)n?(e[s]=U(t[s]),this._bounds.extend(e[s])):e[s]=this._convertLatLngs(t[s]);return e},_project:function(){var t=new K;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new N(t,t);this._rawPxBounds&&(this._pxBounds=new K([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,n){var s=t[0]instanceof J,l=t.length,f,_;if(s){for(_=[],f=0;f<l;f++)_[f]=this._map.latLngToLayerPoint(t[f]),n.extend(_[f]);e.push(_)}else for(f=0;f<l;f++)this._projectLatlngs(t[f],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var e=this._parts,n,s,l,f,_,w,P;for(n=0,l=0,f=this._rings.length;n<f;n++)for(P=this._rings[n],s=0,_=P.length;s<_-1;s++)w=Lr(P[s],P[s+1],t,s,!0),w&&(e[l]=e[l]||[],e[l].push(w[0]),(w[1]!==P[s+1]||s===_-2)&&(e[l].push(w[1]),l++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,s=t.length;n<s;n++)t[n]=wr(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,s,l,f,_,w,P=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,f=this._parts.length;n<f;n++)for(w=this._parts[n],s=0,_=w.length,l=_-1;s<_;l=s++)if(!(!e&&s===0)&&xr(t,w[l],w[s])<=P)return!0;return!1}});function Ks(t,e){return new Vt(t,e)}Vt._flat=Pr;var ce=Vt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return yr(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=Vt.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof J&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){Vt.prototype._setLatLngs.call(this,t),zt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return zt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new N(e,e);if(t=new K(t.min.subtract(n),t.max.add(n)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var s=0,l=this._rings.length,f;s<l;s++)f=vr(this._rings[s],t,!0),f.length&&this._parts.push(f)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e=!1,n,s,l,f,_,w,P,M;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(f=0,P=this._parts.length;f<P;f++)for(n=this._parts[f],_=0,M=n.length,w=M-1;_<M;w=_++)s=n[_],l=n[w],s.y>t.y!=l.y>t.y&&t.x<(l.x-s.x)*(t.y-s.y)/(l.y-s.y)+s.x&&(e=!e);return e||Vt.prototype._containsPoint.call(this,t,!0)}});function Js(t,e){return new ce(t,e)}var jt=Nt.extend({initialize:function(t,e){T(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e=y(t)?t:t.features,n,s,l;if(e){for(n=0,s=e.length;n<s;n++)l=e[n],(l.geometries||l.geometry||l.features||l.coordinates)&&this.addData(l);return this}var f=this.options;if(f.filter&&!f.filter(t))return this;var _=ai(t,f);return _?(_.feature=ui(t),_.defaultOptions=_.options,this.resetStyle(_),f.onEachFeature&&f.onEachFeature(t,_),this.addLayer(_)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=o({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&(typeof e=="function"&&(e=e(t.feature)),t.setStyle(e))}});function ai(t,e){var n=t.type==="Feature"?t.geometry:t,s=n?n.coordinates:null,l=[],f=e&&e.pointToLayer,_=e&&e.coordsToLatLng||mn,w,P,M,I;if(!s&&!n)return null;switch(n.type){case"Point":return w=_(s),Mr(f,t,w,e);case"MultiPoint":for(M=0,I=s.length;M<I;M++)w=_(s[M]),l.push(Mr(f,t,w,e));return new Nt(l);case"LineString":case"MultiLineString":return P=hi(s,n.type==="LineString"?0:1,_),new Vt(P,e);case"Polygon":case"MultiPolygon":return P=hi(s,n.type==="Polygon"?1:2,_),new ce(P,e);case"GeometryCollection":for(M=0,I=n.geometries.length;M<I;M++){var j=ai({geometry:n.geometries[M],type:"Feature",properties:t.properties},e);j&&l.push(j)}return new Nt(l);case"FeatureCollection":for(M=0,I=n.features.length;M<I;M++){var X=ai(n.features[M],e);X&&l.push(X)}return new Nt(l);default:throw new Error("Invalid GeoJSON object.")}}function Mr(t,e,n,s){return t?t(e,n):new oi(n,s&&s.markersInheritOptions&&s)}function mn(t){return new J(t[1],t[0],t[2])}function hi(t,e,n){for(var s=[],l=0,f=t.length,_;l<f;l++)_=e?hi(t[l],e-1,n):(n||mn)(t[l]),s.push(_);return s}function pn(t,e){return t=U(t),t.alt!==void 0?[v(t.lng,e),v(t.lat,e),v(t.alt,e)]:[v(t.lng,e),v(t.lat,e)]}function li(t,e,n,s){for(var l=[],f=0,_=t.length;f<_;f++)l.push(e?li(t[f],zt(t[f])?0:e-1,n,s):pn(t[f],s));return!e&&n&&l.length>0&&l.push(l[0].slice()),l}function fe(t,e){return t.feature?o({},t.feature,{geometry:e}):ui(e)}function ui(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var gn={toGeoJSON:function(t){return fe(this,{type:"Point",coordinates:pn(this.getLatLng(),t)})}};oi.include(gn),_n.include(gn),si.include(gn),Vt.include({toGeoJSON:function(t){var e=!zt(this._latlngs),n=li(this._latlngs,e?1:0,!1,t);return fe(this,{type:(e?"Multi":"")+"LineString",coordinates:n})}}),ce.include({toGeoJSON:function(t){var e=!zt(this._latlngs),n=e&&!zt(this._latlngs[0]),s=li(this._latlngs,n?2:e?1:0,!0,t);return e||(s=[s]),fe(this,{type:(n?"Multi":"")+"Polygon",coordinates:s})}}),le.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(n){e.push(n.toGeoJSON(t).geometry.coordinates)}),fe(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(e==="MultiPoint")return this.toMultiPoint(t);var n=e==="GeometryCollection",s=[];return this.eachLayer(function(l){if(l.toGeoJSON){var f=l.toGeoJSON(t);if(n)s.push(f.geometry);else{var _=ui(f);_.type==="FeatureCollection"?s.push.apply(s,_.features):s.push(_)}}}),n?fe(this,{geometries:s,type:"GeometryCollection"}):{type:"FeatureCollection",features:s}}});function Sr(t,e){return new jt(t,e)}var Qs=Sr,ci=Et.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=nt(e),T(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(W(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){st(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ae(this._image),this},bringToBack:function(){return this._map&&he(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=nt(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",e=this._image=t?this._url:G("img");if(W(e,"leaflet-image-layer"),this._zoomAnimated&&W(e,"leaflet-zoom-animated"),this.options.className&&W(e,this.options.className),e.onselectstart=p,e.onmousemove=p,e.onload=h(this.fire,this,"load"),e.onerror=h(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(e.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=e.src;return}e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Kt(this._image,n,e)},_reset:function(){var t=this._image,e=new K(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();ut(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){Tt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),ta=function(t,e,n){return new ci(t,e,n)},Cr=ci.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",e=this._image=t?this._url:G("video");if(W(e,"leaflet-image-layer"),this._zoomAnimated&&W(e,"leaflet-zoom-animated"),this.options.className&&W(e,this.options.className),e.onselectstart=p,e.onmousemove=p,e.onloadeddata=h(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),s=[],l=0;l<n.length;l++)s.push(n[l].src);this._url=n.length>0?s:[e.src];return}y(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var f=0;f<this._url.length;f++){var _=G("source");_.src=this._url[f],e.appendChild(_)}}});function ea(t,e,n){return new Cr(t,e,n)}var Er=ci.extend({_initImage:function(){var t=this._image=this._url;W(t,"leaflet-image-layer"),this._zoomAnimated&&W(t,"leaflet-zoom-animated"),this.options.className&&W(t,this.options.className),t.onselectstart=p,t.onmousemove=p}});function ia(t,e,n){return new Er(t,e,n)}var Zt=Et.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof J||y(t))?(this._latlng=U(t),T(this,e)):(T(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Tt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Tt(this._container,1),this.bringToFront(),this.options.interactive&&(W(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Tt(this._container,0),this._removeTimeout=setTimeout(h(st,void 0,this._container),200)):st(this._container),this.options.interactive&&(lt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=U(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ae(this._container),this},bringToBack:function(){return this._map&&he(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof Nt){e=null;var n=this._source._layers;for(var s in n)if(n[s]._map){e=n[s];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else if(e.getBounds)t=e.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof e=="string")t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=F(this.options.offset),n=this._getAnchor();this._zoomAnimated?ut(this._container,t.add(n)):e=e.add(t).add(n);var s=this._containerBottom=-e.y,l=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=s+"px",this._container.style.left=l+"px"}},_getAnchor:function(){return[0,0]}});q.include({_initOverlay:function(t,e,n,s){var l=e;return l instanceof t||(l=new t(s).setContent(e)),n&&l.setLatLng(n),l}}),Et.include({_initOverlay:function(t,e,n,s){var l=n;return l instanceof t?(T(l,s),l._source=this):(l=e&&!s?e:new t(s,this),l.setContent(n)),l}});var fi=Zt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Zt.prototype.openOn.call(this,t)},onAdd:function(t){Zt.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Xt||this._source.on("preclick",Qt))},onRemove:function(t){Zt.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Xt||this._source.off("preclick",Qt))},getEvents:function(){var t=Zt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=G("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=G("div",t+"-content-wrapper",e);if(this._contentNode=G("div",t+"-content",n),Se(e),sn(this._contentNode),H(e,"contextmenu",Qt),this._tipContainer=G("div",t+"-tip-container",e),this._tip=G("div",t+"-tip",this._tipContainer),this.options.closeButton){var s=this._closeButton=G("a",t+"-close-button",e);s.setAttribute("role","button"),s.setAttribute("aria-label","Close popup"),s.href="#close",s.innerHTML='<span aria-hidden="true">&#215;</span>',H(s,"click",function(l){mt(l),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var s=t.offsetHeight,l=this.options.maxHeight,f="leaflet-popup-scrolled";l&&s>l?(e.height=l+"px",W(t,f)):lt(t,f),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();ut(this._container,e.add(n))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,e=parseInt(ke(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,s=this._containerWidth,l=new N(this._containerLeft,-n-this._containerBottom);l._add(Jt(this._container));var f=t.layerPointToContainerPoint(l),_=F(this.options.autoPanPadding),w=F(this.options.autoPanPaddingTopLeft||_),P=F(this.options.autoPanPaddingBottomRight||_),M=t.getSize(),I=0,j=0;f.x+s+P.x>M.x&&(I=f.x+s-M.x+P.x),f.x-I-w.x<0&&(I=f.x-w.x),f.y+n+P.y>M.y&&(j=f.y+n-M.y+P.y),f.y-j-w.y<0&&(j=f.y-w.y),(I||j)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([I,j]))}},_getAnchor:function(){return F(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),na=function(t,e){return new fi(t,e)};q.mergeOptions({closePopupOnClick:!0}),q.include({openPopup:function(t,e,n){return this._initOverlay(fi,t,e,n).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Et.include({bindPopup:function(t,e){return this._popup=this._initOverlay(fi,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Nt||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){te(t);var e=t.layer||t.target;if(this._popup._source===e&&!(e instanceof Xt)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=e,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var di=Zt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Zt.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Zt.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Zt.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=G("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,n,s=this._map,l=this._container,f=s.latLngToContainerPoint(s.getCenter()),_=s.layerPointToContainerPoint(t),w=this.options.direction,P=l.offsetWidth,M=l.offsetHeight,I=F(this.options.offset),j=this._getAnchor();w==="top"?(e=P/2,n=M):w==="bottom"?(e=P/2,n=0):w==="center"?(e=P/2,n=M/2):w==="right"?(e=0,n=M/2):w==="left"?(e=P,n=M/2):_.x<f.x?(w="right",e=0,n=M/2):(w="left",e=P+(I.x+j.x)*2,n=M/2),t=t.subtract(F(e,n,!0)).add(I).add(j),lt(l,"leaflet-tooltip-right"),lt(l,"leaflet-tooltip-left"),lt(l,"leaflet-tooltip-top"),lt(l,"leaflet-tooltip-bottom"),W(l,"leaflet-tooltip-"+w),ut(l,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Tt(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return F(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ra=function(t,e){return new di(t,e)};q.include({openTooltip:function(t,e,n){return this._initOverlay(di,t,e,n).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Et.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(di,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Nt||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&(H(e,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),H(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var e=this;this._map.once("moveend",function(){e._openOnceFlag=!1,e._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var e=t.latlng,n,s;this._tooltip.options.sticky&&t.originalEvent&&(n=this._map.mouseEventToContainerPoint(t.originalEvent),s=this._map.containerPointToLayerPoint(n),e=this._map.layerPointToLatLng(s)),this._tooltip.setLatLng(e)}});var Br=ue.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&t.tagName==="DIV"?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(Qe(e),e.appendChild(n.html)):e.innerHTML=n.html!==!1?n.html:"",n.bgPos){var s=F(n.bgPos);e.style.backgroundPosition=-s.x+"px "+-s.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function oa(t){return new Br(t)}ue.Default=Be;var Ae=Et.extend({options:{tileSize:256,opacity:1,updateWhenIdle:R.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){T(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),st(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ae(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(he(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof N?t:new N(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e=this.getPane().children,n=-t(-1/0,1/0),s=0,l=e.length,f;s<l;s++)f=e[s].style.zIndex,e[s]!==this._container&&f&&(n=t(n,+f));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!R.ielt9){Tt(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var s in this._tiles){var l=this._tiles[s];if(!(!l.current||!l.loaded)){var f=Math.min(1,(t-l.loaded)/200);Tt(l.el,f),f<1?e=!0:(l.active?n=!0:this._onOpaqueTile(l),l.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(V(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=G("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t!==void 0){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(st(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var s=this._levels[t],l=this._map;return s||(s=this._levels[t]={},s.el=G("div","leaflet-tile-container leaflet-zoom-animated",this._container),s.el.style.zIndex=e,s.origin=l.project(l.unproject(l.getPixelOrigin()),t).round(),s.zoom=t,this._setZoomTransform(s,l.getCenter(),l.getZoom()),p(s.el.offsetWidth),this._onCreateLevel(s)),this._level=s,s}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var s=e.coords;this._retainParent(s.x,s.y,s.z,s.z-5)||this._retainChildren(s.x,s.y,s.z,s.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)st(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,s){var l=Math.floor(t/2),f=Math.floor(e/2),_=n-1,w=new N(+l,+f);w.z=+_;var P=this._tileCoordsToKey(w),M=this._tiles[P];return M&&M.active?(M.retain=!0,!0):(M&&M.loaded&&(M.retain=!0),_>s?this._retainParent(l,f,_,s):!1)},_retainChildren:function(t,e,n,s){for(var l=2*t;l<2*t+2;l++)for(var f=2*e;f<2*e+2;f++){var _=new N(l,f);_.z=n+1;var w=this._tileCoordsToKey(_),P=this._tiles[w];if(P&&P.active){P.retain=!0;continue}else P&&P.loaded&&(P.retain=!0);n+1<s&&this._retainChildren(l,f,n+1,s)}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return e.minNativeZoom!==void 0&&t<e.minNativeZoom?e.minNativeZoom:e.maxNativeZoom!==void 0&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,s){var l=Math.round(e);this.options.maxZoom!==void 0&&l>this.options.maxZoom||this.options.minZoom!==void 0&&l<this.options.minZoom?l=void 0:l=this._clampZoom(l);var f=this.options.updateWhenZooming&&l!==this._tileZoom;(!s||f)&&(this._tileZoom=l,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),l!==void 0&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var s=this._map.getZoomScale(n,t.zoom),l=t.origin.multiplyBy(s).subtract(this._map._getNewPixelOrigin(e,n)).round();R.any3d?Kt(t.el,l,s):ut(t.el,l)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),s=this._tileZoom,l=this._map.getPixelWorldBounds(this._tileZoom);l&&(this._globalTileRange=this._pxBoundsToTileRange(l)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],s).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],s).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],s).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],s).y/n.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),s=e.getZoomScale(n,this._tileZoom),l=e.project(t,this._tileZoom).floor(),f=e.getSize().divideBy(s*2);return new K(l.subtract(f),l.add(f))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(t===void 0&&(t=e.getCenter()),this._tileZoom!==void 0){var s=this._getTiledPixelBounds(t),l=this._pxBoundsToTileRange(s),f=l.getCenter(),_=[],w=this.options.keepBuffer,P=new K(l.getBottomLeft().subtract([w,-w]),l.getTopRight().add([w,-w]));if(!(isFinite(l.min.x)&&isFinite(l.min.y)&&isFinite(l.max.x)&&isFinite(l.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var M in this._tiles){var I=this._tiles[M].coords;(I.z!==this._tileZoom||!P.contains(new N(I.x,I.y)))&&(this._tiles[M].current=!1)}if(Math.abs(n-this._tileZoom)>1){this._setView(t,n);return}for(var j=l.min.y;j<=l.max.y;j++)for(var X=l.min.x;X<=l.max.x;X++){var vt=new N(X,j);if(vt.z=this._tileZoom,!!this._isValidTile(vt)){var _t=this._tiles[this._tileCoordsToKey(vt)];_t?_t.current=!0:_.push(vt)}}if(_.sort(function(wt,_e){return wt.distanceTo(f)-_e.distanceTo(f)}),_.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Mt=document.createDocumentFragment();for(X=0;X<_.length;X++)this._addTile(_[X],Mt);this._level.el.appendChild(Mt)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var s=this._tileCoordsToBounds(t);return nt(this.options.bounds).overlaps(s)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),s=t.scaleBy(n),l=s.add(n),f=e.unproject(s,t.z),_=e.unproject(l,t.z);return[f,_]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new dt(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new N(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(st(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){W(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=p,t.onmousemove=p,R.ielt9&&this.options.opacity<1&&Tt(t,this.options.opacity)},_addTile:function(t,e){var n=this._getTilePos(t),s=this._tileCoordsToKey(t),l=this.createTile(this._wrapCoords(t),h(this._tileReady,this,t));this._initTile(l),this.createTile.length<2&&O(h(this._tileReady,this,t,null,l)),ut(l,n),this._tiles[s]={el:l,coords:t,current:!0},e.appendChild(l),this.fire("tileloadstart",{tile:l,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var s=this._tileCoordsToKey(t);n=this._tiles[s],n&&(n.loaded=+new Date,this._map._fadeAnimated?(Tt(n.el,0),V(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(W(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),R.ielt9||!this._map._fadeAnimated?O(this._pruneTiles,this):setTimeout(h(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new N(this._wrapX?m(t.x,this._wrapX):t.x,this._wrapY?m(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new K(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function sa(t){return new Ae(t)}var de=Ae.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,e=T(this,e),e.detectRetina&&R.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),typeof e.subdomains=="string"&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&e===void 0&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return H(n,"load",h(this._tileOnLoad,this,e,n)),H(n,"error",h(this._tileOnError,this,e,n)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(n.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:R.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=n),e["-y"]=n}return g(this._url,o(e,this.options))},_tileOnLoad:function(t,e){R.ielt9?setTimeout(h(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var s=this.options.errorTileUrl;s&&e.getAttribute("src")!==s&&(e.src=s),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,n=this.options.zoomReverse,s=this.options.zoomOffset;return n&&(t=e-t),t+s},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=p,e.onerror=p,!e.complete)){e.src=C;var n=this._tiles[t].coords;st(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:n})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",C),Ae.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(!(!this._map||n&&n.getAttribute("src")===C))return Ae.prototype._tileReady.call(this,t,e,n)}});function Ar(t,e){return new de(t,e)}var Ir=de.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var n=o({},this.defaultWmsParams);for(var s in e)s in this.options||(n[s]=e[s]);e=T(this,e);var l=e.detectRetina&&R.retina?2:1,f=this.getTileSize();n.width=f.x*l,n.height=f.y*l,this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,de.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,s=et(n.project(e[0]),n.project(e[1])),l=s.min,f=s.max,_=(this._wmsVersion>=1.3&&this._crs===Tr?[l.y,l.x,f.y,f.x]:[l.x,l.y,f.x,f.y]).join(","),w=de.prototype.getTileUrl.call(this,t);return w+E(this.wmsParams,w,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+_},setParams:function(t,e){return o(this.wmsParams,t),e||this.redraw(),this}});function aa(t,e){return new Ir(t,e)}de.WMS=Ir,Ar.wms=aa;var Ht=Et.extend({options:{padding:.1},initialize:function(t){T(this,t),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),W(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),s=this._map.getSize().multiplyBy(.5+this.options.padding),l=this._map.project(this._center,e),f=s.multiplyBy(-n).add(l).subtract(this._map._getNewPixelOrigin(t,e));R.any3d?Kt(this._container,f,n):ut(this._container,f)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new K(n,n.add(e.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Or=Ht.extend({options:{tolerance:0},getEvents:function(){var t=Ht.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ht.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");H(t,"mousemove",this._onMouseMove,this),H(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),H(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){V(this._redrawRequest),delete this._ctx,st(this._container),rt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ht.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),s=R.retina?2:1;ut(e,t.min),e.width=s*n.x,e.height=s*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",R.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Ht.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[c(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,s=e.prev;n?n.prev=s:this._drawLast=s,s?s.next=n:this._drawFirst=n,delete t._order,delete this._layers[c(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var e=t.options.dashArray.split(/[, ]+/),n=[],s,l;for(l=0;l<e.length;l++){if(s=Number(e[l]),isNaN(s))return;n.push(s)}t.options._dashArray=n}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||O(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new K,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var s=this._drawFirst;s;s=s.next)t=s.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,s,l,f,_=t._parts,w=_.length,P=this._ctx;if(w){for(P.beginPath(),n=0;n<w;n++){for(s=0,l=_[n].length;s<l;s++)f=_[n][s],P[s?"lineTo":"moveTo"](f.x,f.y);e&&P.closePath()}this._fillStroke(P,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var e=t._point,n=this._ctx,s=Math.max(Math.round(t._radius),1),l=(Math.max(Math.round(t._radiusY),1)||s)/s;l!==1&&(n.save(),n.scale(1,l)),n.beginPath(),n.arc(e.x,e.y/l,s,0,Math.PI*2,!1),l!==1&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&n.weight!==0&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e=this._map.mouseEventToLayerPoint(t),n,s,l=this._drawFirst;l;l=l.next)n=l.layer,n.options.interactive&&n._containsPoint(e)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(n))&&(s=n);this._fireEvent(s?[s]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(lt(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,s,l=this._drawFirst;l;l=l.next)n=l.layer,n.options.interactive&&n._containsPoint(e)&&(s=n);s!==this._hoveredLayer&&(this._handleMouseOut(t),s&&(W(this._container,"leaflet-interactive"),this._fireEvent([s],t,"mouseover"),this._hoveredLayer=s)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(h(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,s=e.prev;if(n)n.prev=s;else return;s?s.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t)}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,s=e.prev;if(s)s.next=n;else return;n?n.prev=s:s&&(this._drawLast=s),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t)}}});function Dr(t){return R.canvas?new Or(t):null}var Ie=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),ha={_initContainer:function(){this._container=G("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ht.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=Ie("shape");W(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=Ie("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[c(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;st(e),t.removeInteractiveTarget(e),delete this._layers[c(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,s=t.options,l=t._container;l.stroked=!!s.stroke,l.filled=!!s.fill,s.stroke?(e||(e=t._stroke=Ie("stroke")),l.appendChild(e),e.weight=s.weight+"px",e.color=s.color,e.opacity=s.opacity,s.dashArray?e.dashStyle=y(s.dashArray)?s.dashArray.join(" "):s.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=s.lineCap.replace("butt","flat"),e.joinstyle=s.lineJoin):e&&(l.removeChild(e),t._stroke=null),s.fill?(n||(n=t._fill=Ie("fill")),l.appendChild(n),n.color=s.fillColor||s.color,n.opacity=s.fillOpacity):n&&(l.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),s=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+s+" 0,"+65535*360)},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){ae(t._container)},_bringToBack:function(t){he(t._container)}},_i=R.vml?Ie:Nn,Oe=Ht.extend({_initContainer:function(){this._container=_i("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=_i("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){st(this._container),rt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ht.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;(!this._svgSize||!this._svgSize.equals(e))&&(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),ut(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=_i("path");t.options.className&&W(e,t.options.className),t.options.interactive&&W(e,"leaflet-interactive"),this._updateStyle(t),this._layers[c(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){st(t._path),t.removeInteractiveTarget(t._path),delete this._layers[c(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,Vn(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),s=Math.max(Math.round(t._radiusY),1)||n,l="a"+n+","+s+" 0 1,0 ",f=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+l+n*2+",0 "+l+-n*2+",0 ";this._setPath(t,f)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){ae(t._path)},_bringToBack:function(t){he(t._path)}});R.vml&&Oe.include(ha);function Zr(t){return R.svg||R.vml?new Oe(t):null}q.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var e=this._paneRenderers[t];return e===void 0&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&Dr(t)||Zr(t)}});var Fr=ce.extend({initialize:function(t,e){ce.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=nt(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function la(t,e){return new Fr(t,e)}Oe.create=_i,Oe.pointsToPath=Vn,jt.geometryToLayer=ai,jt.coordsToLatLng=mn,jt.coordsToLatLngs=hi,jt.latLngToCoords=pn,jt.latLngsToCoords=li,jt.getFeature=fe,jt.asFeature=ui,q.mergeOptions({boxZoom:!0});var Rr=Dt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){H(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){rt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){st(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Te(),Ki(),this._startPoint=this._map.mouseEventToContainerPoint(t),H(document,{contextmenu:te,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=G("div","leaflet-zoom-box",this._container),W(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new K(this._point,this._startPoint),n=e.getSize();ut(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(st(this._box),lt(this._container,"leaflet-crosshair")),ze(),Ji(),rt(document,{contextmenu:te,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(h(this._resetState,this),0);var e=new dt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});q.addInitHook("addHandler","boxZoom",Rr),q.mergeOptions({doubleClickZoom:!0});var Nr=Dt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),s=e.options.zoomDelta,l=t.originalEvent.shiftKey?n-s:n+s;e.options.doubleClickZoom==="center"?e.setZoom(l):e.setZoomAround(t.containerPoint,l)}});q.addInitHook("addHandler","doubleClickZoom",Nr),q.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Vr=Dt.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Yt(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}W(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){lt(this._map._container,"leaflet-grab"),lt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=nt(this._map.options.maxBounds);this._offsetLimit=et(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,s=this._draggable._newPos.x,l=(s-e+n)%t+e-n,f=(s+e+n)%t-e-n,_=Math.abs(l+n)<Math.abs(f+n)?l:f;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=_},_onDragEnd:function(t){var e=this._map,n=e.options,s=!n.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),s)e.fire("moveend");else{this._prunePositions(+new Date);var l=this._lastPos.subtract(this._positions[0]),f=(this._lastTime-this._times[0])/1e3,_=n.easeLinearity,w=l.multiplyBy(_/f),P=w.distanceTo([0,0]),M=Math.min(n.inertiaMaxSpeed,P),I=w.multiplyBy(M/P),j=M/(n.inertiaDeceleration*_),X=I.multiplyBy(-j/2).round();!X.x&&!X.y?e.fire("moveend"):(X=e._limitOffset(X,e.options.maxBounds),O(function(){e.panBy(X,{duration:j,easeLinearity:_,noMoveStart:!0,animate:!0})}))}}});q.addInitHook("addHandler","dragging",Vr),q.mergeOptions({keyboard:!0,keyboardPanDelta:80});var jr=Dt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),H(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),rt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,s=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(s,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e=this._panKeys={},n=this.keyCodes,s,l;for(s=0,l=n.left.length;s<l;s++)e[n.left[s]]=[-1*t,0];for(s=0,l=n.right.length;s<l;s++)e[n.right[s]]=[t,0];for(s=0,l=n.down.length;s<l;s++)e[n.down[s]]=[0,t];for(s=0,l=n.up.length;s<l;s++)e[n.up[s]]=[0,-1*t]},_setZoomDelta:function(t){var e=this._zoomKeys={},n=this.keyCodes,s,l;for(s=0,l=n.zoomIn.length;s<l;s++)e[n.zoomIn[s]]=t;for(s=0,l=n.zoomOut.length;s<l;s++)e[n.zoomOut[s]]=-t},_addHooks:function(){H(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){rt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=t.keyCode,n=this._map,s;if(e in this._panKeys){if(!n._panAnim||!n._panAnim._inProgress)if(s=this._panKeys[e],t.shiftKey&&(s=F(s).multiplyBy(3)),n.options.maxBounds&&(s=n._limitOffset(F(s),n.options.maxBounds)),n.options.worldCopyJump){var l=n.wrapLatLng(n.unproject(n.project(n.getCenter()).add(s)));n.panTo(l)}else n.panBy(s)}else if(e in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else if(e===27&&n._popup&&n._popup.options.closeOnEscapeKey)n.closePopup();else return;te(t)}}});q.addInitHook("addHandler","keyboard",jr),q.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Hr=Dt.extend({addHooks:function(){H(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){rt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=dr(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var s=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(h(this._performZoom,this),s),te(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var s=this._delta/(this._map.options.wheelPxPerZoomLevel*4),l=4*Math.log(2/(1+Math.exp(-Math.abs(s))))/Math.LN2,f=n?Math.ceil(l/n)*n:l,_=t._limitZoom(e+(this._delta>0?f:-f))-e;this._delta=0,this._startTime=null,_&&(t.options.scrollWheelZoom==="center"?t.setZoom(e+_):t.setZoomAround(this._lastMousePos,e+_))}});q.addInitHook("addHandler","scrollWheelZoom",Hr);var ua=600;q.mergeOptions({tapHold:R.touchNative&&R.safari&&R.mobile,tapTolerance:15});var Ur=Dt.extend({addHooks:function(){H(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){rt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var e=t.touches[0];this._startPos=this._newPos=new N(e.clientX,e.clientY),this._holdTimeout=setTimeout(h(function(){this._cancel(),this._isTapValid()&&(H(document,"touchend",mt),H(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))},this),ua),H(document,"touchend touchcancel contextmenu",this._cancel,this),H(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){rt(document,"touchend",mt),rt(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),rt(document,"touchend touchcancel contextmenu",this._cancel,this),rt(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new N(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var n=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});n._simulated=!0,e.target.dispatchEvent(n)}});q.addInitHook("addHandler","tapHold",Ur),q.mergeOptions({touchZoom:R.touch,bounceAtZoomLimits:!0});var Wr=Dt.extend({addHooks:function(){W(this._map._container,"leaflet-touch-zoom"),H(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){lt(this._map._container,"leaflet-touch-zoom"),rt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(!(!t.touches||t.touches.length!==2||e._animatingZoom||this._zooming)){var n=e.mouseEventToContainerPoint(t.touches[0]),s=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),e.options.touchZoom!=="center"&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(s)._divideBy(2))),this._startDist=n.distanceTo(s),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),H(document,"touchmove",this._onTouchMove,this),H(document,"touchend touchcancel",this._onTouchEnd,this),mt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),s=e.mouseEventToContainerPoint(t.touches[1]),l=n.distanceTo(s)/this._startDist;if(this._zoom=e.getScaleZoom(l,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&l<1||this._zoom>e.getMaxZoom()&&l>1)&&(this._zoom=e._limitZoom(this._zoom)),e.options.touchZoom==="center"){if(this._center=this._startLatLng,l===1)return}else{var f=n._add(s)._divideBy(2)._subtract(this._centerPoint);if(l===1&&f.x===0&&f.y===0)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(f),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),V(this._animRequest);var _=h(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=O(_,this,!0),mt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,V(this._animRequest),rt(document,"touchmove",this._onTouchMove,this),rt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});q.addInitHook("addHandler","touchZoom",Wr),q.BoxZoom=Rr,q.DoubleClickZoom=Nr,q.Drag=Vr,q.Keyboard=jr,q.ScrollWheelZoom=Hr,q.TapHold=Ur,q.TouchZoom=Wr,r.Bounds=K,r.Browser=R,r.CRS=xt,r.Canvas=Or,r.Circle=_n,r.CircleMarker=si,r.Class=tt,r.Control=Ct,r.DivIcon=Br,r.DivOverlay=Zt,r.DomEvent=Ms,r.DomUtil=Ts,r.Draggable=Yt,r.Evented=ft,r.FeatureGroup=Nt,r.GeoJSON=jt,r.GridLayer=Ae,r.Handler=Dt,r.Icon=ue,r.ImageOverlay=ci,r.LatLng=J,r.LatLngBounds=dt,r.Layer=Et,r.LayerGroup=le,r.LineUtil=Vs,r.Map=q,r.Marker=oi,r.Mixin=Os,r.Path=Xt,r.Point=N,r.PolyUtil=Ds,r.Polygon=ce,r.Polyline=Vt,r.Popup=fi,r.PosAnimation=_r,r.Projection=js,r.Rectangle=Fr,r.Renderer=Ht,r.SVG=Oe,r.SVGOverlay=Er,r.TileLayer=de,r.Tooltip=di,r.Transformation=be,r.Util=$,r.VideoOverlay=Cr,r.bind=h,r.bounds=et,r.canvas=Dr,r.circle=Gs,r.circleMarker=$s,r.control=Ce,r.divIcon=oa,r.extend=o,r.featureGroup=Ys,r.geoJSON=Sr,r.geoJson=Qs,r.gridLayer=sa,r.icon=Xs,r.imageOverlay=ta,r.latLng=U,r.latLngBounds=nt,r.layerGroup=Ws,r.map=Ss,r.marker=qs,r.point=F,r.polygon=Js,r.polyline=Ks,r.popup=na,r.rectangle=la,r.setOptions=T,r.stamp=c,r.svg=Zr,r.svgOverlay=ia,r.tileLayer=Ar,r.tooltip=ra,r.transformation=Wt,r.version=i,r.videoOverlay=ea;var ca=window.L;r.noConflict=function(){return window.L=ca,this},window.L=r})});var Wo=Gr((On,Dn)=>{(function(r,i){typeof On=="object"&&typeof Dn<"u"?Dn.exports=i():typeof define=="function"&&define.amd?define(i):(r=r||self).RBush=i()})(On,function(){"use strict";function r(g,y,b,C,z){(function S(A,B,D,O,V){for(;O>D;){if(O-D>600){var $=O-D+1,tt=B-D+1,Rt=Math.log($),ot=.5*Math.exp(2*Rt/3),ft=.5*Math.sqrt(Rt*ot*($-ot)/$)*(tt-$/2<0?-1:1),N=Math.max(D,Math.floor(B-tt*ot/$+ft)),Gt=Math.min(O,Math.floor(B+($-tt)*ot/$+ft));S(A,B,N,Gt,V)}var F=A[B],K=D,et=O;for(i(A,D,B),V(A[O],F)>0&&i(A,D,O);K<et;){for(i(A,K,et),K++,et--;V(A[K],F)<0;)K++;for(;V(A[et],F)>0;)et--}V(A[D],F)===0?i(A,D,et):i(A,++et,O),et<=B&&(D=et+1),B<=et&&(O=et-1)}})(g,y,b||0,C||g.length-1,z||o)}function i(g,y,b){var C=g[y];g[y]=g[b],g[b]=C}function o(g,y){return g<y?-1:g>y?1:0}var a=function(g){g===void 0&&(g=9),this._maxEntries=Math.max(4,g),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function h(g,y,b){if(!b)return y.indexOf(g);for(var C=0;C<y.length;C++)if(b(g,y[C]))return C;return-1}function u(g,y){c(g,0,g.children.length,y,g)}function c(g,y,b,C,z){z||(z=E(null)),z.minX=1/0,z.minY=1/0,z.maxX=-1/0,z.maxY=-1/0;for(var S=y;S<b;S++){var A=g.children[S];d(z,g.leaf?C(A):A)}return z}function d(g,y){return g.minX=Math.min(g.minX,y.minX),g.minY=Math.min(g.minY,y.minY),g.maxX=Math.max(g.maxX,y.maxX),g.maxY=Math.max(g.maxY,y.maxY),g}function m(g,y){return g.minX-y.minX}function p(g,y){return g.minY-y.minY}function v(g){return(g.maxX-g.minX)*(g.maxY-g.minY)}function x(g){return g.maxX-g.minX+(g.maxY-g.minY)}function k(g,y){return g.minX<=y.minX&&g.minY<=y.minY&&y.maxX<=g.maxX&&y.maxY<=g.maxY}function T(g,y){return y.minX<=g.maxX&&y.minY<=g.maxY&&y.maxX>=g.minX&&y.maxY>=g.minY}function E(g){return{children:g,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Z(g,y,b,C,z){for(var S=[y,b];S.length;)if(!((b=S.pop())-(y=S.pop())<=C)){var A=y+Math.ceil((b-y)/C/2)*C;r(g,A,y,b,z),S.push(y,A,A,b)}}return a.prototype.all=function(){return this._all(this.data,[])},a.prototype.search=function(g){var y=this.data,b=[];if(!T(g,y))return b;for(var C=this.toBBox,z=[];y;){for(var S=0;S<y.children.length;S++){var A=y.children[S],B=y.leaf?C(A):A;T(g,B)&&(y.leaf?b.push(A):k(g,B)?this._all(A,b):z.push(A))}y=z.pop()}return b},a.prototype.collides=function(g){var y=this.data;if(!T(g,y))return!1;for(var b=[];y;){for(var C=0;C<y.children.length;C++){var z=y.children[C],S=y.leaf?this.toBBox(z):z;if(T(g,S)){if(y.leaf||k(g,S))return!0;b.push(z)}}y=b.pop()}return!1},a.prototype.load=function(g){if(!g||!g.length)return this;if(g.length<this._minEntries){for(var y=0;y<g.length;y++)this.insert(g[y]);return this}var b=this._build(g.slice(),0,g.length-1,0);if(this.data.children.length)if(this.data.height===b.height)this._splitRoot(this.data,b);else{if(this.data.height<b.height){var C=this.data;this.data=b,b=C}this._insert(b,this.data.height-b.height-1,!0)}else this.data=b;return this},a.prototype.insert=function(g){return g&&this._insert(g,this.data.height-1),this},a.prototype.clear=function(){return this.data=E([]),this},a.prototype.remove=function(g,y){if(!g)return this;for(var b,C,z,S=this.data,A=this.toBBox(g),B=[],D=[];S||B.length;){if(S||(S=B.pop(),C=B[B.length-1],b=D.pop(),z=!0),S.leaf){var O=h(g,S.children,y);if(O!==-1)return S.children.splice(O,1),B.push(S),this._condense(B),this}z||S.leaf||!k(S,A)?C?(b++,S=C.children[b],z=!1):S=null:(B.push(S),D.push(b),b=0,C=S,S=S.children[0])}return this},a.prototype.toBBox=function(g){return g},a.prototype.compareMinX=function(g,y){return g.minX-y.minX},a.prototype.compareMinY=function(g,y){return g.minY-y.minY},a.prototype.toJSON=function(){return this.data},a.prototype.fromJSON=function(g){return this.data=g,this},a.prototype._all=function(g,y){for(var b=[];g;)g.leaf?y.push.apply(y,g.children):b.push.apply(b,g.children),g=b.pop();return y},a.prototype._build=function(g,y,b,C){var z,S=b-y+1,A=this._maxEntries;if(S<=A)return u(z=E(g.slice(y,b+1)),this.toBBox),z;C||(C=Math.ceil(Math.log(S)/Math.log(A)),A=Math.ceil(S/Math.pow(A,C-1))),(z=E([])).leaf=!1,z.height=C;var B=Math.ceil(S/A),D=B*Math.ceil(Math.sqrt(A));Z(g,y,b,D,this.compareMinX);for(var O=y;O<=b;O+=D){var V=Math.min(O+D-1,b);Z(g,O,V,B,this.compareMinY);for(var $=O;$<=V;$+=B){var tt=Math.min($+B-1,V);z.children.push(this._build(g,$,tt,C-1))}}return u(z,this.toBBox),z},a.prototype._chooseSubtree=function(g,y,b,C){for(;C.push(y),!y.leaf&&C.length-1!==b;){for(var z=1/0,S=1/0,A=void 0,B=0;B<y.children.length;B++){var D=y.children[B],O=v(D),V=($=g,tt=D,(Math.max(tt.maxX,$.maxX)-Math.min(tt.minX,$.minX))*(Math.max(tt.maxY,$.maxY)-Math.min(tt.minY,$.minY))-O);V<S?(S=V,z=O<z?O:z,A=D):V===S&&O<z&&(z=O,A=D)}y=A||y.children[0]}var $,tt;return y},a.prototype._insert=function(g,y,b){var C=b?g:this.toBBox(g),z=[],S=this._chooseSubtree(C,this.data,y,z);for(S.children.push(g),d(S,C);y>=0&&z[y].children.length>this._maxEntries;)this._split(z,y),y--;this._adjustParentBBoxes(C,z,y)},a.prototype._split=function(g,y){var b=g[y],C=b.children.length,z=this._minEntries;this._chooseSplitAxis(b,z,C);var S=this._chooseSplitIndex(b,z,C),A=E(b.children.splice(S,b.children.length-S));A.height=b.height,A.leaf=b.leaf,u(b,this.toBBox),u(A,this.toBBox),y?g[y-1].children.push(A):this._splitRoot(b,A)},a.prototype._splitRoot=function(g,y){this.data=E([g,y]),this.data.height=g.height+1,this.data.leaf=!1,u(this.data,this.toBBox)},a.prototype._chooseSplitIndex=function(g,y,b){for(var C,z,S,A,B,D,O,V=1/0,$=1/0,tt=y;tt<=b-y;tt++){var Rt=c(g,0,tt,this.toBBox),ot=c(g,tt,b,this.toBBox),ft=(z=Rt,S=ot,A=void 0,B=void 0,D=void 0,O=void 0,A=Math.max(z.minX,S.minX),B=Math.max(z.minY,S.minY),D=Math.min(z.maxX,S.maxX),O=Math.min(z.maxY,S.maxY),Math.max(0,D-A)*Math.max(0,O-B)),N=v(Rt)+v(ot);ft<V?(V=ft,C=tt,$=N<$?N:$):ft===V&&N<$&&($=N,C=tt)}return C||b-y},a.prototype._chooseSplitAxis=function(g,y,b){var C=g.leaf?this.compareMinX:m,z=g.leaf?this.compareMinY:p;this._allDistMargin(g,y,b,C)<this._allDistMargin(g,y,b,z)&&g.children.sort(C)},a.prototype._allDistMargin=function(g,y,b,C){g.children.sort(C);for(var z=this.toBBox,S=c(g,0,y,z),A=c(g,b-y,b,z),B=x(S)+x(A),D=y;D<b-y;D++){var O=g.children[D];d(S,g.leaf?z(O):O),B+=x(S)}for(var V=b-y-1;V>=y;V--){var $=g.children[V];d(A,g.leaf?z($):$),B+=x(A)}return B},a.prototype._adjustParentBBoxes=function(g,y,b){for(var C=b;C>=0;C--)d(y[C],g)},a.prototype._condense=function(g){for(var y=g.length-1,b=void 0;y>=0;y--)g[y].children.length===0?y>0?(b=g[y-1].children).splice(b.indexOf(g[y]),1):this.clear():u(g[y],this.toBBox)},a})});var Jr=window.name=="neos-content-main",Qr=document,to=Qr.documentElement,eo=window.matchMedia("(prefers-color-scheme: dark)");function io(r){return[...r.querySelectorAll(".carbon-geomap-coordinate")].map(i=>{let o=i.dataset,a=JSON.parse(o?.coordinate||null);return a?{element:i,html:i.outerHTML,popup:!!i.innerHTML,lat:a.lat,lng:a.lng,pinColor:o?.pinColor||"red"}:null}).filter(i=>i!==null)}function no(r){return{html:`<svg version="1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 149 178"><path fill="${r}" stroke="#FFF" stroke-width="6" stroke-miterlimit="10" d="M126 23l-6-6A69 69 0 0 0 74 1a69 69 0 0 0-51 22A70 70 0 0 0 1 74c0 21 7 38 22 52l43 47c6 6 11 6 16 0l48-51c12-13 18-29 18-48 0-20-8-37-22-51z"/><circle fill="${r}" cx="74" cy="75" r="61"/><circle fill="#FFF" cx="74" cy="75" r="30"/></svg>`,iconAnchor:[12,32],iconSize:[25,30],popupAnchor:[0,-28]}}function ro(r){return r.querySelector(".carbon-geomap__canvas")}function oo(r,i){[...Qr.querySelectorAll(`.carbon-geomap.jonnitto-maps--${r.toLowerCase()}`)].forEach(i)}function De(r){if(typeof r=="string")return r;if(!vi(r))return r?.light||r?.dark;let i=gi(r);return so(i)?r.dark:r.light}function yn(r,i){return r?r.replaceAll("{{STYLE}}",De(i)):De(i)}function pi(r,i,o=!0){if(!(!o||typeof r!="function")){if(i){new MutationObserver(h=>{h.forEach(function(u){u.type==="attributes"&&u.attributeName==="class"&&r()})}).observe(to,{attributes:!0});return}eo.addEventListener("change",r)}}function so(r){return!!(!r&&eo.matches||r&&to.classList.contains("dark"))}function gi(r){return r?.basedOn==="class"}function vi(r){return!!(typeof r=="object"&&r?.light&&r?.dark)}function ao(r){if(!vi(r))return;let i=()=>{let a=so(o)?r.dark:r.light;[...document.querySelectorAll(".jonnitto-maps .carbon-geomap__canvas")].forEach(h=>{h.dataset.effect=a})},o=gi(r);pi(i,o),i()}async function yi(){return await fetch("/maps-settings.json").then(r=>r.json())}function ho(r){return Object.fromEntries(Object.entries(r).filter(([i,o])=>o!=null))}function lo(r){r(),window.addEventListener("jonnitto-maps:init",r,!0)}var ie=Kr(co(),1),Ta=[],fo=[];function za({element:r,service:i,library:o,layer:a,styleURL:h}){let u=ro(r),c=[],d=io(r),m=d.length,p=JSON.parse(r.dataset?.center||null),v=i?.options||{},x=ho(o.options?.mapOptions||{}),k=parseInt(r.dataset?.zoom)||x.zoom||14;x.center=p?[p.lat,p.lng]:[0,0],x.zoom=k;let T=ie.default.map(u,x);if(ie.default.control.scale({imperial:!1}).addTo(T),a)a.addTo(T);else{let E={detectRetina:!0,maxZoom:v?.maxZoom||20};v?.attribution&&(E.attribution=v.attribution),v?.subdomains&&(E.subdomains=v.subdomains),fo.push(ie.default.tileLayer(h,E).addTo(T))}d.forEach(E=>{let Z=ie.default.divIcon({...no(E.pinColor),className:"leaflet-data-marker"}),g=ie.default.marker([E.lat,E.lng],{icon:Z}).addTo(T);if(c.push(g),E.html){let y=g.bindPopup(E.html,{maxWidth:500})}Jr&&g.addEventListener("click",()=>{["mousedown","mouseup"].forEach(y=>E.element.dispatchEvent(new Event(y,{bubbles:!0})))})}),m>1&&(T.fitBounds(new ie.default.featureGroup(c).getBounds()),setTimeout(()=>{T.getZoom()>k&&T.setZoom(k)},200)),document.dispatchEvent(new CustomEvent("initializedJonnittoMaps",{detail:{element:r,service:i,library:o,layer:a,map:T,markers:c}})),Ta.push(T)}async function _o({layerFunction:r=null,layerOptions:i=null,options:o=null,setLayerStyle:a=null}={}){let{service:h,library:u,effect:c}=o??await yi(),{style:d,styleTemplate:m}=h.options,p=vi(d),v=p?gi(d):!1,x=m?yn(m,d):d;lo(()=>{ao(c);let k=null;r?(k=r(i),a&&(a(k,De(d)),pi(()=>{a(k,De(d))},v,p))):pi(()=>{let T=yn(m,d);fo.forEach(E=>E.setUrl(T))},v,p),oo(h.name,T=>{za({element:T,service:h,library:u,layer:k,styleURL:x})})})}function Y(r,i){this.x=r,this.y=i}Y.prototype={clone(){return new Y(this.x,this.y)},add(r){return this.clone()._add(r)},sub(r){return this.clone()._sub(r)},multByPoint(r){return this.clone()._multByPoint(r)},divByPoint(r){return this.clone()._divByPoint(r)},mult(r){return this.clone()._mult(r)},div(r){return this.clone()._div(r)},rotate(r){return this.clone()._rotate(r)},rotateAround(r,i){return this.clone()._rotateAround(r,i)},matMult(r){return this.clone()._matMult(r)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(r){return this.x===r.x&&this.y===r.y},dist(r){return Math.sqrt(this.distSqr(r))},distSqr(r){let i=r.x-this.x,o=r.y-this.y;return i*i+o*o},angle(){return Math.atan2(this.y,this.x)},angleTo(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith(r){return this.angleWithSep(r.x,r.y)},angleWithSep(r,i){return Math.atan2(this.x*i-this.y*r,this.x*r+this.y*i)},_matMult(r){let i=r[0]*this.x+r[1]*this.y,o=r[2]*this.x+r[3]*this.y;return this.x=i,this.y=o,this},_add(r){return this.x+=r.x,this.y+=r.y,this},_sub(r){return this.x-=r.x,this.y-=r.y,this},_mult(r){return this.x*=r,this.y*=r,this},_div(r){return this.x/=r,this.y/=r,this},_multByPoint(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint(r){return this.x/=r.x,this.y/=r.y,this},_unit(){return this._div(this.mag()),this},_perp(){let r=this.y;return this.y=this.x,this.x=-r,this},_rotate(r){let i=Math.cos(r),o=Math.sin(r),a=i*this.x-o*this.y,h=o*this.x+i*this.y;return this.x=a,this.y=h,this},_rotateAround(r,i){let o=Math.cos(r),a=Math.sin(r),h=i.x+o*(this.x-i.x)-a*(this.y-i.y),u=i.y+a*(this.x-i.x)+o*(this.y-i.y);return this.x=h,this.y=u,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:Y};Y.convert=function(r){if(r instanceof Y)return r;if(Array.isArray(r))return new Y(+r[0],+r[1]);if(r.x!==void 0&&r.y!==void 0)return new Y(+r.x,+r.y);throw new Error("Expected [x, y] or {x, y} point format")};function me(r,i,o){return Math.min(Math.max(r,o),i)}var wn=class extends Error{constructor(i){super(`Failed to parse color: "${i}"`)}},Ze=wn;function mo(r){if(typeof r!="string")throw new Ze(r);if(r.trim().toLowerCase()==="transparent")return[0,0,0,0];let i=r.trim();i=Oa.test(r)?Ca(r):r;let o=Ea.exec(i);if(o){let c=Array.from(o).slice(1);return[...c.slice(0,3).map(d=>parseInt(Fe(d,2),16)),parseInt(Fe(c[3]||"f",2),16)/255]}let a=Ba.exec(i);if(a){let c=Array.from(a).slice(1);return[...c.slice(0,3).map(d=>parseInt(d,16)),parseInt(c[3]||"ff",16)/255]}let h=Aa.exec(i);if(h){let c=Array.from(h).slice(1);return[...c.slice(0,3).map(d=>parseInt(d,10)),parseFloat(c[3]||"1")]}let u=Ia.exec(i);if(u){let[c,d,m,p]=Array.from(u).slice(1).map(parseFloat);if(me(0,100,d)!==d)throw new Ze(r);if(me(0,100,m)!==m)throw new Ze(r);return[...Da(c,d,m),Number.isNaN(p)?1:p]}throw new Ze(r)}function Ma(r){let i=5381,o=r.length;for(;o;)i=i*33^r.charCodeAt(--o);return(i>>>0)%2341}var po=r=>parseInt(r.replace(/_/g,""),36),Sa="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((r,i)=>{let o=po(i.substring(0,3)),a=po(i.substring(3)).toString(16),h="";for(let u=0;u<6-a.length;u++)h+="0";return r[o]=`${h}${a}`,r},{});function Ca(r){let i=r.toLowerCase().trim(),o=Sa[Ma(i)];if(!o)throw new Ze(r);return`#${o}`}var Fe=(r,i)=>Array.from(Array(i)).map(()=>r).join(""),Ea=new RegExp(`^#${Fe("([a-f0-9])",3)}([a-f0-9])?$`,"i"),Ba=new RegExp(`^#${Fe("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),Aa=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${Fe(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),Ia=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,Oa=/^[a-z]+$/i,go=r=>Math.round(r*255),Da=(r,i,o)=>{let a=o/100;if(i===0)return[a,a,a].map(go);let h=(r%360+360)%360/60,u=(1-Math.abs(2*a-1))*(i/100),c=u*(1-Math.abs(h%2-1)),d=0,m=0,p=0;h>=0&&h<1?(d=u,m=c):h>=1&&h<2?(d=c,m=u):h>=2&&h<3?(m=u,p=c):h>=3&&h<4?(m=c,p=u):h>=4&&h<5?(d=c,p=u):h>=5&&h<6&&(d=u,p=c);let v=a-u/2,x=d+v,k=m+v,T=p+v;return[x,k,T].map(go)};function Za(r,i,o,a){return`rgba(${me(0,255,r).toFixed()}, ${me(0,255,i).toFixed()}, ${me(0,255,o).toFixed()}, ${parseFloat(me(0,1,a).toFixed(3))})`}function xi(r,i,o){let a=(S,A)=>A===3?S:S/255,[h,u,c,d]=mo(r).map(a),[m,p,v,x]=mo(i).map(a),k=x-d,T=o*2-1,Z=((T*k===-1?T:T+k/(1+T*k))+1)/2,g=1-Z,y=(h*g+m*Z)*255,b=(u*g+p*Z)*255,C=(c*g+v*Z)*255,z=x*o+d*(1-o);return Za(y,b,C,z)}var yt=class{constructor(i,o){this.str=i??o,this.perFeature=typeof this.str=="function"&&this.str.length===2}get(i,o){return typeof this.str=="function"?this.str(i,o):this.str}},at=class{constructor(i,o=1){this.value=i??o,this.perFeature=typeof this.value=="function"&&this.value.length===2}get(i,o){return typeof this.value=="function"?this.value(i,o):this.value}},Re=class{constructor(i){var o;this.labelProps=(o=i?.labelProps)!==null&&o!==void 0?o:["name"],this.textTransform=i?.textTransform}get(i,o){let a,h;typeof this.labelProps=="function"?h=this.labelProps(i,o):h=this.labelProps;for(let c of h)if(Object.prototype.hasOwnProperty.call(o.props,c)&&typeof o.props[c]=="string"){a=o.props[c];break}let u;return typeof this.textTransform=="function"?u=this.textTransform(i,o):u=this.textTransform,a&&u==="uppercase"?a=a.toUpperCase():a&&u==="lowercase"?a=a.toLowerCase():a&&u==="capitalize"&&(a=a.toLowerCase().split(" ").map(m=>m[0].toUpperCase()+m.slice(1)).join(" ")),a}},Ne=class{constructor(i){var o,a;i?.font?this.font=i.font:(this.family=(o=i?.fontFamily)!==null&&o!==void 0?o:"sans-serif",this.size=(a=i?.fontSize)!==null&&a!==void 0?a:12,this.weight=i?.fontWeight,this.style=i?.fontStyle)}get(i,o){if(this.font)return typeof this.font=="function"?this.font(i,o):this.font;let a="";this.style&&(typeof this.style=="function"?a=`${this.style(i,o)} `:a=`${this.style} `);let h="";this.weight&&(typeof this.weight=="function"?h=`${this.weight(i,o)} `:h=`${this.weight} `);let u;typeof this.size=="function"?u=this.size(i,o):u=this.size;let c;return typeof this.family=="function"?c=this.family(i,o):c=this.family,`${a}${h}${u}px ${c}`}},bi=class{constructor(i,o=[]){this.value=i??o,this.perFeature=typeof this.value=="function"&&this.value.length===2}get(i,o){return typeof this.value=="function"?this.value(i,o):this.value}};var Fa=(r,i,o)=>{let a=[],h,u,c,d=0,m=0,p=0,v=0,x=0,k=0,T=0,E=0,Z=0,g=0,y=0,b=0;if(r.length<2)return[];if(r.length===2)return p=Math.sqrt(Math.pow(r[1].x-r[0].x,2)+Math.pow(r[1].y-r[0].y,2)),[{length:p,beginIndex:0,beginDistance:0,endIndex:2,endDistance:p}];for(v=Math.sqrt(Math.pow(r[1].x-r[0].x,2)+Math.pow(r[1].y-r[0].y,2)),d=1,m=r.length-1;d<m;d++)h=r[d-1],u=r[d],c=r[d+1],k=u.x-h.x,T=u.y-h.y,E=c.x-u.x,Z=c.y-u.y,x=Math.sqrt(E*E+Z*Z),p+=v,g=Math.acos((k*E+T*Z)/(v*x)),(g>i||p-b>o)&&(a.push({length:p-b,beginDistance:b,beginIndex:y,endIndex:d+1,endDistance:p}),y=d,b=p),v=x;return d-y>0&&a.push({length:p-b+x,beginIndex:y,beginDistance:b,endIndex:d+1,endDistance:p+x}),a};function vo(r,i,o,a){let h=[];for(let u of r){let c=Fa(u,Math.PI/45,i);for(let d of c)if(d.length>=i+a){let m=new Y(u[d.beginIndex].x,u[d.beginIndex].y),p=u[d.endIndex-1],v=new Y((p.x-m.x)/d.length,(p.y-m.y)/d.length);for(let x=a;x<d.length-i;x+=o)h.push({start:m.add(v.mult(x)),end:m.add(v.mult(x+i))})}}return h}function yo(r,i,o,a){let h=i.x-r.x,u=i.y-r.y,c=Math.sqrt(Math.pow(i.x-r.x,2)+Math.pow(i.y-r.y,2)),d=[];for(let m=0;m<o+a;m+=2*a){let p=m*1/c;d.push({x:r.x+p*h,y:r.y+p*u})}return d}function xn(r,i){if(r.length<=i)return[r];let o=i-1,a=r.lastIndexOf(" ",o),h=r.indexOf(" ",o);if(a===-1&&h===-1)return[r];let u,c;return h===-1||a>=0&&o-a<h-o?(u=r.substring(0,a),c=r.substring(a+1,r.length)):(u=r.substring(0,h),c=r.substring(h+1,r.length)),[u,...xn(c,i)]}var Ra="\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DB5\u4E00-\u9FEA\uF900-\uFA6D\uFA70-\uFAD9\u2000",Pl=new RegExp(`^[${Ra}]+$`);var Li=class{constructor(i,o,a,h,u){this.properties={},this.extent=a,this.type=0,this.id=void 0,this._pbf=i,this._geometry=-1,this._keys=h,this._values=u,i.readFields(Na,this,o)}loadGeometry(){let i=this._pbf;i.pos=this._geometry;let o=i.readVarint()+i.pos,a=[],h,u=1,c=0,d=0,m=0;for(;i.pos<o;){if(c<=0){let p=i.readVarint();u=p&7,c=p>>3}if(c--,u===1||u===2)d+=i.readSVarint(),m+=i.readSVarint(),u===1&&(h&&a.push(h),h=[]),h&&h.push(new Y(d,m));else if(u===7)h&&h.push(h[0].clone());else throw new Error(`unknown command ${u}`)}return h&&a.push(h),a}bbox(){let i=this._pbf;i.pos=this._geometry;let o=i.readVarint()+i.pos,a=1,h=0,u=0,c=0,d=1/0,m=-1/0,p=1/0,v=-1/0;for(;i.pos<o;){if(h<=0){let x=i.readVarint();a=x&7,h=x>>3}if(h--,a===1||a===2)u+=i.readSVarint(),c+=i.readSVarint(),u<d&&(d=u),u>m&&(m=u),c<p&&(p=c),c>v&&(v=c);else if(a!==7)throw new Error(`unknown command ${a}`)}return[d,p,m,v]}toGeoJSON(i,o,a){let h=this.extent*Math.pow(2,a),u=this.extent*i,c=this.extent*o,d=this.loadGeometry();function m(k){return[(k.x+u)*360/h-180,360/Math.PI*Math.atan(Math.exp((1-(k.y+c)*2/h)*Math.PI))-90]}function p(k){return k.map(m)}let v;if(this.type===1){let k=[];for(let E of d)k.push(E[0]);let T=p(k);v=k.length===1?{type:"Point",coordinates:T[0]}:{type:"MultiPoint",coordinates:T}}else if(this.type===2){let k=d.map(p);v=k.length===1?{type:"LineString",coordinates:k[0]}:{type:"MultiLineString",coordinates:k}}else if(this.type===3){let k=ja(d),T=[];for(let E of k)T.push(E.map(p));v=T.length===1?{type:"Polygon",coordinates:T[0]}:{type:"MultiPolygon",coordinates:T}}else throw new Error("unknown feature type");let x={type:"Feature",geometry:v,properties:this.properties};return this.id!=null&&(x.id=this.id),x}};Li.types=["Unknown","Point","LineString","Polygon"];function Na(r,i,o){r===1?i.id=o.readVarint():r===2?Va(o,i):r===3?i.type=o.readVarint():r===4&&(i._geometry=o.pos)}function Va(r,i){let o=r.readVarint()+r.pos;for(;r.pos<o;){let a=i._keys[r.readVarint()],h=i._values[r.readVarint()];i.properties[a]=h}}function ja(r){let i=r.length;if(i<=1)return[r];let o=[],a,h;for(let u=0;u<i;u++){let c=Ha(r[u]);c!==0&&(h===void 0&&(h=c<0),h===c<0?(a&&o.push(a),a=[r[u]]):a&&a.push(r[u]))}return a&&o.push(a),o}function Ha(r){let i=0;for(let o=0,a=r.length,h=a-1,u,c;o<a;h=o++)u=r[o],c=r[h],i+=(c.x-u.x)*(u.y+c.y);return i}var bn=class{constructor(i,o){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(Ua,this,o),this.length=this._features.length}feature(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];let o=this._pbf.readVarint()+this._pbf.pos;return new Li(this._pbf,o,this.extent,this._keys,this._values)}};function Ua(r,i,o){r===15?i.version=o.readVarint():r===1?i.name=o.readString():r===5?i.extent=o.readVarint():r===2?i._features.push(o.pos):r===3?i._keys.push(o.readString()):r===4&&i._values.push(Wa(o))}function Wa(r){let i=null,o=r.readVarint()+r.pos;for(;r.pos<o;){let a=r.readVarint()>>3;i=a===1?r.readString():a===2?r.readFloat():a===3?r.readDouble():a===4?r.readVarint64():a===5?r.readVarint():a===6?r.readSVarint():a===7?r.readBoolean():null}return i}var Pi=class{constructor(i,o){this.layers=i.readFields(Ya,{},o)}};function Ya(r,i,o){if(r===3){let a=new bn(o,o.readVarint()+o.pos);a.length&&(i[a.name]=a)}}var wo=23283064365386963e-26,Xa=12,xo=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),Ln=0,ki=1,Ve=2,Ti=5,je=class{constructor(i=new Uint8Array(16)){this.buf=ArrayBuffer.isView(i)?i:new Uint8Array(i),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(i,o,a=this.length){for(;this.pos<a;){let h=this.readVarint(),u=h>>3,c=this.pos;this.type=h&7,i(u,o,this),this.pos===c&&this.skip(h)}return o}readMessage(i,o){return this.readFields(i,o,this.readVarint()+this.pos)}readFixed32(){let i=this.dataView.getUint32(this.pos,!0);return this.pos+=4,i}readSFixed32(){let i=this.dataView.getInt32(this.pos,!0);return this.pos+=4,i}readFixed64(){let i=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*4294967296;return this.pos+=8,i}readSFixed64(){let i=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*4294967296;return this.pos+=8,i}readFloat(){let i=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,i}readDouble(){let i=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,i}readVarint(i){let o=this.buf,a,h;return h=o[this.pos++],a=h&127,h<128||(h=o[this.pos++],a|=(h&127)<<7,h<128)||(h=o[this.pos++],a|=(h&127)<<14,h<128)||(h=o[this.pos++],a|=(h&127)<<21,h<128)?a:(h=o[this.pos],a|=(h&15)<<28,qa(a,i,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){let i=this.readVarint();return i%2===1?(i+1)/-2:i/2}readBoolean(){return!!this.readVarint()}readString(){let i=this.readVarint()+this.pos,o=this.pos;return this.pos=i,i-o>=Xa&&xo?xo.decode(this.buf.subarray(o,i)):ah(this.buf,o,i)}readBytes(){let i=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,i);return this.pos=i,o}readPackedVarint(i=[],o){let a=this.readPackedEnd();for(;this.pos<a;)i.push(this.readVarint(o));return i}readPackedSVarint(i=[]){let o=this.readPackedEnd();for(;this.pos<o;)i.push(this.readSVarint());return i}readPackedBoolean(i=[]){let o=this.readPackedEnd();for(;this.pos<o;)i.push(this.readBoolean());return i}readPackedFloat(i=[]){let o=this.readPackedEnd();for(;this.pos<o;)i.push(this.readFloat());return i}readPackedDouble(i=[]){let o=this.readPackedEnd();for(;this.pos<o;)i.push(this.readDouble());return i}readPackedFixed32(i=[]){let o=this.readPackedEnd();for(;this.pos<o;)i.push(this.readFixed32());return i}readPackedSFixed32(i=[]){let o=this.readPackedEnd();for(;this.pos<o;)i.push(this.readSFixed32());return i}readPackedFixed64(i=[]){let o=this.readPackedEnd();for(;this.pos<o;)i.push(this.readFixed64());return i}readPackedSFixed64(i=[]){let o=this.readPackedEnd();for(;this.pos<o;)i.push(this.readSFixed64());return i}readPackedEnd(){return this.type===Ve?this.readVarint()+this.pos:this.pos+1}skip(i){let o=i&7;if(o===Ln)for(;this.buf[this.pos++]>127;);else if(o===Ve)this.pos=this.readVarint()+this.pos;else if(o===Ti)this.pos+=4;else if(o===ki)this.pos+=8;else throw new Error(`Unimplemented type: ${o}`)}writeTag(i,o){this.writeVarint(i<<3|o)}realloc(i){let o=this.length||16;for(;o<this.pos+i;)o*=2;if(o!==this.length){let a=new Uint8Array(o);a.set(this.buf),this.buf=a,this.dataView=new DataView(a.buffer),this.length=o}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(i){this.realloc(4),this.dataView.setInt32(this.pos,i,!0),this.pos+=4}writeSFixed32(i){this.realloc(4),this.dataView.setInt32(this.pos,i,!0),this.pos+=4}writeFixed64(i){this.realloc(8),this.dataView.setInt32(this.pos,i&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(i*wo),!0),this.pos+=8}writeSFixed64(i){this.realloc(8),this.dataView.setInt32(this.pos,i&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(i*wo),!0),this.pos+=8}writeVarint(i){if(i=+i||0,i>268435455||i<0){$a(i,this);return}this.realloc(4),this.buf[this.pos++]=i&127|(i>127?128:0),!(i<=127)&&(this.buf[this.pos++]=(i>>>=7)&127|(i>127?128:0),!(i<=127)&&(this.buf[this.pos++]=(i>>>=7)&127|(i>127?128:0),!(i<=127)&&(this.buf[this.pos++]=i>>>7&127)))}writeSVarint(i){this.writeVarint(i<0?-i*2-1:i*2)}writeBoolean(i){this.writeVarint(+i)}writeString(i){i=String(i),this.realloc(i.length*4),this.pos++;let o=this.pos;this.pos=hh(this.buf,i,this.pos);let a=this.pos-o;a>=128&&bo(o,a,this),this.pos=o-1,this.writeVarint(a),this.pos+=a}writeFloat(i){this.realloc(4),this.dataView.setFloat32(this.pos,i,!0),this.pos+=4}writeDouble(i){this.realloc(8),this.dataView.setFloat64(this.pos,i,!0),this.pos+=8}writeBytes(i){let o=i.length;this.writeVarint(o),this.realloc(o);for(let a=0;a<o;a++)this.buf[this.pos++]=i[a]}writeRawMessage(i,o){this.pos++;let a=this.pos;i(o,this);let h=this.pos-a;h>=128&&bo(a,h,this),this.pos=a-1,this.writeVarint(h),this.pos+=h}writeMessage(i,o,a){this.writeTag(i,Ve),this.writeRawMessage(o,a)}writePackedVarint(i,o){o.length&&this.writeMessage(i,Ja,o)}writePackedSVarint(i,o){o.length&&this.writeMessage(i,Qa,o)}writePackedBoolean(i,o){o.length&&this.writeMessage(i,ih,o)}writePackedFloat(i,o){o.length&&this.writeMessage(i,th,o)}writePackedDouble(i,o){o.length&&this.writeMessage(i,eh,o)}writePackedFixed32(i,o){o.length&&this.writeMessage(i,nh,o)}writePackedSFixed32(i,o){o.length&&this.writeMessage(i,rh,o)}writePackedFixed64(i,o){o.length&&this.writeMessage(i,oh,o)}writePackedSFixed64(i,o){o.length&&this.writeMessage(i,sh,o)}writeBytesField(i,o){this.writeTag(i,Ve),this.writeBytes(o)}writeFixed32Field(i,o){this.writeTag(i,Ti),this.writeFixed32(o)}writeSFixed32Field(i,o){this.writeTag(i,Ti),this.writeSFixed32(o)}writeFixed64Field(i,o){this.writeTag(i,ki),this.writeFixed64(o)}writeSFixed64Field(i,o){this.writeTag(i,ki),this.writeSFixed64(o)}writeVarintField(i,o){this.writeTag(i,Ln),this.writeVarint(o)}writeSVarintField(i,o){this.writeTag(i,Ln),this.writeSVarint(o)}writeStringField(i,o){this.writeTag(i,Ve),this.writeString(o)}writeFloatField(i,o){this.writeTag(i,Ti),this.writeFloat(o)}writeDoubleField(i,o){this.writeTag(i,ki),this.writeDouble(o)}writeBooleanField(i,o){this.writeVarintField(i,+o)}};function qa(r,i,o){let a=o.buf,h,u;if(u=a[o.pos++],h=(u&112)>>4,u<128||(u=a[o.pos++],h|=(u&127)<<3,u<128)||(u=a[o.pos++],h|=(u&127)<<10,u<128)||(u=a[o.pos++],h|=(u&127)<<17,u<128)||(u=a[o.pos++],h|=(u&127)<<24,u<128)||(u=a[o.pos++],h|=(u&1)<<31,u<128))return pe(r,h,i);throw new Error("Expected varint not more than 10 bytes")}function pe(r,i,o){return o?i*4294967296+(r>>>0):(i>>>0)*4294967296+(r>>>0)}function $a(r,i){let o,a;if(r>=0?(o=r%4294967296|0,a=r/4294967296|0):(o=~(-r%4294967296),a=~(-r/4294967296),o^4294967295?o=o+1|0:(o=0,a=a+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),Ga(o,a,i),Ka(a,i)}function Ga(r,i,o){o.buf[o.pos++]=r&127|128,r>>>=7,o.buf[o.pos++]=r&127|128,r>>>=7,o.buf[o.pos++]=r&127|128,r>>>=7,o.buf[o.pos++]=r&127|128,r>>>=7,o.buf[o.pos]=r&127}function Ka(r,i){let o=(r&7)<<4;i.buf[i.pos++]|=o|((r>>>=3)?128:0),r&&(i.buf[i.pos++]=r&127|((r>>>=7)?128:0),r&&(i.buf[i.pos++]=r&127|((r>>>=7)?128:0),r&&(i.buf[i.pos++]=r&127|((r>>>=7)?128:0),r&&(i.buf[i.pos++]=r&127|((r>>>=7)?128:0),r&&(i.buf[i.pos++]=r&127)))))}function bo(r,i,o){let a=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(Math.LN2*7));o.realloc(a);for(let h=o.pos-1;h>=r;h--)o.buf[h+a]=o.buf[h]}function Ja(r,i){for(let o=0;o<r.length;o++)i.writeVarint(r[o])}function Qa(r,i){for(let o=0;o<r.length;o++)i.writeSVarint(r[o])}function th(r,i){for(let o=0;o<r.length;o++)i.writeFloat(r[o])}function eh(r,i){for(let o=0;o<r.length;o++)i.writeDouble(r[o])}function ih(r,i){for(let o=0;o<r.length;o++)i.writeBoolean(r[o])}function nh(r,i){for(let o=0;o<r.length;o++)i.writeFixed32(r[o])}function rh(r,i){for(let o=0;o<r.length;o++)i.writeSFixed32(r[o])}function oh(r,i){for(let o=0;o<r.length;o++)i.writeFixed64(r[o])}function sh(r,i){for(let o=0;o<r.length;o++)i.writeSFixed64(r[o])}function ah(r,i,o){let a="",h=i;for(;h<o;){let u=r[h],c=null,d=u>239?4:u>223?3:u>191?2:1;if(h+d>o)break;let m,p,v;d===1?u<128&&(c=u):d===2?(m=r[h+1],(m&192)===128&&(c=(u&31)<<6|m&63,c<=127&&(c=null))):d===3?(m=r[h+1],p=r[h+2],(m&192)===128&&(p&192)===128&&(c=(u&15)<<12|(m&63)<<6|p&63,(c<=2047||c>=55296&&c<=57343)&&(c=null))):d===4&&(m=r[h+1],p=r[h+2],v=r[h+3],(m&192)===128&&(p&192)===128&&(v&192)===128&&(c=(u&15)<<18|(m&63)<<12|(p&63)<<6|v&63,(c<=65535||c>=1114112)&&(c=null))),c===null?(c=65533,d=1):c>65535&&(c-=65536,a+=String.fromCharCode(c>>>10&1023|55296),c=56320|c&1023),a+=String.fromCharCode(c),h+=d}return a}function hh(r,i,o){for(let a=0,h,u;a<i.length;a++){if(h=i.charCodeAt(a),h>55295&&h<57344)if(u)if(h<56320){r[o++]=239,r[o++]=191,r[o++]=189,u=h;continue}else h=u-55296<<10|h-56320|65536,u=null;else{h>56319||a+1===i.length?(r[o++]=239,r[o++]=191,r[o++]=189):u=h;continue}else u&&(r[o++]=239,r[o++]=191,r[o++]=189,u=null);h<128?r[o++]=h:(h<2048?r[o++]=h>>6|192:(h<65536?r[o++]=h>>12|224:(r[o++]=h>>18|240,r[o++]=h>>12&63|128),r[o++]=h>>6&63|128),r[o++]=h&63|128)}return o}var ye=Math.pow,pt=(r,i,o)=>new Promise((a,h)=>{var u=m=>{try{d(o.next(m))}catch(p){h(p)}},c=m=>{try{d(o.throw(m))}catch(p){h(p)}},d=m=>m.done?a(m.value):Promise.resolve(m.value).then(u,c);d((o=o.apply(r,i)).next())}),Lt=Uint8Array,ve=Uint16Array,lh=Int32Array,ko=new Lt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),To=new Lt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),uh=new Lt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),zo=function(r,i){for(var o=new ve(31),a=0;a<31;++a)o[a]=i+=1<<r[a-1];for(var h=new lh(o[30]),a=1;a<30;++a)for(var u=o[a];u<o[a+1];++u)h[u]=u-o[a]<<5|a;return{b:o,r:h}},Mo=zo(ko,2),So=Mo.b,ch=Mo.r;So[28]=258,ch[258]=28;var Co=zo(To,0),fh=Co.b,Sl=Co.r,Tn=new ve(32768);for(Q=0;Q<32768;++Q)Ut=(Q&43690)>>1|(Q&21845)<<1,Ut=(Ut&52428)>>2|(Ut&13107)<<2,Ut=(Ut&61680)>>4|(Ut&3855)<<4,Tn[Q]=((Ut&65280)>>8|(Ut&255)<<8)>>1;var Ut,Q,We=function(r,i,o){for(var a=r.length,h=0,u=new ve(i);h<a;++h)r[h]&&++u[r[h]-1];var c=new ve(i);for(h=1;h<i;++h)c[h]=c[h-1]+u[h-1]<<1;var d;if(o){d=new ve(1<<i);var m=15-i;for(h=0;h<a;++h)if(r[h])for(var p=h<<4|r[h],v=i-r[h],x=c[r[h]-1]++<<v,k=x|(1<<v)-1;x<=k;++x)d[Tn[x]>>m]=p}else for(d=new ve(a),h=0;h<a;++h)r[h]&&(d[h]=Tn[c[r[h]-1]++]>>15-r[h]);return d},Ye=new Lt(288);for(Q=0;Q<144;++Q)Ye[Q]=8;var Q;for(Q=144;Q<256;++Q)Ye[Q]=9;var Q;for(Q=256;Q<280;++Q)Ye[Q]=7;var Q;for(Q=280;Q<288;++Q)Ye[Q]=8;var Q,Eo=new Lt(32);for(Q=0;Q<32;++Q)Eo[Q]=5;var Q,dh=We(Ye,9,1),_h=We(Eo,5,1),Pn=function(r){for(var i=r[0],o=1;o<r.length;++o)r[o]>i&&(i=r[o]);return i},Bt=function(r,i,o){var a=i/8|0;return(r[a]|r[a+1]<<8)>>(i&7)&o},kn=function(r,i){var o=i/8|0;return(r[o]|r[o+1]<<8|r[o+2]<<16)>>(i&7)},mh=function(r){return(r+7)/8|0},ph=function(r,i,o){(i==null||i<0)&&(i=0),(o==null||o>r.length)&&(o=r.length);var a=new Lt(o-i);return a.set(r.subarray(i,o)),a},gh=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],bt=function(r,i,o){var a=new Error(i||gh[r]);if(a.code=r,Error.captureStackTrace&&Error.captureStackTrace(a,bt),!o)throw a;return a},Sn=function(r,i,o,a){var h=r.length,u=a?a.length:0;if(!h||i.f&&!i.l)return o||new Lt(0);var c=!o||i.i!=2,d=i.i;o||(o=new Lt(h*3));var m=function(Wt){var oe=o.length;if(Wt>oe){var Ge=new Lt(Math.max(oe*2,Wt));Ge.set(o),o=Ge}},p=i.f||0,v=i.p||0,x=i.b||0,k=i.l,T=i.d,E=i.m,Z=i.n,g=h*8;do{if(!k){p=Bt(r,v,1);var y=Bt(r,v+1,3);if(v+=3,y)if(y==1)k=dh,T=_h,E=9,Z=5;else if(y==2){var S=Bt(r,v,31)+257,A=Bt(r,v+10,15)+4,B=S+Bt(r,v+5,31)+1;v+=14;for(var D=new Lt(B),O=new Lt(19),V=0;V<A;++V)O[uh[V]]=Bt(r,v+V*3,7);v+=A*3;for(var $=Pn(O),tt=(1<<$)-1,Rt=We(O,$,1),V=0;V<B;){var ot=Rt[Bt(r,v,tt)];v+=ot&15;var b=ot>>4;if(b<16)D[V++]=b;else{var ft=0,N=0;for(b==16?(N=3+Bt(r,v,3),v+=2,ft=D[V-1]):b==17?(N=3+Bt(r,v,7),v+=3):b==18&&(N=11+Bt(r,v,127),v+=7);N--;)D[V++]=ft}}var Gt=D.subarray(0,S),F=D.subarray(S);E=Pn(Gt),Z=Pn(F),k=We(Gt,E,1),T=We(F,Z,1)}else bt(1);else{var b=mh(v)+4,C=r[b-4]|r[b-3]<<8,z=b+C;if(z>h){d&&bt(0);break}c&&m(x+C),o.set(r.subarray(b,z),x),i.b=x+=C,i.p=v=z*8,i.f=p;continue}if(v>g){d&&bt(0);break}}c&&m(x+131072);for(var K=(1<<E)-1,et=(1<<Z)-1,dt=v;;dt=v){var ft=k[kn(r,v)&K],nt=ft>>4;if(v+=ft&15,v>g){d&&bt(0);break}if(ft||bt(2),nt<256)o[x++]=nt;else if(nt==256){dt=v,k=null;break}else{var J=nt-254;if(nt>264){var V=nt-257,U=ko[V];J=Bt(r,v,(1<<U)-1)+So[V],v+=U}var xt=T[kn(r,v)&et],kt=xt>>4;xt||bt(3),v+=xt&15;var F=fh[kt];if(kt>3){var U=To[kt];F+=kn(r,v)&(1<<U)-1,v+=U}if(v>g){d&&bt(0);break}c&&m(x+131072);var ne=x+J;if(x<F){var re=u-F,be=Math.min(F,ne);for(re+x<0&&bt(3);x<be;++x)o[x]=a[re+x]}for(;x<ne;x+=4)o[x]=o[x-F],o[x+1]=o[x+1-F],o[x+2]=o[x+2-F],o[x+3]=o[x+3-F];x=ne}}i.l=k,i.p=dt,i.b=x,i.f=p,k&&(p=1,i.m=E,i.d=T,i.n=Z)}while(!p);return x==o.length?o:ph(o,0,x)},vh=new Lt(0),yh=function(r){(r[0]!=31||r[1]!=139||r[2]!=8)&&bt(6,"invalid gzip data");var i=r[3],o=10;i&4&&(o+=(r[10]|r[11]<<8)+2);for(var a=(i>>3&1)+(i>>4&1);a>0;a-=!r[o++]);return o+(i&2)},wh=function(r){var i=r.length;return(r[i-4]|r[i-3]<<8|r[i-2]<<16|r[i-1]<<24)>>>0},xh=function(r,i){return((r[0]&15)!=8||r[0]>>4>7||(r[0]<<8|r[1])%31)&&bt(6,"invalid zlib data"),(r[1]>>5&1)==+!i&&bt(6,"invalid zlib data: "+(r[1]&32?"need":"unexpected")+" dictionary"),(r[1]>>3&4)+2};function bh(r,i){return Sn(r,{i:2},i&&i.out,i&&i.dictionary)}function Lh(r,i){var o=yh(r);return o+8>r.length&&bt(6,"invalid gzip data"),Sn(r.subarray(o,-8),{i:2},i&&i.out||new Lt(wh(r)),i&&i.dictionary)}function Ph(r,i){return Sn(r.subarray(xh(r,i&&i.dictionary),-4),{i:2},i&&i.out,i&&i.dictionary)}function zn(r,i){return r[0]==31&&r[1]==139&&r[2]==8?Lh(r,i):(r[0]&15)!=8||r[0]>>4>7||(r[0]<<8|r[1])%31?bh(r,i):Ph(r,i)}var kh=typeof TextDecoder<"u"&&new TextDecoder,Th=0;try{kh.decode(vh,{stream:!0}),Th=1}catch{}var Bo=(r,i)=>r*ye(2,i),He=(r,i)=>Math.floor(r/ye(2,i)),zi=(r,i)=>Bo(r.getUint16(i+1,!0),8)+r.getUint8(i),Ao=(r,i)=>Bo(r.getUint32(i+2,!0),16)+r.getUint16(i,!0),zh=(r,i,o,a,h)=>{if(r!==a.getUint8(h))return r-a.getUint8(h);let u=zi(a,h+1);if(i!==u)return i-u;let c=zi(a,h+4);return o!==c?o-c:0},Mh=(r,i,o,a)=>{let h=Io(r,i|128,o,a);return h?{z:i,x:o,y:a,offset:h[0],length:h[1],isDir:!0}:null},Lo=(r,i,o,a)=>{let h=Io(r,i,o,a);return h?{z:i,x:o,y:a,offset:h[0],length:h[1],isDir:!1}:null},Io=(r,i,o,a)=>{let h=0,u=r.byteLength/17-1;for(;h<=u;){let c=u+h>>1,d=zh(i,o,a,r,c*17);if(d>0)h=c+1;else if(d<0)u=c-1;else return[Ao(r,c*17+7),r.getUint32(c*17+13,!0)]}return null},Sh=(r,i)=>r.isDir&&!i.isDir?1:!r.isDir&&i.isDir?-1:r.z!==i.z?r.z-i.z:r.x!==i.x?r.x-i.x:r.y-i.y,Oo=(r,i)=>{let o=r.getUint8(i*17);return{z:o&127,x:zi(r,i*17+1),y:zi(r,i*17+4),offset:Ao(r,i*17+7),length:r.getUint32(i*17+13,!0),isDir:o>>7===1}},Po=r=>{let i=[],o=new DataView(r);for(let a=0;a<o.byteLength/17;a++)i.push(Oo(o,a));return Ch(i)},Ch=r=>{r.sort(Sh);let i=new ArrayBuffer(17*r.length),o=new Uint8Array(i);for(let a=0;a<r.length;a++){let h=r[a],u=h.z;h.isDir&&(u=u|128),o[a*17]=u,o[a*17+1]=h.x&255,o[a*17+2]=h.x>>8&255,o[a*17+3]=h.x>>16&255,o[a*17+4]=h.y&255,o[a*17+5]=h.y>>8&255,o[a*17+6]=h.y>>16&255,o[a*17+7]=h.offset&255,o[a*17+8]=He(h.offset,8)&255,o[a*17+9]=He(h.offset,16)&255,o[a*17+10]=He(h.offset,24)&255,o[a*17+11]=He(h.offset,32)&255,o[a*17+12]=He(h.offset,48)&255,o[a*17+13]=h.length&255,o[a*17+14]=h.length>>8&255,o[a*17+15]=h.length>>16&255,o[a*17+16]=h.length>>24&255}return i},Eh=(r,i)=>{if(r.byteLength<17)return null;let o=r.byteLength/17,a=Oo(r,o-1);if(a.isDir){let h=a.z,u=i.z-h,c=Math.trunc(i.x/(1<<u)),d=Math.trunc(i.y/(1<<u));return{z:h,x:c,y:d}}return null};function Bh(r){return pt(this,null,function*(){let i=yield r.getBytes(0,512e3),o=new DataView(i.data),a=o.getUint32(4,!0),h=o.getUint16(8,!0),u=new TextDecoder("utf-8"),c=JSON.parse(u.decode(new DataView(i.data,10,a))),d=0;c.compression==="gzip"&&(d=2);let m=0;"minzoom"in c&&(m=+c.minzoom);let p=0;"maxzoom"in c&&(p=+c.maxzoom);let v=0,x=0,k=0,T=-180,E=-85,Z=180,g=85;if(c.bounds){let b=c.bounds.split(",");T=+b[0],E=+b[1],Z=+b[2],g=+b[3]}if(c.center){let b=c.center.split(",");v=+b[0],x=+b[1],k=+b[2]}return{specVersion:o.getUint16(2,!0),rootDirectoryOffset:10+a,rootDirectoryLength:h*17,jsonMetadataOffset:10,jsonMetadataLength:a,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:d,tileType:1,minZoom:m,maxZoom:p,minLon:T,minLat:E,maxLon:Z,maxLat:g,centerZoom:k,centerLon:v,centerLat:x,etag:i.etag}})}function Ah(r,i,o,a,h,u,c){return pt(this,null,function*(){let d=yield o.getArrayBuffer(i,r.rootDirectoryOffset,r.rootDirectoryLength,r);r.specVersion===1&&(d=Po(d));let m=Lo(new DataView(d),a,h,u);if(m){let x=(yield i.getBytes(m.offset,m.length,c)).data,k=new DataView(x);return k.getUint8(0)===31&&k.getUint8(1)===139&&(x=zn(new Uint8Array(x))),{data:x}}let p=Eh(new DataView(d),{z:a,x:h,y:u});if(p){let v=Mh(new DataView(d),p.z,p.x,p.y);if(v){let x=yield o.getArrayBuffer(i,v.offset,v.length,r);r.specVersion===1&&(x=Po(x));let k=Lo(new DataView(x),a,h,u);if(k){let E=(yield i.getBytes(k.offset,k.length,c)).data,Z=new DataView(E);return Z.getUint8(0)===31&&Z.getUint8(1)===139&&(E=zn(new Uint8Array(E))),{data:E}}}}})}var Do={getHeader:Bh,getZxy:Ah};function ge(r,i){return(i>>>0)*4294967296+(r>>>0)}function Ih(r,i){let o=i.buf,a=o[i.pos++],h=(a&112)>>4;if(a<128||(a=o[i.pos++],h|=(a&127)<<3,a<128)||(a=o[i.pos++],h|=(a&127)<<10,a<128)||(a=o[i.pos++],h|=(a&127)<<17,a<128)||(a=o[i.pos++],h|=(a&127)<<24,a<128)||(a=o[i.pos++],h|=(a&1)<<31,a<128))return ge(r,h);throw new Error("Expected varint not more than 10 bytes")}function Ue(r){let i=r.buf,o=i[r.pos++],a=o&127;return o<128||(o=i[r.pos++],a|=(o&127)<<7,o<128)||(o=i[r.pos++],a|=(o&127)<<14,o<128)||(o=i[r.pos++],a|=(o&127)<<21,o<128)?a:(o=i[r.pos],a|=(o&15)<<28,Ih(a,r))}function Oh(r,i,o,a){if(a===0){o===1&&(i[0]=r-1-i[0],i[1]=r-1-i[1]);let h=i[0];i[0]=i[1],i[1]=h}}var Dh=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function Zh(r,i,o){if(r>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(i>ye(2,r)-1||o>ye(2,r)-1)throw Error("tile x/y outside zoom level bounds");let a=Dh[r],h=ye(2,r),u=0,c=0,d=0,m=[i,o],p=h/2;for(;p>0;)u=(m[0]&p)>0?1:0,c=(m[1]&p)>0?1:0,d+=p*p*(3*u^c),Oh(p,m,u,c),p=p/2;return a+d}function Zo(r,i){return pt(this,null,function*(){if(i===1||i===0)return r;if(i===2){if(typeof globalThis.DecompressionStream>"u")return zn(new Uint8Array(r));let o=new Response(r).body;if(!o)throw Error("Failed to read response stream");let a=o.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(a).arrayBuffer()}throw Error("Compression method not supported")})}function Fh(r){return r===1?".mvt":r===2?".png":r===3?".jpg":r===4?".webp":r===5?".avif":""}var Rh=127;function Nh(r,i){let o=0,a=r.length-1;for(;o<=a;){let h=a+o>>1,u=i-r[h].tileId;if(u>0)o=h+1;else if(u<0)a=h-1;else return r[h]}return a>=0&&(r[a].runLength===0||i-r[a].tileId<r[a].runLength)?r[a]:null}var Vh=class{constructor(r,i=new Headers){this.url=r,this.customHeaders=i,this.mustReload=!1;let o="";"navigator"in globalThis&&(o=globalThis.navigator.userAgent||"");let a=o.indexOf("Windows")>-1,h=/Chrome|Chromium|Edg|OPR|Brave/.test(o);this.chromeWindowsNoCache=!1,a&&h&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(r){this.customHeaders=r}getBytes(r,i,o,a){return pt(this,null,function*(){let h,u;o?u=o:(h=new AbortController,u=h.signal);let c=new Headers(this.customHeaders);c.set("range",`bytes=${r}-${r+i-1}`);let d;this.mustReload?d="reload":this.chromeWindowsNoCache&&(d="no-store");let m=yield fetch(this.url,{signal:u,cache:d,headers:c});if(r===0&&m.status===416){let k=m.headers.get("Content-Range");if(!k||!k.startsWith("bytes */"))throw Error("Missing content-length on 416 response");let T=+k.substr(8);m=yield fetch(this.url,{signal:u,cache:"reload",headers:{range:`bytes=0-${T-1}`}})}let p=m.headers.get("Etag");if(p?.startsWith("W/")&&(p=null),m.status===416||a&&p&&p!==a)throw this.mustReload=!0,new Mn(`Server returned non-matching ETag ${a} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(m.status>=300)throw Error(`Bad response code: ${m.status}`);let v=m.headers.get("Content-Length");if(m.status===200&&(!v||+v>i))throw h&&h.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield m.arrayBuffer(),etag:p||void 0,cacheControl:m.headers.get("Cache-Control")||void 0,expires:m.headers.get("Expires")||void 0}})}};function At(r,i){let o=r.getUint32(i+4,!0),a=r.getUint32(i+0,!0);return o*ye(2,32)+a}function jh(r,i){let o=new DataView(r),a=o.getUint8(7);if(a>3)throw Error(`Archive is spec version ${a} but this library supports up to spec version 3`);return{specVersion:a,rootDirectoryOffset:At(o,8),rootDirectoryLength:At(o,16),jsonMetadataOffset:At(o,24),jsonMetadataLength:At(o,32),leafDirectoryOffset:At(o,40),leafDirectoryLength:At(o,48),tileDataOffset:At(o,56),tileDataLength:At(o,64),numAddressedTiles:At(o,72),numTileEntries:At(o,80),numTileContents:At(o,88),clustered:o.getUint8(96)===1,internalCompression:o.getUint8(97),tileCompression:o.getUint8(98),tileType:o.getUint8(99),minZoom:o.getUint8(100),maxZoom:o.getUint8(101),minLon:o.getInt32(102,!0)/1e7,minLat:o.getInt32(106,!0)/1e7,maxLon:o.getInt32(110,!0)/1e7,maxLat:o.getInt32(114,!0)/1e7,centerZoom:o.getUint8(118),centerLon:o.getInt32(119,!0)/1e7,centerLat:o.getInt32(123,!0)/1e7,etag:i}}function Fo(r){let i={buf:new Uint8Array(r),pos:0},o=Ue(i),a=[],h=0;for(let u=0;u<o;u++){let c=Ue(i);a.push({tileId:h+c,offset:0,length:0,runLength:1}),h+=c}for(let u=0;u<o;u++)a[u].runLength=Ue(i);for(let u=0;u<o;u++)a[u].length=Ue(i);for(let u=0;u<o;u++){let c=Ue(i);c===0&&u>0?a[u].offset=a[u-1].offset+a[u-1].length:a[u].offset=c-1}return a}function Hh(r){let i=new DataView(r);return i.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):i.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var Mn=class extends Error{};function Uh(r,i){return pt(this,null,function*(){let o=yield r.getBytes(0,16384);if(new DataView(o.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(Hh(o.data)<3)return[yield Do.getHeader(r)];let h=o.data.slice(0,Rh),u=jh(h,o.etag),c=o.data.slice(u.rootDirectoryOffset,u.rootDirectoryOffset+u.rootDirectoryLength),d=`${r.getKey()}|${u.etag||""}|${u.rootDirectoryOffset}|${u.rootDirectoryLength}`,m=Fo(yield i(c,u.internalCompression));return[u,[d,m.length,m]]})}function Wh(r,i,o,a,h){return pt(this,null,function*(){let u=yield r.getBytes(o,a,void 0,h.etag),c=yield i(u.data,h.internalCompression),d=Fo(c);if(d.length===0)throw new Error("Empty directory is invalid");return d})}var Yh=class{constructor(r=100,i=!0,o=Zo){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=r,this.counter=1,this.decompress=o}getHeader(r){return pt(this,null,function*(){let i=r.getKey(),o=this.cache.get(i);if(o)return o.lastUsed=this.counter++,yield o.data;let a=new Promise((h,u)=>{Uh(r,this.decompress).then(c=>{c[1]&&this.cache.set(c[1][0],{lastUsed:this.counter++,data:Promise.resolve(c[1][2])}),h(c[0]),this.prune()}).catch(c=>{u(c)})});return this.cache.set(i,{lastUsed:this.counter++,data:a}),a})}getDirectory(r,i,o,a){return pt(this,null,function*(){let h=`${r.getKey()}|${a.etag||""}|${i}|${o}`,u=this.cache.get(h);if(u)return u.lastUsed=this.counter++,yield u.data;let c=new Promise((d,m)=>{Wh(r,this.decompress,i,o,a).then(p=>{d(p),this.prune()}).catch(p=>{m(p)})});return this.cache.set(h,{lastUsed:this.counter++,data:c}),c})}getArrayBuffer(r,i,o,a){return pt(this,null,function*(){let h=`${r.getKey()}|${a.etag||""}|${i}|${o}`,u=this.cache.get(h);if(u)return u.lastUsed=this.counter++,yield u.data;let c=new Promise((d,m)=>{r.getBytes(i,o,void 0,a.etag).then(p=>{d(p.data),this.cache.has(h),this.prune()}).catch(p=>{m(p)})});return this.cache.set(h,{lastUsed:this.counter++,data:c}),c})}prune(){if(this.cache.size>=this.maxCacheEntries){let r=1/0,i;this.cache.forEach((o,a)=>{o.lastUsed<r&&(r=o.lastUsed,i=a)}),i&&this.cache.delete(i)}}invalidate(r){return pt(this,null,function*(){let i=r.getKey();if(this.invalidations.get(i))return yield this.invalidations.get(i);this.cache.delete(r.getKey());let o=new Promise((a,h)=>{this.getHeader(r).then(u=>{a(),this.invalidations.delete(i)}).catch(u=>{h(u)})});this.invalidations.set(i,o)})}},Ro=class{constructor(r,i,o){typeof r=="string"?this.source=new Vh(r):this.source=r,o?this.decompress=o:this.decompress=Zo,i?this.cache=i:this.cache=new Yh}getHeader(){return pt(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(r,i,o,a){return pt(this,null,function*(){let h=Zh(r,i,o),u=yield this.cache.getHeader(this.source);if(u.specVersion<3)return Do.getZxy(u,this.source,this.cache,r,i,o,a);if(r<u.minZoom||r>u.maxZoom)return;let c=u.rootDirectoryOffset,d=u.rootDirectoryLength;for(let m=0;m<=3;m++){let p=yield this.cache.getDirectory(this.source,c,d,u),v=Nh(p,h);if(v){if(v.runLength>0){let x=yield this.source.getBytes(u.tileDataOffset+v.offset,v.length,a,u.etag);return{data:yield this.decompress(x.data,u.tileCompression),cacheControl:x.cacheControl,expires:x.expires}}c=u.leafDirectoryOffset+v.offset,d=v.length}else return}throw Error("Maximum directory depth exceeded")})}getZxy(r,i,o,a){return pt(this,null,function*(){try{return yield this.getZxyAttempt(r,i,o,a)}catch(h){if(h instanceof Mn)return this.cache.invalidate(this.source),yield this.getZxyAttempt(r,i,o,a);throw h}})}getMetadataAttempt(){return pt(this,null,function*(){let r=yield this.cache.getHeader(this.source),i=yield this.source.getBytes(r.jsonMetadataOffset,r.jsonMetadataLength,void 0,r.etag),o=yield this.decompress(i.data,r.internalCompression),a=new TextDecoder("utf-8");return JSON.parse(a.decode(o))})}getMetadata(){return pt(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(r){if(r instanceof Mn)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw r}})}getTileJson(r){return pt(this,null,function*(){let i=yield this.getHeader(),o=yield this.getMetadata(),a=Fh(i.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${r}/{z}/{x}/{y}${a}`],vector_layers:o.vector_layers,attribution:o.attribution,description:o.description,name:o.name,version:o.version,bounds:[i.minLon,i.minLat,i.maxLon,i.maxLat],center:[i.centerLon,i.centerLat,i.centerZoom],minzoom:i.minZoom,maxzoom:i.maxZoom}})}};var En=function(r,i,o,a){function h(u){return u instanceof o?u:new o(function(c){c(u)})}return new(o||(o=Promise))(function(u,c){function d(v){try{p(a.next(v))}catch(x){c(x)}}function m(v){try{p(a.throw(v))}catch(x){c(x)}}function p(v){v.done?u(v.value):h(v.value).then(d,m)}p((a=a.apply(r,i||[])).next())})},we;(function(r){r[r.Point=1]="Point",r[r.Line=2]="Line",r[r.Polygon=3]="Polygon"})(we||(we={}));function qt(r){return`${r.x}:${r.y}:${r.z}`}var Xh=(r,i,o)=>{r.pos=i;let a=r.readVarint()+r.pos,h=1,u=0,c=0,d=0,m=1/0,p=-1/0,v=1/0,x=-1/0,k=[],T=[];for(;r.pos<a;){if(u<=0){let E=r.readVarint();h=E&7,u=E>>3}if(u--,h===1||h===2)c+=r.readSVarint()*o,d+=r.readSVarint()*o,c<m&&(m=c),c>p&&(p=c),d<v&&(v=d),d>x&&(x=d),h===1&&(T.length>0&&k.push(T),T=[]),T.push(new Y(c,d));else if(h===7)T&&T.push(T[0].clone());else throw new Error(`unknown command ${h}`)}return T&&k.push(T),{geom:k,bbox:{minX:m,minY:v,maxX:p,maxY:x}}};function Ho(r,i){let o=new Pi(new je(r)),a=new Map;for(let[h,u]of Object.entries(o.layers)){let c=[],d=u;for(let m=0;m<d.length;m++){let p=Xh(d.feature(m)._pbf,d.feature(m)._geometry,i/d.extent),v=0;for(let x of p.geom)v+=x.length;c.push({id:d.feature(m).id,geomType:d.feature(m).type,geom:p.geom,numVertices:v,bbox:p.bbox,props:d.feature(m).properties})}a.set(h,c)}return a}var Xe=class{constructor(i,o){typeof i=="string"?this.p=new Ro(i):this.p=i,this.zoomaborts=[],this.shouldCancelZooms=o}get(i,o){return En(this,void 0,void 0,function*(){this.shouldCancelZooms&&(this.zoomaborts=this.zoomaborts.filter(c=>c.z!==i.z?(c.controller.abort(),!1):!0));let a=new AbortController;this.zoomaborts.push({z:i.z,controller:a});let h=a.signal,u=yield this.p.getZxy(i.z,i.x,i.y,h);return u?Ho(u.data,o):new Map})}},Ci=class{constructor(i,o){this.url=i,this.zoomaborts=[],this.shouldCancelZooms=o}get(i,o){return En(this,void 0,void 0,function*(){this.shouldCancelZooms&&(this.zoomaborts=this.zoomaborts.filter(c=>c.z!==i.z?(c.controller.abort(),!1):!0));let a=this.url.replace("{z}",i.z.toString()).replace("{x}",i.x.toString()).replace("{y}",i.y.toString()),h=new AbortController;this.zoomaborts.push({z:i.z,controller:h});let u=h.signal;return new Promise((c,d)=>{fetch(a,{signal:u}).then(m=>m.arrayBuffer()).then(m=>{let p=Ho(m,o);c(p)}).catch(m=>{d(m)})})})}},Cn=6378137,No=85.0511287798,Mi=Cn*Math.PI,qh=r=>{let i=Math.PI/180,o=Math.max(Math.min(No,r[0]),-No),a=Math.sin(o*i);return new Y(Cn*r[1]*i,Cn*Math.log((1+a)/(1-a))/2)};function Vo(r){return r*r}function Si(r,i){return Vo(r.x-i.x)+Vo(r.y-i.y)}function $h(r,i,o){let a=Si(i,o);if(a===0)return Si(r,i);let h=((r.x-i.x)*(o.x-i.x)+(r.y-i.y)*(o.y-i.y))/a;return h=Math.max(0,Math.min(1,h)),Si(r,new Y(i.x+h*(o.x-i.x),i.y+h*(o.y-i.y)))}function jo(r,i){let o=!1;for(let a=0,h=i.length-1;a<i.length;h=a++){let u=i[a].x,c=i[a].y,d=i[h].x,m=i[h].y;c>r.y!=m>r.y&&r.x<(d-u)*(r.y-c)/(m-c)+u&&(o=!o)}return o}function Gh(r){let i=0;for(let o=0;o<r.length;o++){let a=(o+1)%r.length;i+=r[o].x*r[a].y,i-=r[a].x*r[o].y}return i<0}function Kh(r,i){let o=!1;for(let a of i)if(Gh(a))jo(r,a)&&(o=!1);else{if(o)return!0;jo(r,a)&&(o=!0)}return o}function Jh(r,i){let o=1/0;for(let a of i){let h=Math.sqrt(Si(r,a[0]));h<o&&(o=h)}return o}function Qh(r,i){let o=1/0;for(let a of i)for(let h=0;h<a.length-1;h++){let u=Math.sqrt($h(r,a[h],a[h+1]));u<o&&(o=u)}return o}var Ei=class{constructor(i,o){this.source=i,this.cache=new Map,this.inflight=new Map,this.tileSize=o}get(i){return En(this,void 0,void 0,function*(){let o=qt(i);return new Promise((a,h)=>{let u=this.cache.get(o);if(u)u.used=performance.now(),a(u.data);else{let c=this.inflight.get(o);c?c.push({resolve:a,reject:h}):(this.inflight.set(o,[]),this.source.get(i,this.tileSize).then(d=>{this.cache.set(o,{used:performance.now(),data:d});let m=this.inflight.get(o);if(m)for(let p of m)p.resolve(d);if(this.inflight.delete(o),a(d),this.cache.size>=64){let p=1/0,v;this.cache.forEach((x,k)=>{x.used<p&&(p=x.used,v=k)}),v&&this.cache.delete(v)}}).catch(d=>{let m=this.inflight.get(o);if(m)for(let p of m)p.reject(d);this.inflight.delete(o),h(d)}))}})})}queryFeatures(i,o,a,h){let u=qh([o,i]),c=new Y((u.x+Mi)/(Mi*2),1-(u.y+Mi)/(Mi*2));c.x>1&&(c.x=c.x-Math.floor(c.x));let d=c.mult(1<<a),m=Math.floor(d.x),p=Math.floor(d.y),v=qt({z:a,x:m,y:p}),x=[],k=this.cache.get(v);if(k){let T=new Y((d.x-m)*this.tileSize,(d.y-p)*this.tileSize);for(let[E,Z]of k.data.entries())for(let g of Z)g.geomType===we.Point?Jh(T,g.geom)<h&&x.push({feature:g,layerName:E}):g.geomType===we.Line?Qh(T,g.geom)<h&&x.push({feature:g,layerName:E}):Kh(T,g.geom)&&x.push({feature:g,layerName:E})}return x}};var Ft;(function(r){r[r.Left=1]="Left",r[r.Center=2]="Center",r[r.Right=3]="Right"})(Ft||(Ft={}));var it;(function(r){r[r.N=1]="N",r[r.Ne=2]="Ne",r[r.E=3]="E",r[r.Se=4]="Se",r[r.S=5]="S",r[r.Sw=6]="Sw",r[r.W=7]="W",r[r.Nw=8]="Nw"})(it||(it={}));var ht=class{constructor(i){var o;this.pattern=i.pattern,this.fill=new yt(i.fill,"black"),this.opacity=new at(i.opacity,1),this.stroke=new yt(i.stroke,"black"),this.width=new at(i.width,0),this.perFeature=(o=this.fill.perFeature||this.opacity.perFeature||this.stroke.perFeature||this.width.perFeature||i.perFeature)!==null&&o!==void 0?o:!1,this.doStroke=!1}before(i,o){if(!this.perFeature){i.globalAlpha=this.opacity.get(o),i.fillStyle=this.fill.get(o),i.strokeStyle=this.stroke.get(o);let a=this.width.get(o);a>0&&(this.doStroke=!0),i.lineWidth=a}if(this.pattern){let a=i.createPattern(this.pattern,"repeat");a&&(i.fillStyle=a)}}draw(i,o,a,h){let u=!1;if(this.perFeature){i.globalAlpha=this.opacity.get(a,h),i.fillStyle=this.fill.get(a,h);let d=this.width.get(a,h);d&&(u=!0,i.strokeStyle=this.stroke.get(a,h),i.lineWidth=d)}let c=()=>{i.fill(),(u||this.doStroke)&&i.stroke()};i.beginPath();for(let d of o)for(let m=0;m<d.length;m++){let p=d[m];m===0?i.moveTo(p.x,p.y):i.lineTo(p.x,p.y)}c()}};function tl(r,i){let o=0;for(;i[o+1][0]<r;)o++;return o}function el(r,i,o){return r*(o-i)+i}function il(r,i,o,a){let h=a[i+1][0]-a[i][0],u=r-a[i][0];return h===0?0:o===1?u/h:(Math.pow(o,u)-1)/(Math.pow(o,h)-1)}function St(r,i){return o=>{if(i.length<1)return 0;if(o<=i[0][0])return i[0][1];if(o>=i[i.length-1][0])return i[i.length-1][1];let a=tl(o,i),h=il(o,a,r,i);return el(h,i[a][1],i[a+1][1])}}function In(r){return St(1,r)}var gt=class{constructor(i){var o;this.color=new yt(i.color,"black"),this.width=new at(i.width),this.opacity=new at(i.opacity),this.dash=i.dash?new bi(i.dash):null,this.dashColor=new yt(i.dashColor,"black"),this.dashWidth=new at(i.dashWidth,1),this.lineCap=new yt(i.lineCap,"butt"),this.lineJoin=new yt(i.lineJoin,"miter"),this.skip=!1,this.perFeature=!!(!((o=this.dash)===null||o===void 0)&&o.perFeature||this.color.perFeature||this.opacity.perFeature||this.width.perFeature||this.lineCap.perFeature||this.lineJoin.perFeature||i.perFeature)}before(i,o){this.perFeature||(i.strokeStyle=this.color.get(o),i.lineWidth=this.width.get(o),i.globalAlpha=this.opacity.get(o),i.lineCap=this.lineCap.get(o),i.lineJoin=this.lineJoin.get(o))}draw(i,o,a,h){if(this.skip)return;let u=()=>{this.perFeature&&(i.globalAlpha=this.opacity.get(a,h),i.lineCap=this.lineCap.get(a,h),i.lineJoin=this.lineJoin.get(a,h)),this.dash?(i.save(),this.perFeature?(i.lineWidth=this.dashWidth.get(a,h),i.strokeStyle=this.dashColor.get(a,h),i.setLineDash(this.dash.get(a,h))):i.setLineDash(this.dash.get(a)),i.stroke(),i.restore()):(i.save(),this.perFeature&&(i.lineWidth=this.width.get(a,h),i.strokeStyle=this.color.get(a,h)),i.stroke(),i.restore())};i.beginPath();for(let c of o)for(let d=0;d<c.length;d++){let m=c[d];d===0?i.moveTo(m.x,m.y):i.lineTo(m.x,m.y)}u()}};var Bi=class{constructor(i){this.radius=new at(i.radius,3),this.fill=new yt(i.fill,"black"),this.stroke=new yt(i.stroke,"white"),this.width=new at(i.width,0),this.opacity=new at(i.opacity)}draw(i,o,a,h){i.globalAlpha=this.opacity.get(a,h);let u=this.radius.get(a,h),c=this.width.get(a,h);c>0&&(i.strokeStyle=this.stroke.get(a,h),i.lineWidth=c,i.beginPath(),i.arc(o[0][0].x,o[0][0].y,u+c/2,0,2*Math.PI),i.stroke()),i.fillStyle=this.fill.get(a,h),i.beginPath(),i.arc(o[0][0].x,o[0][0].y,u,0,2*Math.PI),i.fill()}place(i,o,a){let h=o[0],u=new Y(o[0][0].x,o[0][0].y),c=this.radius.get(i.zoom,a),d={minX:u.x-c,minY:u.y-c,maxX:u.x+c,maxY:u.y+c};return[{anchor:u,bboxes:[d],draw:p=>{this.draw(p,[[new Y(0,0)]],i.zoom,a)}}]}};var nl=(r,i)=>({minX:Math.min(r.minX,i.minX),minY:Math.min(r.minY,i.minY),maxX:Math.max(r.maxX,i.maxX),maxY:Math.max(r.maxY,i.maxY)}),Ai=class{constructor(i){this.list=i}place(i,o,a){let h=this.list[0];if(!h)return;let u=h.place(i,o,a);if(!u)return;let c=u[0],d=c.anchor,m=c.bboxes[0],p=[c.draw];for(let x=1;x<this.list.length;x++){if(u=this.list[x].place(i,o,a),!u)return;c=u[0],m=nl(m,c.bboxes[0]),p.push(c.draw)}return[{anchor:d,bboxes:[m],draw:x=>{for(let k of p)k(x)}}]}},Bn=class{constructor(i){this.symbolizer=i}place(i,o,a){let h=o[0][0],u=this.symbolizer.place(i,[[new Y(0,0)]],a);if(!u||u.length===0)return;let c=u[0],d=c.bboxes[0],m=d.maxX-d.minX,p=d.maxY-d.minY,v={minX:h.x-m/2,maxX:h.x+m/2,minY:h.y-p/2,maxY:h.y+p/2};return[{anchor:h,bboxes:[v],draw:k=>{k.translate(-m/2,p/2-d.maxY),c.draw(k,{justify:Ft.Center})}}]}};var Ii=class{constructor(i){this.font=new Ne(i),this.text=new Re(i),this.fill=new yt(i.fill,"black"),this.stroke=new yt(i.stroke,"black"),this.width=new at(i.width,0),this.lineHeight=new at(i.lineHeight,1),this.letterSpacing=new at(i.letterSpacing,0),this.maxLineCodeUnits=new at(i.maxLineChars,15),this.justify=i.justify}place(i,o,a){let h=this.text.get(i.zoom,a);if(!h)return;let u=this.font.get(i.zoom,a);i.scratch.font=u;let c=this.letterSpacing.get(i.zoom,a),d=xn(h,this.maxLineCodeUnits.get(i.zoom,a)),m="",p=0;for(let b of d)b.length>p&&(p=b.length,m=b);let v=i.scratch.measureText(m),x=v.width+c*(p-1),k=v.actualBoundingBoxAscent,T=v.actualBoundingBoxDescent,E=(k+T)*this.lineHeight.get(i.zoom,a),Z=new Y(o[0][0].x,o[0][0].y),g={minX:Z.x,minY:Z.y-k,maxX:Z.x+x,maxY:Z.y+T+(d.length-1)*E};return[{anchor:Z,bboxes:[g],draw:(b,C)=>{b.globalAlpha=1,b.font=u,b.fillStyle=this.fill.get(i.zoom,a);let z=this.width.get(i.zoom,a),S=0;for(let A of d){let B=0;if(this.justify===Ft.Center||C&&C.justify===Ft.Center?B=(x-b.measureText(A).width)/2:(this.justify===Ft.Right||C&&C.justify===Ft.Right)&&(B=x-b.measureText(A).width),z)if(b.lineWidth=z*2,b.strokeStyle=this.stroke.get(i.zoom,a),c>0){let D=B;for(let O of A)b.strokeText(O,D,S),D+=b.measureText(O).width+c}else b.strokeText(A,B,S);if(c>0){let D=B;for(let O of A)b.fillText(O,D,S),D+=b.measureText(O).width+c}else b.fillText(A,B,S);S+=E}}}]}},$t=class{constructor(i){this.centered=new Bn(new Ii(i))}place(i,o,a){return this.centered.place(i,o,a)}},An=class{constructor(i,o){var a,h,u;this.symbolizer=i,this.offsetX=new at(o.offsetX,0),this.offsetY=new at(o.offsetY,0),this.justify=(a=o.justify)!==null&&a!==void 0?a:void 0,this.placements=(h=o.placements)!==null&&h!==void 0?h:[it.Ne,it.Sw,it.Nw,it.Se,it.N,it.E,it.S,it.W],this.ddValues=(u=o.ddValues)!==null&&u!==void 0?u:()=>({})}place(i,o,a){if(a.geomType!==we.Point)return;let h=o[0][0],u=this.symbolizer.place(i,[[new Y(0,0)]],a);if(!u||u.length===0)return;let c=u[0],d=c.bboxes[0],m=this.offsetX,p=this.offsetY,v=this.justify,x=this.placements,{offsetX:k,offsetY:T,justify:E,placements:Z}=this.ddValues(i.zoom,a)||{};k&&(m=new at(k,0)),T&&(p=new at(T,0)),E&&(v=E),Z&&(x=Z);let g=m.get(i.zoom,a),y=p.get(i.zoom,a),b=(B,D)=>({minX:B.x+D.x+d.minX,minY:B.y+D.y+d.minY,maxX:B.x+D.x+d.maxX,maxY:B.y+D.y+d.maxY}),C=new Y(g,y),z,S=B=>{B.translate(C.x,C.y),c.draw(B,{justify:z})},A=(B,D)=>{let O=b(B,D);if(!i.index.bboxCollides(O,i.order))return[{anchor:h,bboxes:[O],draw:S}]};for(let B of x){let D=this.computeXaxisOffset(g,d,B),O=this.computeYaxisOffset(y,d,B);return z=this.computeJustify(v,B),C=new Y(D,O),A(h,C)}}computeXaxisOffset(i,o,a){let h=o.maxX,u=h/2;return[it.N,it.S].includes(a)?i-u:[it.Nw,it.W,it.Sw].includes(a)?i-h:i}computeYaxisOffset(i,o,a){let h=Math.abs(o.minY),u=o.maxY,c=(o.minY+o.maxY)/2;return[it.E,it.W].includes(a)?i-c:[it.Nw,it.Ne,it.N].includes(a)?i-u:[it.Sw,it.Se,it.S].includes(a)?i+h:i}computeJustify(i,o){return i||([it.N,it.S].includes(o)?Ft.Center:[it.Ne,it.E,it.Se].includes(o)?Ft.Left:Ft.Right)}},Oi=class{constructor(i){this.symbolizer=new An(new Ii(i),i)}place(i,o,a){return this.symbolizer.place(i,o,a)}},qe;(function(r){r[r.Above=1]="Above",r[r.Center=2]="Center",r[r.Below=3]="Below"})(qe||(qe={}));var xe=class{constructor(i){var o;this.font=new Ne(i),this.text=new Re(i),this.fill=new yt(i.fill,"black"),this.stroke=new yt(i.stroke,"black"),this.width=new at(i.width,0),this.offset=new at(i.offset,0),this.position=(o=i.position)!==null&&o!==void 0?o:qe.Above,this.maxLabelCodeUnits=new at(i.maxLabelChars,40),this.repeatDistance=new at(i.repeatDistance,250)}place(i,o,a){let h=this.text.get(i.zoom,a);if(!h||h.length>this.maxLabelCodeUnits.get(i.zoom,a))return;let u=20,c=a.bbox;if(c.maxY-c.minY<u&&c.maxX-c.minX<u)return;let d=this.font.get(i.zoom,a);i.scratch.font=d;let m=i.scratch.measureText(h),p=m.width,v=m.actualBoundingBoxAscent+m.actualBoundingBoxDescent,x=this.repeatDistance.get(i.zoom,a);i.overzoom>4&&(x*=1<<i.overzoom-4);let k=v*2,T=vo(o,p,x,k);if(T.length===0)return;let E=[];for(let Z of T){let g=Z.end.x-Z.start.x,y=Z.end.y-Z.start.y,C=yo(Z.start,Z.end,p,k/2).map(S=>({minX:S.x-k/2,minY:S.y-k/2,maxX:S.x+k/2,maxY:S.y+k/2})),z=S=>{S.globalAlpha=1,S.rotate(Math.atan2(y,g)),g<0&&(S.scale(-1,-1),S.translate(-p,0));let A=0;this.position===qe.Below?A+=v:this.position===qe.Center&&(A+=v/2),S.translate(0,A-this.offset.get(i.zoom,a)),S.font=d;let B=this.width.get(i.zoom,a);B&&(S.lineWidth=B,S.strokeStyle=this.stroke.get(i.zoom,a),S.strokeText(h,0,0)),S.fillStyle=this.fill.get(i.zoom,a),S.fillText(h,0,0)};E.push({anchor:Z.start,bboxes:C,draw:z,deduplicationKey:h,deduplicationDistance:x})}return E}};var Pt=(r,i)=>{let o=r[i];return typeof o=="string"?o:""},Uo=(r,i)=>{let o=r[i];return typeof o=="number"?o:0},Di=r=>[{dataLayer:"earth",symbolizer:new ht({fill:r.earth})},{dataLayer:"landuse",symbolizer:new ht({fill:(i,o)=>xi(r.park_a,r.park_b,Math.min(Math.max(i/12,12),0))}),filter:(i,o)=>{let a=Pt(o.props,"pmap:kind");return["allotments","village_green","playground"].includes(a)}},{dataLayer:"landuse",symbolizer:new ht({fill:r.park_b,opacity:.7}),filter:(i,o)=>{let a=Pt(o.props,"pmap:kind");return["national_park","park","cemetery","protected_area","nature_reserve","forest","golf_course"].includes(a)}},{dataLayer:"landuse",symbolizer:new ht({fill:r.hospital}),filter:(i,o)=>o.props["pmap:kind"]==="hospital"},{dataLayer:"landuse",symbolizer:new ht({fill:r.industrial}),filter:(i,o)=>o.props["pmap:kind"]==="industrial"},{dataLayer:"landuse",symbolizer:new ht({fill:r.school}),filter:(i,o)=>{let a=Pt(o.props,"pmap:kind");return["school","university","college"].includes(a)}},{dataLayer:"landuse",symbolizer:new ht({fill:r.beach}),filter:(i,o)=>o.props["pmap:kind"]==="beach"},{dataLayer:"landuse",symbolizer:new ht({fill:r.zoo}),filter:(i,o)=>o.props["pmap:kind"]==="zoo"},{dataLayer:"landuse",symbolizer:new ht({fill:r.zoo}),filter:(i,o)=>{let a=Pt(o.props,"pmap:kind");return["military","naval_base","airfield"].includes(a)}},{dataLayer:"natural",symbolizer:new ht({fill:(i,o)=>xi(r.wood_a,r.wood_b,Math.min(Math.max(i/12,12),0))}),filter:(i,o)=>{let a=Pt(o.props,"pmap:kind");return["wood","nature_reserve","forest"].includes(a)}},{dataLayer:"natural",symbolizer:new ht({fill:(i,o)=>xi(r.scrub_a,r.scrub_b,Math.min(Math.max(i/12,12),0))}),filter:(i,o)=>{let a=Pt(o.props,"pmap:kind");return["scrub","grassland","grass"].includes(a)}},{dataLayer:"natural",symbolizer:new ht({fill:r.scrub_b}),filter:(i,o)=>{let a=Pt(o.props,"pmap:kind");return["scrub","grassland","grass"].includes(a)}},{dataLayer:"natural",symbolizer:new ht({fill:r.glacier}),filter:(i,o)=>o.props["pmap:kind"]==="glacier"},{dataLayer:"natural",symbolizer:new ht({fill:r.sand}),filter:(i,o)=>o.props["pmap:kind"]==="sand"},{dataLayer:"landuse",symbolizer:new ht({fill:r.aerodrome}),filter:(i,o)=>o.props["pmap:kind"]==="aerodrome"},{dataLayer:"water",symbolizer:new ht({fill:r.water})},{dataLayer:"transit",symbolizer:new gt({color:r.runway,width:(i,o)=>St(1.6,[[11,0],[13,4],[19,30]])(i)}),filter:(i,o)=>o.props["pmap:kind_detail"]==="runway"},{dataLayer:"transit",symbolizer:new gt({color:r.runway,width:(i,o)=>St(1.6,[[14,0],[14.5,1],[16,6]])(i)}),filter:(i,o)=>o.props["pmap:kind_detail"]==="taxiway"},{dataLayer:"transit",symbolizer:new gt({color:r.pier,width:(i,o)=>St(1.6,[[13,0],[13.5,0,5],[21,16]])(i)}),filter:(i,o)=>o.props["pmap:kind"]==="pier"},{dataLayer:"physical_line",minzoom:14,symbolizer:new gt({color:r.water,width:(i,o)=>St(1.6,[[9,0],[9.5,1],[18,12]])(i)}),filter:(i,o)=>o.props["pmap:kind"]==="river"},{dataLayer:"physical_line",minzoom:14,symbolizer:new gt({color:r.water,width:.5}),filter:(i,o)=>o.props["pmap:kind"]==="stream"},{dataLayer:"landuse",symbolizer:new ht({fill:r.pedestrian}),filter:(i,o)=>o.props["pmap:kind"]==="pedestrian"},{dataLayer:"landuse",symbolizer:new ht({fill:r.pier}),filter:(i,o)=>o.props["pmap:kind"]==="pier"},{dataLayer:"buildings",symbolizer:new ht({fill:r.buildings,opacity:.5})},{dataLayer:"roads",symbolizer:new gt({color:r.major,width:(i,o)=>St(1.6,[[14,0],[20,7]])(i)}),filter:(i,o)=>{let a=Pt(o.props,"pmap:kind");return["other","path"].includes(a)}},{dataLayer:"roads",symbolizer:new gt({color:r.major,width:(i,o)=>St(1.6,[[13,0],[18,8]])(i)}),filter:(i,o)=>o.props["pmap:kind"]==="minor_road"},{dataLayer:"roads",symbolizer:new gt({color:r.major,width:(i,o)=>St(1.6,[[7,0],[12,1.2],[15,3],[18,13]])(i)}),filter:(i,o)=>o.props["pmap:kind"]==="medium_road"},{dataLayer:"roads",symbolizer:new gt({color:r.major,width:(i,o)=>St(1.6,[[6,0],[12,1.6],[15,3],[18,13]])(i)}),filter:(i,o)=>o.props["pmap:kind"]==="major_road"},{dataLayer:"roads",symbolizer:new gt({color:r.major,width:(i,o)=>St(1.6,[[3,0],[6,1.1],[12,1.6],[15,5],[18,15]])(i)}),filter:(i,o)=>o.props["pmap:kind"]==="highway"},{dataLayer:"boundaries",symbolizer:new gt({dash:[3,2],color:r.boundaries,width:1}),filter:(i,o)=>{let a=o.props["pmap:min_admin_level"];return typeof a=="number"&&a<=2}},{dataLayer:"transit",symbolizer:new gt({dash:[.3,.75],color:r.railway,dashWidth:(i,o)=>St(1.6,[[4,0],[7,.15],[19,9]])(i),opacity:.5}),filter:(i,o)=>o.props["pmap:kind"]==="rail"},{dataLayer:"boundaries",symbolizer:new gt({dash:[3,2],color:r.boundaries,width:.5}),filter:(i,o)=>{let a=o.props["pmap:min_admin_level"];return typeof a=="number"&&a>2}}],Zi=r=>{let i=["name"];return[{dataLayer:"roads",symbolizer:new xe({labelProps:i,fill:r.roads_label_minor,font:"400 12px sans-serif",width:2,stroke:r.roads_label_minor_halo}),minzoom:16,filter:(o,a)=>{let h=Pt(a.props,"pmap:kind");return["minor_road","other","path"].includes(h)}},{dataLayer:"roads",symbolizer:new xe({labelProps:i,fill:r.roads_label_major,font:"400 12px sans-serif",width:2,stroke:r.roads_label_major_halo}),minzoom:12,filter:(o,a)=>{let h=Pt(a.props,"pmap:kind");return["highway","major_road","medium_road"].includes(h)}},{dataLayer:"roads",symbolizer:new xe({labelProps:i,fill:r.roads_label_major,font:"400 12px sans-serif",width:2,stroke:r.roads_label_major_halo}),minzoom:12,filter:(o,a)=>{let h=Pt(a.props,"pmap:kind");return["highway","major_road","medium_road"].includes(h)}},{dataLayer:"physical_point",symbolizer:new $t({labelProps:i,fill:r.ocean_label,lineHeight:1.5,letterSpacing:1,font:(o,a)=>`400 ${In([[3,10],[10,12]])(o)}px sans-serif`,textTransform:"uppercase"}),filter:(o,a)=>{let h=Pt(a.props,"pmap:kind");return["ocean","bay","strait","fjord"].includes(h)}},{dataLayer:"physical_point",symbolizer:new $t({labelProps:i,fill:r.ocean_label,lineHeight:1.5,letterSpacing:1,font:(o,a)=>`400 ${In([[3,0],[6,12],[10,12]])(o)}px sans-serif`}),filter:(o,a)=>{let h=Pt(a.props,"pmap:kind");return["sea","lake","water"].includes(h)}},{dataLayer:"places",symbolizer:new $t({labelProps:(o,a)=>o<6?["name:short"]:i,fill:r.state_label,stroke:r.state_label_halo,width:1,lineHeight:1.5,font:(o,a)=>o<6?"400 16px sans-serif":"400 12px sans-serif",textTransform:"uppercase"}),filter:(o,a)=>a.props["pmap:kind"]==="region"},{dataLayer:"places",symbolizer:new $t({labelProps:i,fill:r.country_label,lineHeight:1.5,font:(o,a)=>(o<6,"600 12px sans-serif"),textTransform:"uppercase"}),filter:(o,a)=>a.props["pmap:kind"]==="country"},{dataLayer:"places",minzoom:9,symbolizer:new $t({labelProps:i,fill:r.city_label,lineHeight:1.5,font:(o,a)=>{if(!a)return"400 12px sans-serif";let h=a.props["pmap:min_zoom"],u=400;h&&h<=5&&(u=600);let c=12,d=a.props["pmap:population_rank"];return d&&d>9&&(c=16),`${u} ${c}px sans-serif`}}),sort:(o,a)=>{let h=Uo(o,"pmap:population_rank"),u=Uo(a,"pmap:population_rank");return h-u},filter:(o,a)=>a.props["pmap:kind"]==="locality"},{dataLayer:"places",maxzoom:8,symbolizer:new Ai([new Bi({radius:2,fill:r.city_circle,stroke:r.city_circle_stroke,width:1.5}),new Oi({labelProps:i,fill:r.city_label,stroke:r.city_label_halo,width:1,offsetX:6,offsetY:4.5,font:(o,a)=>"400 12px sans-serif"})]),filter:(o,a)=>a.props["pmap:kind"]==="locality"}]};var rl={background:"#cccccc",earth:"#e0e0e0",park_a:"#cfddd5",park_b:"#9cd3b4",hospital:"#e4dad9",industrial:"#d1dde1",school:"#e4ded7",wood_a:"#d0ded0",wood_b:"#a0d9a0",pedestrian:"#e3e0d4",scrub_a:"#cedcd7",scrub_b:"#99d2bb",glacier:"#e7e7e7",sand:"#e2e0d7",beach:"#e8e4d0",aerodrome:"#dadbdf",runway:"#e9e9ed",water:"#80deea",pier:"#e0e0e0",zoo:"#c6dcdc",military:"#dcdcdc",tunnel_other_casing:"#e0e0e0",tunnel_minor_casing:"#e0e0e0",tunnel_link_casing:"#e0e0e0",tunnel_medium_casing:"#e0e0e0",tunnel_major_casing:"#e0e0e0",tunnel_highway_casing:"#e0e0e0",tunnel_other:"#d5d5d5",tunnel_minor:"#d5d5d5",tunnel_link:"#d5d5d5",tunnel_medium:"#d5d5d5",tunnel_major:"#d5d5d5",tunnel_highway:"#d5d5d5",transit_pier:"#e0e0e0",buildings:"#cccccc",minor_service_casing:"#e0e0e0",minor_casing:"#e0e0e0",link_casing:"#e0e0e0",medium_casing:"#e0e0e0",major_casing_late:"#e0e0e0",highway_casing_late:"#e0e0e0",other:"#ebebeb",minor_service:"#ebebeb",minor_a:"#ebebeb",minor_b:"#ffffff",link:"#ffffff",medium:"#f5f5f5",major_casing_early:"#e0e0e0",major:"#ffffff",highway_casing_early:"#e0e0e0",highway:"#ffffff",railway:"#a7b1b3",boundaries:"#adadad",waterway_label:"#ffffff",bridges_other_casing:"#e0e0e0",bridges_minor_casing:"#e0e0e0",bridges_link_casing:"#e0e0e0",bridges_medium_casing:"#e0e0e0",bridges_major_casing:"#e0e0e0",bridges_highway_casing:"#e0e0e0",bridges_other:"#ebebeb",bridges_minor:"#ffffff",bridges_link:"#ffffff",bridges_medium:"#f0eded",bridges_major:"#f5f5f5",bridges_highway:"#ffffff",roads_label_minor:"#91888b",roads_label_minor_halo:"#ffffff",roads_label_major:"#938a8d",roads_label_major_halo:"#ffffff",ocean_label:"#ffffff",peak_label:"#7e9aa0",subplace_label:"#8f8f8f",subplace_label_halo:"#e0e0e0",city_circle:"#ffffff",city_circle_stroke:"#a3a3a3",city_label:"#5c5c5c",city_label_halo:"#e0e0e0",state_label:"#b3b3b3",state_label_halo:"#e0e0e0",country_label:"#a3a3a3"},ol={background:"#34373d",earth:"#1f1f1f",park_a:"#232325",park_b:"#232325",hospital:"#252424",industrial:"#222222",school:"#262323",wood_a:"#202121",wood_b:"#202121",pedestrian:"#1e1e1e",scrub_a:"#222323",scrub_b:"#222323",glacier:"#1c1c1c",sand:"#212123",beach:"#28282a",aerodrome:"#1e1e1e",runway:"#333333",water:"#34373d",pier:"#222222",zoo:"#222323",military:"#242323",tunnel_other_casing:"#141414",tunnel_minor_casing:"#141414",tunnel_link_casing:"#141414",tunnel_medium_casing:"#141414",tunnel_major_casing:"#141414",tunnel_highway_casing:"#141414",tunnel_other:"#292929",tunnel_minor:"#292929",tunnel_link:"#292929",tunnel_medium:"#292929",tunnel_major:"#292929",tunnel_highway:"#292929",transit_pier:"#333333",buildings:"#111111",minor_service_casing:"#1f1f1f",minor_casing:"#1f1f1f",link_casing:"#1f1f1f",medium_casing:"#1f1f1f",major_casing_late:"#1f1f1f",highway_casing_late:"#1f1f1f",other:"#333333",minor_service:"#333333",minor_a:"#3d3d3d",minor_b:"#333333",link:"#3d3d3d",medium:"#3d3d3d",major_casing_early:"#1f1f1f",major:"#3d3d3d",highway_casing_early:"#1f1f1f",highway:"#474747",railway:"#000000",boundaries:"#5b6374",waterway_label:"#717784",bridges_other_casing:"#2b2b2b",bridges_minor_casing:"#1f1f1f",bridges_link_casing:"#1f1f1f",bridges_medium_casing:"#1f1f1f",bridges_major_casing:"#1f1f1f",bridges_highway_casing:"#1f1f1f",bridges_other:"#333333",bridges_minor:"#333333",bridges_link:"#3d3d3d",bridges_medium:"#3d3d3d",bridges_major:"#3d3d3d",bridges_highway:"#474747",roads_label_minor:"#525252",roads_label_minor_halo:"#1f1f1f",roads_label_major:"#666666",roads_label_major_halo:"#1f1f1f",ocean_label:"#717784",peak_label:"#898080",subplace_label:"#525252",subplace_label_halo:"#1f1f1f",city_circle:"#000000",city_circle_stroke:"#7a7a7a",city_label:"#7a7a7a",city_label_halo:"#212121",state_label:"#3d3d3d",state_label_halo:"#1f1f1f",country_label:"#5c5c5c"},sl={background:"#ffffff",earth:"#ffffff",park_a:"#fcfcfc",park_b:"#fcfcfc",hospital:"#f8f8f8",industrial:"#fcfcfc",school:"#f8f8f8",wood_a:"#fafafa",wood_b:"#fafafa",pedestrian:"#fdfdfd",scrub_a:"#fafafa",scrub_b:"#fafafa",glacier:"#fcfcfc",sand:"#fafafa",beach:"#f6f6f6",aerodrome:"#fdfdfd",runway:"#efefef",water:"#dcdcdc",pier:"#f5f5f5",zoo:"#f7f7f7",military:"#fcfcfc",tunnel_other_casing:"#d6d6d6",tunnel_minor_casing:"#fcfcfc",tunnel_link_casing:"#fcfcfc",tunnel_medium_casing:"#fcfcfc",tunnel_major_casing:"#fcfcfc",tunnel_highway_casing:"#fcfcfc",tunnel_other:"#d6d6d6",tunnel_minor:"#d6d6d6",tunnel_link:"#d6d6d6",tunnel_medium:"#d6d6d6",tunnel_major:"#d6d6d6",tunnel_highway:"#d6d6d6",transit_pier:"#efefef",buildings:"#efefef",minor_service_casing:"#ffffff",minor_casing:"#ffffff",link_casing:"#ffffff",medium_casing:"#ffffff",major_casing_late:"#ffffff",highway_casing_late:"#ffffff",other:"#f5f5f5",minor_service:"#f5f5f5",minor_a:"#ebebeb",minor_b:"#f5f5f5",link:"#ebebeb",medium:"#ebebeb",major_casing_early:"#ffffff",major:"#ebebeb",highway_casing_early:"#ffffff",highway:"#ebebeb",railway:"#d6d6d6",boundaries:"#adadad",waterway_label:"#adadad",bridges_other_casing:"#ffffff",bridges_minor_casing:"#ffffff",bridges_link_casing:"#ffffff",bridges_medium_casing:"#ffffff",bridges_major_casing:"#ffffff",bridges_highway_casing:"#ffffff",bridges_other:"#f5f5f5",bridges_minor:"#f5f5f5",bridges_link:"#ebebeb",bridges_medium:"#ebebeb",bridges_major:"#ebebeb",bridges_highway:"#ebebeb",roads_label_minor:"#adadad",roads_label_minor_halo:"#ffffff",roads_label_major:"#999999",roads_label_major_halo:"#ffffff",ocean_label:"#adadad",peak_label:"#adadad",subplace_label:"#8f8f8f",subplace_label_halo:"#ffffff",city_circle:"#ffffff",city_circle_stroke:"#adadad",city_label:"#5c5c5c",city_label_halo:"#ffffff",state_label:"#b3b3b3",state_label_halo:"#ffffff",country_label:"#b8b8b8"},al={background:"#a3a3a3",earth:"#cccccc",park_a:"#c2c2c2",park_b:"#c2c2c2",hospital:"#d0d0d0",industrial:"#c6c6c6",school:"#d0d0d0",wood_a:"#c2c2c2",wood_b:"#c2c2c2",pedestrian:"#c4c4c4",scrub_a:"#c2c2c2",scrub_b:"#c2c2c2",glacier:"#d2d2d2",sand:"#d2d2d2",beach:"#d2d2d2",aerodrome:"#c9c9c9",runway:"#f5f5f5",water:"#a3a3a3",pier:"#b8b8b8",zoo:"#c7c7c7",military:"#bfbfbf",tunnel_other_casing:"#b8b8b8",tunnel_minor_casing:"#b8b8b8",tunnel_link_casing:"#b8b8b8",tunnel_medium_casing:"#b8b8b8",tunnel_major_casing:"#b8b8b8",tunnel_highway_casing:"#b8b8b8",tunnel_other:"#d6d6d6",tunnel_minor:"#d6d6d6",tunnel_link:"#d6d6d6",tunnel_medium:"#d6d6d6",tunnel_major:"#d6d6d6",tunnel_highway:"#d6d6d6",transit_pier:"#b8b8b8",buildings:"#e0e0e0",minor_service_casing:"#cccccc",minor_casing:"#cccccc",link_casing:"#cccccc",medium_casing:"#cccccc",major_casing_late:"#cccccc",highway_casing_late:"#cccccc",other:"#e0e0e0",minor_service:"#e0e0e0",minor_a:"#ebebeb",minor_b:"#e0e0e0",link:"#ebebeb",medium:"#ebebeb",major_casing_early:"#cccccc",major:"#ebebeb",highway_casing_early:"#cccccc",highway:"#ebebeb",railway:"#f5f5f5",boundaries:"#5c5c5c",waterway_label:"#7a7a7a",bridges_other_casing:"#cccccc",bridges_minor_casing:"#cccccc",bridges_link_casing:"#cccccc",bridges_medium_casing:"#cccccc",bridges_major_casing:"#cccccc",bridges_highway_casing:"#cccccc",bridges_other:"#e0e0e0",bridges_minor:"#e0e0e0",bridges_link:"#ebebeb",bridges_medium:"#ebebeb",bridges_major:"#ebebeb",bridges_highway:"#ebebeb",roads_label_minor:"#999999",roads_label_minor_halo:"#e0e0e0",roads_label_major:"#8f8f8f",roads_label_major_halo:"#ebebeb",ocean_label:"#7a7a7a",peak_label:"#5c5c5c",subplace_label:"#7a7a7a",subplace_label_halo:"#cccccc",city_circle:"#c2c2c2",city_circle_stroke:"#7a7a7a",city_label:"#474747",city_label_halo:"#cccccc",state_label:"#999999",state_label_halo:"#cccccc",country_label:"#858585"},hl={background:"#2b2b2b",earth:"#141414",park_a:"#181818",park_b:"#181818",hospital:"#1d1d1d",industrial:"#101010",school:"#111111",wood_a:"#1a1a1a",wood_b:"#1a1a1a",pedestrian:"#191919",scrub_a:"#1c1c1c",scrub_b:"#1c1c1c",glacier:"#191919",sand:"#161616",beach:"#1f1f1f",aerodrome:"#191919",runway:"#323232",water:"#333333",pier:"#0a0a0a",zoo:"#191919",military:"#121212",tunnel_other_casing:"#101010",tunnel_minor_casing:"#101010",tunnel_link_casing:"#101010",tunnel_medium_casing:"#101010",tunnel_major_casing:"#101010",tunnel_highway_casing:"#101010",tunnel_other:"#292929",tunnel_minor:"#292929",tunnel_link:"#292929",tunnel_medium:"#292929",tunnel_major:"#292929",tunnel_highway:"#292929",transit_pier:"#0a0a0a",buildings:"#0a0a0a",minor_service_casing:"#141414",minor_casing:"#141414",link_casing:"#141414",medium_casing:"#141414",major_casing_late:"#141414",highway_casing_late:"#141414",other:"#1f1f1f",minor_service:"#1f1f1f",minor_a:"#292929",minor_b:"#1f1f1f",link:"#1f1f1f",medium:"#292929",major_casing_early:"#141414",major:"#292929",highway_casing_early:"#141414",highway:"#292929",railway:"#292929",boundaries:"#707070",waterway_label:"#707070",bridges_other_casing:"#141414",bridges_minor_casing:"#141414",bridges_link_casing:"#141414",bridges_medium_casing:"#141414",bridges_major_casing:"#141414",bridges_highway_casing:"#141414",bridges_other:"#1f1f1f",bridges_minor:"#1f1f1f",bridges_link:"#292929",bridges_medium:"#292929",bridges_major:"#292929",bridges_highway:"#292929",roads_label_minor:"#525252",roads_label_minor_halo:"#141414",roads_label_major:"#5c5c5c",roads_label_major_halo:"#141414",ocean_label:"#707070",peak_label:"#707070",subplace_label:"#5c5c5c",subplace_label_halo:"#141414",city_circle:"#000000",city_circle_stroke:"#666666",city_label:"#999999",city_label_halo:"#141414",state_label:"#3d3d3d",state_label_halo:"#141414",country_label:"#707070"},Fi={light:rl,dark:ol,white:sl,grayscale:al,black:hl};var qo=Kr(Wo(),1);var Yo=function(r,i,o,a){function h(u){return u instanceof o?u:new o(function(c){c(u)})}return new(o||(o=Promise))(function(u,c){function d(v){try{p(a.next(v))}catch(x){c(x)}}function m(v){try{p(a.throw(v))}catch(x){c(x)}}function p(v){v.done?u(v.value):h(v.value).then(d,m)}p((a=a.apply(r,i||[])).next())})},Ni=(r,i,o)=>{let a=[];for(let h of r){let u=[];for(let c of h)u.push(c.clone().mult(i).add(o));a.push(u)}return a},Ri=(r,i)=>{let o=1<<i;return r<0?o+r:r>=o?r%o:r},Zn=class{constructor(i,o,a){this.tileCache=i,this.maxDataLevel=o,this.levelDiff=a}dataTilesForBounds(i,o){let a=Math.pow(2,i)/Math.pow(2,Math.ceil(i)),h=[],u=1,c=this.tileCache.tileSize;if(i<this.levelDiff)u=1/(1<<this.levelDiff-i)*a,h.push({dataTile:{z:0,x:0,y:0},origin:new Y(0,0),scale:u,dim:c*u});else if(i<=this.levelDiff+this.maxDataLevel){let d=1<<this.levelDiff,m=256*a,p=Math.ceil(i)-this.levelDiff,v=Math.floor(o.minX/d/m),x=Math.floor(o.minY/d/m),k=Math.floor(o.maxX/d/m),T=Math.floor(o.maxY/d/m);for(let E=v;E<=k;E++)for(let Z=x;Z<=T;Z++){let g=new Y(E*d*m,Z*d*m);h.push({dataTile:{z:p,x:Ri(E,p),y:Ri(Z,p)},origin:g,scale:a,dim:c*a})}}else{let d=1<<this.levelDiff;u=(1<<Math.ceil(i)-this.maxDataLevel-this.levelDiff)*a;let m=Math.floor(o.minX/d/256/u),p=Math.floor(o.minY/d/256/u),v=Math.floor(o.maxX/d/256/u),x=Math.floor(o.maxY/d/256/u);for(let k=m;k<=v;k++)for(let T=p;T<=x;T++){let E=new Y(k*d*256*u,T*d*256*u);h.push({dataTile:{z:this.maxDataLevel,x:Ri(k,this.maxDataLevel),y:Ri(T,this.maxDataLevel)},origin:E,scale:u,dim:c*u})}}return h}dataTileForDisplayTile(i){let o,a=1,h=this.tileCache.tileSize,u;if(i.z<this.levelDiff)o={z:0,x:0,y:0},a=1/(1<<this.levelDiff-i.z),u=new Y(0,0),h=h*a;else if(i.z<=this.levelDiff+this.maxDataLevel){let c=1<<this.levelDiff;o={z:i.z-this.levelDiff,x:Math.floor(i.x/c),y:Math.floor(i.y/c)},u=new Y(o.x*c*256,o.y*c*256)}else{a=1<<i.z-this.maxDataLevel-this.levelDiff;let c=1<<this.levelDiff;o={z:this.maxDataLevel,x:Math.floor(i.x/c/a),y:Math.floor(i.y/c/a)},u=new Y(o.x*c*a*256,o.y*c*a*256),h=h*a}return{dataTile:o,scale:a,origin:u,dim:h}}getBbox(i,o){return Yo(this,void 0,void 0,function*(){let a=this.dataTilesForBounds(i,o);return(yield Promise.all(a.map(u=>this.tileCache.get(u.dataTile)))).map((u,c)=>{let d=a[c];return{data:u,z:i,dataTile:d.dataTile,scale:d.scale,dim:d.dim,origin:d.origin}})})}getDisplayTile(i){return Yo(this,void 0,void 0,function*(){let o=this.dataTileForDisplayTile(i);return{data:yield this.tileCache.get(o.dataTile),z:i.z,dataTile:o.dataTile,scale:o.scale,origin:o.origin,dim:o.dim}})}queryFeatures(i,o,a,h){let u=Math.round(a),c=Math.min(u-this.levelDiff,this.maxDataLevel),d=h/(1<<u-c);return this.tileCache.queryFeatures(i,o,c,d)}},Xo=r=>{let i=a=>{let h=a.levelDiff===void 0?1:a.levelDiff,u=a.maxDataZoom||15,c;if(typeof a.url=="string")new URL(a.url,"http://example.com").pathname.endsWith(".pmtiles")?c=new Xe(a.url,!0):c=new Ci(a.url,!0);else if(a.url)c=new Xe(a.url,!0);else throw new Error(`Invalid source ${a.url}`);let d=new Ei(c,256*1<<h);return new Zn(d,u,h)},o=new Map;if(r.sources)for(let a in r.sources)o.set(a,i(r.sources[a]));else o.set("",i(r));return o};var ll=(r,i,o)=>{let h=i/256,u=Math.floor(o.minX/256),c=Math.floor(o.minY/256),d=Math.floor(o.maxX/256),m=Math.floor(o.maxY/256),p=Math.log2(h),v=[];for(let x=u;x<=d;x++){let k=x%(1<<r);for(let T=c;T<=m;T++)v.push({display:qt({z:r,x:k,y:T}),key:qt({z:r-p,x:Math.floor(k/h),y:Math.floor(T/h)})})}return v},Fn=class{constructor(i,o){this.tree=new qo.default,this.current=new Map,this.dim=i,this.maxLabeledTiles=o}hasPrefix(i){for(let o of this.current.keys())if(o.startsWith(i))return!0;return!1}has(i){return this.current.has(i)}size(){return this.current.size}keys(){return this.current.keys()}searchBbox(i,o){let a=new Set;for(let h of this.tree.search(i))h.indexedLabel.order<=o&&a.add(h.indexedLabel);return a}searchLabel(i,o){let a=new Set;for(let h of i.bboxes)for(let u of this.tree.search(h))u.indexedLabel.order<=o&&a.add(u.indexedLabel);return a}bboxCollides(i,o){for(let a of this.tree.search(i))if(a.indexedLabel.order<=o)return!0;return!1}labelCollides(i,o){for(let a of i.bboxes)for(let h of this.tree.search(a))if(h.indexedLabel.order<=o)return!0;return!1}deduplicationCollides(i){if(!i.deduplicationKey||!i.deduplicationDistance)return!1;let o=i.deduplicationDistance,a={minX:i.anchor.x-o,minY:i.anchor.y-o,maxX:i.anchor.x+o,maxY:i.anchor.y+o};for(let h of this.tree.search(a))if(h.indexedLabel.deduplicationKey===i.deduplicationKey&&h.indexedLabel.anchor.dist(i.anchor)<o)return!0;return!1}makeEntry(i){this.current.get(i)&&console.log("consistency error 1");let o=new Set;this.current.set(i,o)}insert(i,o,a){let h={anchor:i.anchor,bboxes:i.bboxes,draw:i.draw,order:o,tileKey:a,deduplicationKey:i.deduplicationKey,deduplicationDistance:i.deduplicationDistance},u=this.current.get(a);if(!u){let m=new Set;this.current.set(a,m),u=m}u.add(h);let c=!1,d=!1;for(let m of i.bboxes)this.tree.insert({minX:m.minX,minY:m.minY,maxX:m.maxX,maxY:m.maxY,indexedLabel:h}),m.minX<0&&(c=!0),m.maxX>this.dim&&(d=!0);if(c||d){let m=c?this.dim:-this.dim,p=[];for(let k of i.bboxes)p.push({minX:k.minX+m,minY:k.minY,maxX:k.maxX+m,maxY:k.maxY});let v={anchor:new Y(i.anchor.x+m,i.anchor.y),bboxes:p,draw:i.draw,order:o,tileKey:a},x=this.current.get(a);x&&x.add(v);for(let k of p)this.tree.insert({minX:k.minX,minY:k.minY,maxX:k.maxX,maxY:k.maxY,indexedLabel:v})}}pruneOrNoop(i){let o=i.split(":"),a,h=0,u=0;for(let c of this.current.keys()){let d=c.split(":");if(d[3]===o[3]){u++;let m=Math.sqrt(Math.pow(+d[0]-+o[0],2)+Math.pow(+d[1]-+o[1],2));m>h&&(h=m,a=c)}a&&u>this.maxLabeledTiles&&this.pruneKey(a)}}pruneKey(i){let o=this.current.get(i);if(!o)return;let a=[];for(let h of this.tree.all())o.has(h.indexedLabel)&&a.push(h);for(let h of a)this.tree.remove(h);this.current.delete(i)}removeLabel(i){let o=[];for(let h of this.tree.all())i===h.indexedLabel&&o.push(h);for(let h of o)this.tree.remove(h);let a=this.current.get(i.tileKey);a&&a.delete(i)}},Rn=class{constructor(i,o,a,h,u){this.index=new Fn(256*1<<i,h),this.z=i,this.scratch=o,this.labelRules=a,this.callback=u}layout(i){let o=performance.now(),a=new Set;for(let[u,c]of i)for(let d of c){let m=`${qt(d.dataTile)}:${u}`;this.index.has(m)||(this.index.makeEntry(m),a.add(m))}let h=new Set;for(let[u,c]of this.labelRules.entries()){if(c.visible===!1||c.minzoom&&this.z<c.minzoom||c.maxzoom&&this.z>c.maxzoom)continue;let d=c.dataSource||"",m=i.get(d);if(m)for(let p of m){let v=`${qt(p.dataTile)}:${d}`;if(!a.has(v))continue;let x=p.data.get(c.dataLayer);if(x===void 0)continue;let k=x;c.sort&&k.sort((E,Z)=>c.sort?c.sort(E.props,Z.props):0);let T={index:this.index,zoom:this.z,scratch:this.scratch,order:u,overzoom:this.z-p.dataTile.z};for(let E of k){if(c.filter&&!c.filter(this.z,E))continue;let Z=Ni(E.geom,p.scale,p.origin),g=c.symbolizer.place(T,Z,E);if(g)for(let y of g){let b=!1;if(!(y.deduplicationKey&&this.index.deduplicationCollides(y))){if(this.index.labelCollides(y,1/0)){if(!this.index.labelCollides(y,u)){let C=this.index.searchLabel(y,1/0);for(let z of C){this.index.removeLabel(z);for(let S of z.bboxes)this.findInvalidatedTiles(h,p.dim,S,v)}this.index.insert(y,u,v),b=!0}}else this.index.insert(y,u,v),b=!0;if(b)for(let C of y.bboxes)(C.maxX>p.origin.x+p.dim||C.minX<p.origin.x||C.minY<p.origin.y||C.maxY>p.origin.y+p.dim)&&this.findInvalidatedTiles(h,p.dim,C,v)}}}}}for(let u of a)this.index.pruneOrNoop(u);return h.size>0&&this.callback&&this.callback(h),performance.now()-o}findInvalidatedTiles(i,o,a,h){let u=ll(this.z,o,a);for(let c of u)c.key!==h&&this.index.hasPrefix(c.key)&&i.add(c.display)}add(i){let o=!0;for(let[h,u]of i)for(let c of u)this.index.has(`${qt(c.dataTile)}:${h}`)||(o=!1);return o?0:this.layout(i)}},$e=class{constructor(i,o,a,h){this.labelers=new Map,this.scratch=i,this.labelRules=o,this.maxLabeledTiles=a,this.callback=h}add(i,o){let a=this.labelers.get(i);return a||(a=new Rn(i,this.scratch,this.labelRules,this.maxLabeledTiles,this.callback),this.labelers.set(i,a)),a.add(o)}getIndex(i){let o=this.labelers.get(i);if(o)return o.index}};function $o(r,i,o,a,h,u,c,d,m){let p=performance.now();r.save(),r.miterLimit=2;for(let v of h){if(v.minzoom&&i<v.minzoom||v.maxzoom&&i>v.maxzoom)continue;let x=o.get(v.dataSource||"");if(x)for(let k of x){let T=k.data.get(v.dataLayer);if(T===void 0)continue;v.symbolizer.before&&v.symbolizer.before(r,k.z);let E=k.origin,Z=k.dim,g=k.scale;if(r.save(),d){r.beginPath();let y=Math.max(E.x-c.x,u.minX-c.x),b=Math.max(E.y-c.y,u.minY-c.y),C=Math.min(E.x-c.x+Z,u.maxX-c.x),z=Math.min(E.y-c.y+Z,u.maxY-c.y);r.rect(y,b,C-y,z-b),r.clip()}r.translate(E.x-c.x,E.y-c.y);for(let y of T){let b=y.geom,C=y.bbox;C.maxX*g+E.x<u.minX||C.minX*g+E.x>u.maxX||C.minY*g+E.y>u.maxY||C.maxY*g+E.y<u.minY||v.filter&&!v.filter(k.z,y)||(g!==1&&(b=Ni(b,g,new Y(0,0))),v.symbolizer.draw(r,b,k.z,y))}r.restore()}}if(d&&(r.beginPath(),r.rect(u.minX-c.x,u.minY-c.y,u.maxX-u.minX,u.maxY-u.minY),r.clip()),a){let v=a.searchBbox(u,1/0);for(let x of v)if(r.save(),r.translate(x.anchor.x-c.x,x.anchor.y-c.y),x.draw(r),r.restore(),m){r.lineWidth=.5,r.strokeStyle=m,r.fillStyle=m,r.globalAlpha=1,r.fillRect(x.anchor.x-c.x-2,x.anchor.y-c.y-2,4,4);for(let k of x.bboxes)r.strokeRect(k.minX-c.x,k.minY-c.y,k.maxX-k.minX,k.maxY-k.minY)}}return r.restore(),performance.now()-p}var ul=function(r,i,o,a){function h(u){return u instanceof o?u:new o(function(c){c(u)})}return new(o||(o=Promise))(function(u,c){function d(v){try{p(a.next(v))}catch(x){c(x)}}function m(v){try{p(a.throw(v))}catch(x){c(x)}}function p(v){v.done?u(v.value):h(v.value).then(d,m)}p((a=a.apply(r,i||[])).next())})},cl=r=>new Promise(i=>{setTimeout(()=>{i()},r)}),fl=r=>r.then(i=>({status:"fulfilled",value:i}),i=>({status:"rejected",reason:i})),Go=(r={})=>{class i extends L.GridLayer{constructor(a={}){if(a.noWrap&&!a.bounds&&(a.bounds=[[-90,-180],[90,180]]),a.attribution==null&&(a.attribution='<a href="https://protomaps.com">Protomaps</a> \xA9 <a href="https://openstreetmap.org/copyright">OpenStreetMap</a>'),super(a),a.theme){let u=Fi[a.theme];this.paintRules=Di(u),this.labelRules=Zi(u),this.backgroundColor=u.background}else this.paintRules=a.paintRules||[],this.labelRules=a.labelRules||[],this.backgroundColor=a.backgroundColor;this.lastRequestedZ=void 0,this.tasks=a.tasks||[],this.views=Xo(a),this.debug=a.debug;let h=document.createElement("canvas").getContext("2d");this.scratch=h,this.onTilesInvalidated=u=>{for(let c of u)this.rerenderTile(c)},this.labelers=new $e(this.scratch,this.labelRules,16,this.onTilesInvalidated),this.tileSize=256*window.devicePixelRatio,this.tileDelay=a.tileDelay||3,this.lang=a.lang}renderTile(a,h,u,c=()=>{}){return ul(this,void 0,void 0,function*(){this.lastRequestedZ=a.z;let d=[];for(let[B,D]of this.views){let O=D.getDisplayTile(a);d.push({key:B,promise:O})}let m=yield Promise.all(d.map(B=>B.promise.then(D=>({status:"fulfilled",value:D,key:B.key}),D=>({status:"rejected",reason:D,key:B.key})))),p=new Map;for(let B of m)B.status==="fulfilled"?p.set(B.key,[B.value]):B.reason.name==="AbortError"||console.error(B.reason);if(h.key!==u||this.lastRequestedZ!==a.z||(yield Promise.all(this.tasks.map(fl)),h.key!==u)||this.lastRequestedZ!==a.z)return;let v=this.labelers.add(a.z,p);if(h.key!==u||this.lastRequestedZ!==a.z)return;let x=this.labelers.getIndex(a.z);if(!this._map)return;let k=this._map.getCenter().wrap(),T=this._getTiledPixelBounds(k),Z=this._pxBoundsToTileRange(T).getCenter(),g=a.distanceTo(Z)*this.tileDelay;if(yield cl(g),h.key!==u||this.lastRequestedZ!==a.z)return;let y=16,b={minX:256*a.x-y,minY:256*a.y-y,maxX:256*(a.x+1)+y,maxY:256*(a.y+1)+y},C=new Y(256*a.x,256*a.y);h.width=this.tileSize,h.height=this.tileSize;let z=h.getContext("2d");if(!z){console.error("Failed to get Canvas context");return}z.setTransform(this.tileSize/256,0,0,this.tileSize/256,0,0),z.clearRect(0,0,256,256),this.backgroundColor&&(z.save(),z.fillStyle=this.backgroundColor,z.fillRect(0,0,256,256),z.restore());let S=0,A=this.paintRules;if(S=$o(z,a.z,p,this.xray?null:x,A,b,C,!1,this.debug),this.debug){z.save(),z.fillStyle=this.debug,z.font="600 12px sans-serif",z.fillText(`${a.z} ${a.x} ${a.y}`,4,14),z.font="12px sans-serif";let B=28;for(let[D,O]of p){let V=O[0].dataTile;z.fillText(`${D+(D?" ":"")+V.z} ${V.x} ${V.y}`,4,B),B+=14}z.font="600 10px sans-serif",S>8&&(z.fillText(`${S.toFixed()} ms paint`,4,B),B+=14),v>8&&z.fillText(`${v.toFixed()} ms layout`,4,B),z.strokeStyle=this.debug,z.lineWidth=.5,z.beginPath(),z.moveTo(0,0),z.lineTo(0,256),z.stroke(),z.lineWidth=.5,z.beginPath(),z.moveTo(0,0),z.lineTo(256,0),z.stroke(),z.restore()}c()})}rerenderTile(a){for(let h in this._tiles){let u=this._wrapCoords(this._keyToTileCoords(h));a===this._tileCoordsToKey(u)&&this.renderTile(u,this._tiles[h].el,a)}}queryTileFeaturesDebug(a,h,u=16){let c=new Map;for(let[d,m]of this.views)c.set(d,m.queryFeatures(a,h,this._map.getZoom(),u));return c}clearLayout(){this.labelers=new $e(this.scratch,this.labelRules,16,this.onTilesInvalidated)}rerenderTiles(){for(let a in this._tiles){let h=this._wrapCoords(this._keyToTileCoords(a)),u=this._tileCoordsToKey(h);this.renderTile(h,this._tiles[a].el,u)}}createTile(a,h){let u=L.DomUtil.create("canvas","leaflet-tile");u.lang=this.lang;let c=this._tileCoordsToKey(a);return u.key=c,this.renderTile(a,u,c,()=>{h(void 0,u)}),u}_removeTile(a){let h=this._tiles[a];h&&(h.el.removed=!0,h.el.key=void 0,L.DomUtil.removeClass(h.el,"leaflet-tile-loaded"),h.el.width=h.el.height=0,L.DomUtil.remove(h.el),delete this._tiles[a],this.fire("tileunload",{tile:h.el,coords:this._keyToTileCoords(a)}))}}return new i(r)};function dl(r,i){let o=Fi[i];o&&(r.options.theme=i,r.paintRules=Di(o),r.labelRules=Zi(o),r.backgroundColor=o.background,r.clearLayout(),r.rerenderTiles())}async function _l(){let r=await yi(),i={url:r.service.options.url,attribution:r.service.options.attribution};_o({layerFunction:Go,layerOptions:i,options:r,setLayerStyle:dl})}_l();})();
/*! For license information please see Protomaps-Leaflet.js.LEGAL.txt */
//# sourceMappingURL=Protomaps-Leaflet.js.map
