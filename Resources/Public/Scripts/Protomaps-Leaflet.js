(()=>{var _a=Object.create;var pn=Object.defineProperty;var pa=Object.getOwnPropertyDescriptor;var ga=Object.getOwnPropertyNames;var ya=Object.getPrototypeOf,va=Object.prototype.hasOwnProperty;var ba=(o,i,r)=>i in o?pn(o,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[i]=r;var Yr=(o,i)=>()=>(i||o((i={exports:{}}).exports,i),i.exports);var xa=(o,i,r,a)=>{if(i&&typeof i=="object"||typeof i=="function")for(let l of ga(i))!va.call(o,l)&&l!==r&&pn(o,l,{get:()=>i[l],enumerable:!(a=pa(i,l))||a.enumerable});return o};var Xr=(o,i,r)=>(r=o!=null?_a(ya(o)):{},xa(i||!o||!o.__esModule?pn(r,"default",{value:o,enumerable:!0}):r,o));var S=(o,i,r)=>ba(o,typeof i!="symbol"?i+"":i,r);var ao=Yr((gi,so)=>{(function(o,i){typeof gi=="object"&&typeof so<"u"?i(gi):typeof define=="function"&&define.amd?define(["exports"],i):(o=typeof globalThis<"u"?globalThis:o||self,i(o.leaflet={}))})(gi,(function(o){"use strict";var i="1.9.4";function r(t){var e,n,s,h;for(n=1,s=arguments.length;n<s;n++){h=arguments[n];for(e in h)t[e]=h[e]}return t}var a=Object.create||(function(){function t(){}return function(e){return t.prototype=e,new t}})();function l(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var s=n.call(arguments,2);return function(){return t.apply(e,s.length?s.concat(n.call(arguments)):arguments)}}var u=0;function c(t){return"_leaflet_id"in t||(t._leaflet_id=++u),t._leaflet_id}function d(t,e,n){var s,h,f,m;return m=function(){s=!1,h&&(f.apply(n,h),h=!1)},f=function(){s?h=arguments:(t.apply(n,arguments),setTimeout(m,e),s=!0)},f}function _(t,e,n){var s=e[1],h=e[0],f=s-h;return t===s&&n?t:((t-h)%f+f)%f+h}function p(){return!1}function v(t,e){if(e===!1)return t;var n=Math.pow(10,e===void 0?6:e);return Math.round(t*n)/n}function w(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function T(t){return w(t).split(/\s+/)}function z(t,e){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?a(t.options):{});for(var n in e)t.options[n]=e[n];return t.options}function A(t,e,n){var s=[];for(var h in t)s.push(encodeURIComponent(n?h.toUpperCase():h)+"="+encodeURIComponent(t[h]));return(!e||e.indexOf("?")===-1?"?":"&")+s.join("&")}var R=/\{ *([\w_ -]+) *\}/g;function g(t,e){return t.replace(R,function(n,s){var h=e[s];if(h===void 0)throw new Error("No value provided for variable "+n);return typeof h=="function"&&(h=h(e)),h})}var y=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function x(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var C="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function O(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var k=0;function E(t){var e=+new Date,n=Math.max(0,16-(e-k));return k=e+n,window.setTimeout(t,n)}var F=window.requestAnimationFrame||O("RequestAnimationFrame")||E,B=window.cancelAnimationFrame||O("CancelAnimationFrame")||O("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function I(t,e,n){if(n&&F===E)t.call(e);else return F.call(window,l(t,e))}function V(t){t&&B.call(window,t)}var $={__proto__:null,extend:r,create:a,bind:l,get lastId(){return u},stamp:c,throttle:d,wrapNum:_,falseFn:p,formatNum:v,trim:w,splitWords:T,setOptions:z,getParamString:A,template:g,isArray:y,indexOf:x,emptyImageUrl:C,requestFn:F,cancelFn:B,requestAnimFrame:I,cancelAnimFrame:V};function et(){}et.extend=function(t){var e=function(){z(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=e.__super__=this.prototype,s=a(n);s.constructor=e,e.prototype=s;for(var h in this)Object.prototype.hasOwnProperty.call(this,h)&&h!=="prototype"&&h!=="__super__"&&(e[h]=this[h]);return t.statics&&r(e,t.statics),t.includes&&(Zt(t.includes),r.apply(null,[s].concat(t.includes))),r(s,t),delete s.statics,delete s.includes,s.options&&(s.options=n.options?a(n.options):{},r(s.options,t.options)),s._initHooks=[],s.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var f=0,m=s._initHooks.length;f<m;f++)s._initHooks[f].call(this)}},e},et.include=function(t){var e=this.prototype.options;return r(this.prototype,t),t.options&&(this.prototype.options=e,this.mergeOptions(t.options)),this},et.mergeOptions=function(t){return r(this.prototype.options,t),this},et.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n=typeof t=="function"?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};function Zt(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=y(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ot={on:function(t,e,n){if(typeof t=="object")for(var s in t)this._on(s,t[s],e);else{t=T(t);for(var h=0,f=t.length;h<f;h++)this._on(t[h],e,n)}return this},off:function(t,e,n){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var s in t)this._off(s,t[s],e);else{t=T(t);for(var h=arguments.length===1,f=0,m=t.length;f<m;f++)h?this._off(t[f]):this._off(t[f],e,n)}return this},_on:function(t,e,n,s){if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}if(this._listens(t,e,n)===!1){n===this&&(n=void 0);var h={fn:e,ctx:n};s&&(h.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(h)}},_off:function(t,e,n){var s,h,f;if(this._events&&(s=this._events[t],!!s)){if(arguments.length===1){if(this._firingCount)for(h=0,f=s.length;h<f;h++)s[h].fn=p;delete this._events[t];return}if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}var m=this._listens(t,e,n);if(m!==!1){var b=s[m];this._firingCount&&(b.fn=p,this._events[t]=s=s.slice()),s.splice(m,1)}}},fire:function(t,e,n){if(!this.listens(t,n))return this;var s=r({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var h=this._events[t];if(h){this._firingCount=this._firingCount+1||1;for(var f=0,m=h.length;f<m;f++){var b=h[f],P=b.fn;b.once&&this.off(t,P,b.ctx),P.call(b.ctx||this,s)}this._firingCount--}}return n&&this._propagateEvent(s),this},listens:function(t,e,n,s){typeof t!="string"&&console.warn('"string" type argument expected');var h=e;typeof e!="function"&&(s=!!e,h=void 0,n=void 0);var f=this._events&&this._events[t];if(f&&f.length&&this._listens(t,h,n)!==!1)return!0;if(s){for(var m in this._eventParents)if(this._eventParents[m].listens(t,e,n,s))return!0}return!1},_listens:function(t,e,n){if(!this._events)return!1;var s=this._events[t]||[];if(!e)return!!s.length;n===this&&(n=void 0);for(var h=0,f=s.length;h<f;h++)if(s[h].fn===e&&s[h].ctx===n)return h;return!1},once:function(t,e,n){if(typeof t=="object")for(var s in t)this._on(s,t[s],e,!0);else{t=T(t);for(var h=0,f=t.length;h<f;h++)this._on(t[h],e,n,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[c(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[c(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,r({layer:t.target,propagatedFrom:t.target},t),!0)}};ot.addEventListener=ot.on,ot.removeEventListener=ot.clearAllEventListeners=ot.off,ot.addOneTimeEventListener=ot.once,ot.fireEvent=ot.fire,ot.hasEventListeners=ot.listens;var ft=et.extend(ot);function j(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var $t=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};j.prototype={clone:function(){return new j(this.x,this.y)},add:function(t){return this.clone()._add(Z(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(Z(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new j(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new j(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=$t(this.x),this.y=$t(this.y),this},distanceTo:function(t){t=Z(t);var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return t=Z(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=Z(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function Z(t,e,n){return t instanceof j?t:y(t)?new j(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new j(t.x,t.y):new j(t,e,n)}function J(t,e){if(t)for(var n=e?[t,e]:t,s=0,h=n.length;s<h;s++)this.extend(n[s])}J.prototype={extend:function(t){var e,n;if(!t)return this;if(t instanceof j||typeof t[0]=="number"||"x"in t)e=n=Z(t);else if(t=it(t),e=t.min,n=t.max,!e||!n)return this;return!this.min&&!this.max?(this.min=e.clone(),this.max=n.clone()):(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)),this},getCenter:function(t){return Z((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return Z(this.min.x,this.max.y)},getTopRight:function(){return Z(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return typeof t[0]=="number"||t instanceof j?t=Z(t):t=it(t),t instanceof J?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=it(t);var e=this.min,n=this.max,s=t.min,h=t.max,f=h.x>=e.x&&s.x<=n.x,m=h.y>=e.y&&s.y<=n.y;return f&&m},overlaps:function(t){t=it(t);var e=this.min,n=this.max,s=t.min,h=t.max,f=h.x>e.x&&s.x<n.x,m=h.y>e.y&&s.y<n.y;return f&&m},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var e=this.min,n=this.max,s=Math.abs(e.x-n.x)*t,h=Math.abs(e.y-n.y)*t;return it(Z(e.x-s,e.y-h),Z(n.x+s,n.y+h))},equals:function(t){return t?(t=it(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function it(t,e){return!t||t instanceof J?t:new J(t,e)}function dt(t,e){if(t)for(var n=e?[t,e]:t,s=0,h=n.length;s<h;s++)this.extend(n[s])}dt.prototype={extend:function(t){var e=this._southWest,n=this._northEast,s,h;if(t instanceof Q)s=t,h=t;else if(t instanceof dt){if(s=t._southWest,h=t._northEast,!s||!h)return this}else return t?this.extend(W(t)||nt(t)):this;return!e&&!n?(this._southWest=new Q(s.lat,s.lng),this._northEast=new Q(h.lat,h.lng)):(e.lat=Math.min(s.lat,e.lat),e.lng=Math.min(s.lng,e.lng),n.lat=Math.max(h.lat,n.lat),n.lng=Math.max(h.lng,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,s=Math.abs(e.lat-n.lat)*t,h=Math.abs(e.lng-n.lng)*t;return new dt(new Q(e.lat-s,e.lng-h),new Q(n.lat+s,n.lng+h))},getCenter:function(){return new Q((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Q(this.getNorth(),this.getWest())},getSouthEast:function(){return new Q(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof Q||"lat"in t?t=W(t):t=nt(t);var e=this._southWest,n=this._northEast,s,h;return t instanceof dt?(s=t.getSouthWest(),h=t.getNorthEast()):s=h=t,s.lat>=e.lat&&h.lat<=n.lat&&s.lng>=e.lng&&h.lng<=n.lng},intersects:function(t){t=nt(t);var e=this._southWest,n=this._northEast,s=t.getSouthWest(),h=t.getNorthEast(),f=h.lat>=e.lat&&s.lat<=n.lat,m=h.lng>=e.lng&&s.lng<=n.lng;return f&&m},overlaps:function(t){t=nt(t);var e=this._southWest,n=this._northEast,s=t.getSouthWest(),h=t.getNorthEast(),f=h.lat>e.lat&&s.lat<n.lat,m=h.lng>e.lng&&s.lng<n.lng;return f&&m},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return t?(t=nt(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function nt(t,e){return t instanceof dt?t:new dt(t,e)}function Q(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,n!==void 0&&(this.alt=+n)}Q.prototype={equals:function(t,e){if(!t)return!1;t=W(t);var n=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return n<=(e===void 0?1e-9:e)},toString:function(t){return"LatLng("+v(this.lat,t)+", "+v(this.lng,t)+")"},distanceTo:function(t){return Tt.distance(this,W(t))},wrap:function(){return Tt.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return nt([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new Q(this.lat,this.lng,this.alt)}};function W(t,e,n){return t instanceof Q?t:y(t)&&typeof t[0]!="object"?t.length===3?new Q(t[0],t[1],t[2]):t.length===2?new Q(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new Q(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===void 0?null:new Q(t,e,n)}var xt={latLngToPoint:function(t,e){var n=this.projection.project(t),s=this.scale(e);return this.transformation._transform(n,s)},pointToLatLng:function(t,e){var n=this.scale(e),s=this.transformation.untransform(t,n);return this.projection.unproject(s)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t),s=this.transformation.transform(e.min,n),h=this.transformation.transform(e.max,n);return new J(s,h)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?_(t.lng,this.wrapLng,!0):t.lng,n=this.wrapLat?_(t.lat,this.wrapLat,!0):t.lat,s=t.alt;return new Q(n,e,s)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),s=e.lat-n.lat,h=e.lng-n.lng;if(s===0&&h===0)return t;var f=t.getSouthWest(),m=t.getNorthEast(),b=new Q(f.lat-s,f.lng-h),P=new Q(m.lat-s,m.lng-h);return new dt(b,P)}},Tt=r({},xt,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,s=t.lat*n,h=e.lat*n,f=Math.sin((e.lat-t.lat)*n/2),m=Math.sin((e.lng-t.lng)*n/2),b=f*f+Math.cos(s)*Math.cos(h)*m*m,P=2*Math.atan2(Math.sqrt(b),Math.sqrt(1-b));return this.R*P}}),ie=6378137,ne={R:ie,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,s=Math.max(Math.min(n,t.lat),-n),h=Math.sin(s*e);return new j(this.R*t.lng*e,this.R*Math.log((1+h)/(1-h))/2)},unproject:function(t){var e=180/Math.PI;return new Q((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(function(){var t=ie*Math.PI;return new J([-t,-t],[t,t])})()};function be(t,e,n,s){if(y(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=e,this._c=n,this._d=s}be.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new j((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};function Ut(t,e,n,s){return new be(t,e,n,s)}var re=r({},Tt,{code:"EPSG:3857",projection:ne,transformation:(function(){var t=.5/(Math.PI*ne.R);return Ut(t,.5,-t,.5)})()}),Xe=r({},re,{code:"EPSG:900913"});function Fn(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Zn(t,e){var n="",s,h,f,m,b,P;for(s=0,f=t.length;s<f;s++){for(b=t[s],h=0,m=b.length;h<m;h++)P=b[h],n+=(h?"L":"M")+P.x+" "+P.y;n+=e?N.svg?"z":"x":""}return n||"M0 0"}var Zi=document.documentElement.style,qe="ActiveXObject"in window,Yo=qe&&!document.addEventListener,Rn="msLaunchUri"in navigator&&!("documentMode"in document),Ri=Bt("webkit"),Nn=Bt("android"),jn=Bt("android 2")||Bt("android 3"),Xo=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),qo=Nn&&Bt("Google")&&Xo<537&&!("AudioNode"in window),Ni=!!window.opera,Vn=!Rn&&Bt("chrome"),Hn=Bt("gecko")&&!Ri&&!Ni&&!qe,$o=!Vn&&Bt("safari"),Un=Bt("phantom"),Wn="OTransition"in Zi,Ko=navigator.platform.indexOf("Win")===0,Yn=qe&&"transition"in Zi,ji="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!jn,Xn="MozPerspective"in Zi,Go=!window.L_DISABLE_3D&&(Yn||ji||Xn)&&!Wn&&!Un,xe=typeof orientation<"u"||Bt("mobile"),Jo=xe&&Ri,Qo=xe&&ji,qn=!window.PointerEvent&&window.MSPointerEvent,$n=!!(window.PointerEvent||qn),Kn="ontouchstart"in window||!!window.TouchEvent,ts=!window.L_NO_TOUCH&&(Kn||$n),es=xe&&Ni,is=xe&&Hn,ns=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,rs=(function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",p,e),window.removeEventListener("testPassiveEventSupport",p,e)}catch{}return t})(),os=(function(){return!!document.createElement("canvas").getContext})(),Vi=!!(document.createElementNS&&Fn("svg").createSVGRect),ss=!!Vi&&(function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),as=!Vi&&(function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&typeof e.adj=="object"}catch{return!1}})(),ls=navigator.platform.indexOf("Mac")===0,hs=navigator.platform.indexOf("Linux")===0;function Bt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var N={ie:qe,ielt9:Yo,edge:Rn,webkit:Ri,android:Nn,android23:jn,androidStock:qo,opera:Ni,chrome:Vn,gecko:Hn,safari:$o,phantom:Un,opera12:Wn,win:Ko,ie3d:Yn,webkit3d:ji,gecko3d:Xn,any3d:Go,mobile:xe,mobileWebkit:Jo,mobileWebkit3d:Qo,msPointer:qn,pointer:$n,touch:ts,touchNative:Kn,mobileOpera:es,mobileGecko:is,retina:ns,passiveEvents:rs,canvas:os,svg:Vi,vml:as,inlineSvg:ss,mac:ls,linux:hs},Gn=N.msPointer?"MSPointerDown":"pointerdown",Jn=N.msPointer?"MSPointerMove":"pointermove",Qn=N.msPointer?"MSPointerUp":"pointerup",tr=N.msPointer?"MSPointerCancel":"pointercancel",Hi={touchstart:Gn,touchmove:Jn,touchend:Qn,touchcancel:tr},er={touchstart:_s,touchmove:$e,touchend:$e,touchcancel:$e},oe={},ir=!1;function us(t,e,n){return e==="touchstart"&&ms(),er[e]?(n=er[e].bind(this,n),t.addEventListener(Hi[e],n,!1),n):(console.warn("wrong event specified:",e),p)}function cs(t,e,n){if(!Hi[e]){console.warn("wrong event specified:",e);return}t.removeEventListener(Hi[e],n,!1)}function fs(t){oe[t.pointerId]=t}function ds(t){oe[t.pointerId]&&(oe[t.pointerId]=t)}function nr(t){delete oe[t.pointerId]}function ms(){ir||(document.addEventListener(Gn,fs,!0),document.addEventListener(Jn,ds,!0),document.addEventListener(Qn,nr,!0),document.addEventListener(tr,nr,!0),ir=!0)}function $e(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){e.touches=[];for(var n in oe)e.touches.push(oe[n]);e.changedTouches=[e],t(e)}}function _s(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&_t(e),$e(t,e)}function ps(t){var e={},n,s;for(s in t)n=t[s],e[s]=n&&n.bind?n.bind(t):n;return t=e,e.type="dblclick",e.detail=2,e.isTrusted=!1,e._simulated=!0,e}var gs=200;function ys(t,e){t.addEventListener("dblclick",e);var n=0,s;function h(f){if(f.detail!==1){s=f.detail;return}if(!(f.pointerType==="mouse"||f.sourceCapabilities&&!f.sourceCapabilities.firesTouchEvents)){var m=lr(f);if(!(m.some(function(P){return P instanceof HTMLLabelElement&&P.attributes.for})&&!m.some(function(P){return P instanceof HTMLInputElement||P instanceof HTMLSelectElement}))){var b=Date.now();b-n<=gs?(s++,s===2&&e(ps(f))):s=1,n=b}}}return t.addEventListener("click",h),{dblclick:e,simDblclick:h}}function vs(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}var Ui=Je(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),we=Je(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),rr=we==="webkitTransition"||we==="OTransition"?we+"End":"transitionend";function or(t){return typeof t=="string"?document.getElementById(t):t}function Le(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||n==="auto")&&document.defaultView){var s=document.defaultView.getComputedStyle(t,null);n=s?s[e]:null}return n==="auto"?null:n}function G(t,e,n){var s=document.createElement(t);return s.className=e||"",n&&n.appendChild(s),s}function st(t){var e=t.parentNode;e&&e.removeChild(t)}function Ke(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function se(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function ae(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function Wi(t,e){if(t.classList!==void 0)return t.classList.contains(e);var n=Ge(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function Y(t,e){if(t.classList!==void 0)for(var n=T(e),s=0,h=n.length;s<h;s++)t.classList.add(n[s]);else if(!Wi(t,e)){var f=Ge(t);Yi(t,(f?f+" ":"")+e)}}function ht(t,e){t.classList!==void 0?t.classList.remove(e):Yi(t,w((" "+Ge(t)+" ").replace(" "+e+" "," ")))}function Yi(t,e){t.className.baseVal===void 0?t.className=e:t.className.baseVal=e}function Ge(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function kt(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&bs(t,e)}function bs(t,e){var n=!1,s="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(s)}catch{if(e===1)return}e=Math.round(e*100),n?(n.Enabled=e!==100,n.Opacity=e):t.style.filter+=" progid:"+s+"(opacity="+e+")"}function Je(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function Kt(t,e,n){var s=e||new j(0,0);t.style[Ui]=(N.ie3d?"translate("+s.x+"px,"+s.y+"px)":"translate3d("+s.x+"px,"+s.y+"px,0)")+(n?" scale("+n+")":"")}function ut(t,e){t._leaflet_pos=e,N.any3d?Kt(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function Gt(t){return t._leaflet_pos||new j(0,0)}var Pe,Te,Xi;if("onselectstart"in document)Pe=function(){U(window,"selectstart",_t)},Te=function(){rt(window,"selectstart",_t)};else{var ke=Je(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Pe=function(){if(ke){var t=document.documentElement.style;Xi=t[ke],t[ke]="none"}},Te=function(){ke&&(document.documentElement.style[ke]=Xi,Xi=void 0)}}function qi(){U(window,"dragstart",_t)}function $i(){rt(window,"dragstart",_t)}var Qe,Ki;function Gi(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(ti(),Qe=t,Ki=t.style.outlineStyle,t.style.outlineStyle="none",U(window,"keydown",ti))}function ti(){Qe&&(Qe.style.outlineStyle=Ki,Qe=void 0,Ki=void 0,rt(window,"keydown",ti))}function sr(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Ji(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var xs={__proto__:null,TRANSFORM:Ui,TRANSITION:we,TRANSITION_END:rr,get:or,getStyle:Le,create:G,remove:st,empty:Ke,toFront:se,toBack:ae,hasClass:Wi,addClass:Y,removeClass:ht,setClass:Yi,getClass:Ge,setOpacity:kt,testProp:Je,setTransform:Kt,setPosition:ut,getPosition:Gt,get disableTextSelection(){return Pe},get enableTextSelection(){return Te},disableImageDrag:qi,enableImageDrag:$i,preventOutline:Gi,restoreOutline:ti,getSizedParentNode:sr,getScale:Ji};function U(t,e,n,s){if(e&&typeof e=="object")for(var h in e)tn(t,h,e[h],n);else{e=T(e);for(var f=0,m=e.length;f<m;f++)tn(t,e[f],n,s)}return this}var It="_leaflet_events";function rt(t,e,n,s){if(arguments.length===1)ar(t),delete t[It];else if(e&&typeof e=="object")for(var h in e)en(t,h,e[h],n);else if(e=T(e),arguments.length===2)ar(t,function(b){return x(e,b)!==-1});else for(var f=0,m=e.length;f<m;f++)en(t,e[f],n,s);return this}function ar(t,e){for(var n in t[It]){var s=n.split(/\d/)[0];(!e||e(s))&&en(t,s,null,null,n)}}var Qi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function tn(t,e,n,s){var h=e+c(n)+(s?"_"+c(s):"");if(t[It]&&t[It][h])return this;var f=function(b){return n.call(s||t,b||window.event)},m=f;!N.touchNative&&N.pointer&&e.indexOf("touch")===0?f=us(t,e,f):N.touch&&e==="dblclick"?f=ys(t,f):"addEventListener"in t?e==="touchstart"||e==="touchmove"||e==="wheel"||e==="mousewheel"?t.addEventListener(Qi[e]||e,f,N.passiveEvents?{passive:!1}:!1):e==="mouseenter"||e==="mouseleave"?(f=function(b){b=b||window.event,rn(t,b)&&m(b)},t.addEventListener(Qi[e],f,!1)):t.addEventListener(e,m,!1):t.attachEvent("on"+e,f),t[It]=t[It]||{},t[It][h]=f}function en(t,e,n,s,h){h=h||e+c(n)+(s?"_"+c(s):"");var f=t[It]&&t[It][h];if(!f)return this;!N.touchNative&&N.pointer&&e.indexOf("touch")===0?cs(t,e,f):N.touch&&e==="dblclick"?vs(t,f):"removeEventListener"in t?t.removeEventListener(Qi[e]||e,f,!1):t.detachEvent("on"+e,f),t[It][h]=null}function Jt(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function nn(t){return tn(t,"wheel",Jt),this}function ze(t){return U(t,"mousedown touchstart dblclick contextmenu",Jt),t._leaflet_disable_click=!0,this}function _t(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Qt(t){return _t(t),Jt(t),this}function lr(t){if(t.composedPath)return t.composedPath();for(var e=[],n=t.target;n;)e.push(n),n=n.parentNode;return e}function hr(t,e){if(!e)return new j(t.clientX,t.clientY);var n=Ji(e),s=n.boundingClientRect;return new j((t.clientX-s.left)/n.x-e.clientLeft,(t.clientY-s.top)/n.y-e.clientTop)}var ws=N.linux&&N.chrome?window.devicePixelRatio:N.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ur(t){return N.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/ws:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function rn(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch{return!1}return n!==t}var Ls={__proto__:null,on:U,off:rt,stopPropagation:Jt,disableScrollPropagation:nn,disableClickPropagation:ze,preventDefault:_t,stop:Qt,getPropagationPath:lr,getMousePosition:hr,getWheelDelta:ur,isExternalTarget:rn,addListener:U,removeListener:rt},cr=ft.extend({run:function(t,e,n,s){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(s||.5,.2),this._startPos=Gt(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=I(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=this._duration*1e3;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),ut(this._el,n),this.fire("step")},_complete:function(){V(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),K=ft.extend({options:{crs:re,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=z(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==void 0&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==void 0&&this.setView(W(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=we&&N.any3d&&!N.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),U(this._proxy,rr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,n){if(e=e===void 0?this._zoom:this._limitZoom(e),t=this._limitCenter(W(t),e,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&n!==!0){n.animate!==void 0&&(n.zoom=r({animate:n.animate},n.zoom),n.pan=r({animate:n.animate,duration:n.duration},n.pan));var s=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan);if(s)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e,n.pan&&n.pan.noMoveStart),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(N.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(N.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var s=this.getZoomScale(e),h=this.getSize().divideBy(2),f=t instanceof j?t:this.latLngToContainerPoint(t),m=f.subtract(h).multiplyBy(1-1/s),b=this.containerPointToLatLng(h.add(m));return this.setView(b,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():nt(t);var n=Z(e.paddingTopLeft||e.padding||[0,0]),s=Z(e.paddingBottomRight||e.padding||[0,0]),h=this.getBoundsZoom(t,!1,n.add(s));if(h=typeof e.maxZoom=="number"?Math.min(e.maxZoom,h):h,h===1/0)return{center:t.getCenter(),zoom:h};var f=s.subtract(n).divideBy(2),m=this.project(t.getSouthWest(),h),b=this.project(t.getNorthEast(),h),P=this.unproject(m.add(b).divideBy(2).add(f),h);return{center:P,zoom:h}},fitBounds:function(t,e){if(t=nt(t),!t.isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=Z(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new cr,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){Y(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(n=n||{},n.animate===!1||!N.any3d)return this.setView(t,e,n);this._stop();var s=this.project(this.getCenter()),h=this.project(t),f=this.getSize(),m=this._zoom;t=W(t),e=e===void 0?m:e;var b=Math.max(f.x,f.y),P=b*this.getZoomScale(m,e),M=h.distanceTo(s)||1,D=1.42,H=D*D;function q(ct){var fi=ct?-1:1,ca=ct?P:b,fa=P*P-b*b+fi*H*H*M*M,da=2*ca*H*M,_n=fa/da,Wr=Math.sqrt(_n*_n+1)-_n,ma=Wr<1e-9?-18:Math.log(Wr);return ma}function yt(ct){return(Math.exp(ct)-Math.exp(-ct))/2}function mt(ct){return(Math.exp(ct)+Math.exp(-ct))/2}function Mt(ct){return yt(ct)/mt(ct)}var bt=q(0);function de(ct){return b*(mt(bt)/mt(bt+D*ct))}function aa(ct){return b*(mt(bt)*Mt(bt+D*ct)-yt(bt))/H}function la(ct){return 1-Math.pow(1-ct,1.5)}var ha=Date.now(),Hr=(q(1)-bt)/D,ua=n.duration?1e3*n.duration:1e3*Hr*.8;function Ur(){var ct=(Date.now()-ha)/ua,fi=la(ct)*Hr;ct<=1?(this._flyToFrame=I(Ur,this),this._move(this.unproject(s.add(h.subtract(s).multiplyBy(aa(fi)/M)),m),this.getScaleZoom(b/de(fi),m),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),Ur.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return t=nt(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),s=this._limitCenter(n,this._zoom,nt(t));return n.equals(s)||this.panTo(s,e),this._enforcingBounds=!1,this},panInside:function(t,e){e=e||{};var n=Z(e.paddingTopLeft||e.padding||[0,0]),s=Z(e.paddingBottomRight||e.padding||[0,0]),h=this.project(this.getCenter()),f=this.project(t),m=this.getPixelBounds(),b=it([m.min.add(n),m.max.subtract(s)]),P=b.getSize();if(!b.contains(f)){this._enforcingBounds=!0;var M=f.subtract(b.getCenter()),D=b.extend(f).getSize().subtract(P);h.x+=M.x<0?-D.x:D.x,h.y+=M.y<0?-D.y:D.y,this.panTo(this.unproject(h),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=r({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),s=e.divideBy(2).round(),h=n.divideBy(2).round(),f=s.subtract(h);return!f.x&&!f.y?this:(t.animate&&t.pan?this.panBy(f):(t.pan&&this._rawPanBy(f),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=r({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=l(this._handleGeolocationResponse,this),n=l(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,n=t.message||(e===1?"permission denied":e===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=t.coords.latitude,n=t.coords.longitude,s=new Q(e,n),h=s.toBounds(t.coords.accuracy*2),f=this._locateOptions;if(f.setView){var m=this.getBoundsZoom(h);this.setView(s,f.maxZoom?Math.min(m,f.maxZoom):m)}var b={latlng:s,bounds:h,timestamp:t.timestamp};for(var P in t.coords)typeof t.coords[P]=="number"&&(b[P]=t.coords[P]);this.fire("locationfound",b)}},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),st(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(V(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)st(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),s=G("div",n,e||this._mapPane);return t&&(this._panes[t]=s),s},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new dt(e,n)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=nt(t),n=Z(n||[0,0]);var s=this.getZoom()||0,h=this.getMinZoom(),f=this.getMaxZoom(),m=t.getNorthWest(),b=t.getSouthEast(),P=this.getSize().subtract(n),M=it(this.project(b,s),this.project(m,s)).getSize(),D=N.any3d?this.options.zoomSnap:1,H=P.x/M.x,q=P.y/M.y,yt=e?Math.max(H,q):Math.min(H,q);return s=this.getScaleZoom(yt,s),D&&(s=Math.round(s/(D/100))*(D/100),s=e?Math.ceil(s/D)*D:Math.floor(s/D)*D),Math.max(h,Math.min(f,s))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new j(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new J(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=e===void 0?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=e===void 0?this._zoom:e;var s=n.zoom(t*n.scale(e));return isNaN(s)?1/0:s},project:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.latLngToPoint(W(t),e)},unproject:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.pointToLatLng(Z(t),e)},layerPointToLatLng:function(t){var e=Z(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(W(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(W(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(nt(t))},distance:function(t,e){return this.options.crs.distance(W(t),W(e))},containerPointToLayerPoint:function(t){return Z(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return Z(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(Z(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(W(t)))},mouseEventToContainerPoint:function(t){return hr(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=or(t);if(e){if(e._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");U(e,"scroll",this._onScroll,this),this._containerId=c(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&N.any3d,Y(t,"leaflet-container"+(N.touch?" leaflet-touch":"")+(N.retina?" leaflet-retina":"")+(N.ielt9?" leaflet-oldie":"")+(N.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=Le(t,"position");e!=="absolute"&&e!=="relative"&&e!=="fixed"&&e!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ut(this._mapPane,new j(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Y(t.markerPane,"leaflet-zoom-hide"),Y(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,n){ut(this._mapPane,new j(0,0));var s=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var h=this._zoom!==e;this._moveStart(h,n)._move(t,e)._moveEnd(h),this.fire("viewreset"),s&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n,s){e===void 0&&(e=this._zoom);var h=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),s?n&&n.pinch&&this.fire("zoom",n):((h||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return V(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){ut(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[c(this._container)]=this;var e=t?rt:U;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),N.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){V(this._resizeRequest),this._resizeRequest=I(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n=[],s,h=e==="mouseout"||e==="mouseover",f=t.target||t.srcElement,m=!1;f;){if(s=this._targets[c(f)],s&&(e==="click"||e==="preclick")&&this._draggableMoved(s)){m=!0;break}if(s&&s.listens(e,!0)&&(h&&!rn(f,t)||(n.push(s),h))||f===this._container)break;f=f.parentNode}return!n.length&&!m&&!h&&this.listens(e,!0)&&(n=[this]),n},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(e))){var n=t.type;n==="mousedown"&&Gi(e),this._fireDOMEvent(t,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,n){if(t.type==="click"){var s=r({},t);s.type="preclick",this._fireDOMEvent(s,s.type,n)}var h=this._findEventTargets(t,e);if(n){for(var f=[],m=0;m<n.length;m++)n[m].listens(e,!0)&&f.push(n[m]);h=f.concat(h)}if(h.length){e==="contextmenu"&&_t(t);var b=h[0],P={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var M=b.getLatLng&&(!b._radius||b._radius<=10);P.containerPoint=M?this.latLngToContainerPoint(b.getLatLng()):this.mouseEventToContainerPoint(t),P.layerPoint=this.containerPointToLayerPoint(P.containerPoint),P.latlng=M?b.getLatLng():this.layerPointToLatLng(P.layerPoint)}for(m=0;m<h.length;m++)if(h[m].fire(e,P,!0),P.originalEvent._stopped||h[m].options.bubblingMouseEvents===!1&&x(this._mouseEvents,e)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return Gt(this._mapPane)||new j(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var n=t&&e!==void 0?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return n.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var s=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(s)},_latLngBoundsToNewLayerBounds:function(t,e,n){var s=this._getNewPixelOrigin(n,e);return it([this.project(t.getSouthWest(),e)._subtract(s),this.project(t.getNorthWest(),e)._subtract(s),this.project(t.getSouthEast(),e)._subtract(s),this.project(t.getNorthEast(),e)._subtract(s)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var s=this.project(t,e),h=this.getSize().divideBy(2),f=new J(s.subtract(h),s.add(h)),m=this._getBoundsOffset(f,n,e);return Math.abs(m.x)<=1&&Math.abs(m.y)<=1?t:this.unproject(s.add(m),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),s=new J(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(s,e))},_getBoundsOffset:function(t,e,n){var s=it(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),h=s.min.subtract(t.min),f=s.max.subtract(t.max),m=this._rebound(h.x,-f.x),b=this._rebound(h.y,-f.y);return new j(m,b)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),s=N.any3d?this.options.zoomSnap:1;return s&&(t=Math.round(t/s)*s),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ht(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return(e&&e.animate)!==!0&&!this.getSize().contains(n)?!1:(this.panBy(n,e),!0)},_createAnimProxy:function(){var t=this._proxy=G("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var n=Ui,s=this._proxy.style[n];Kt(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),s===this._proxy.style[n]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){st(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();Kt(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||n.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var s=this.getZoomScale(e),h=this._getCenterOffset(t)._divideBy(1-1/s);return n.animate!==!0&&!this.getSize().contains(h)?!1:(I(function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,n,s){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,Y(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:s}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ht(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ps(t,e){return new K(t,e)}var Ct=et.extend({options:{position:"topright"},initialize:function(t){z(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),s=t._controlCorners[n];return Y(e,"leaflet-control"),n.indexOf("bottom")!==-1?s.insertBefore(e,s.firstChild):s.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(st(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Me=function(t){return new Ct(t)};K.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=G("div",e+"control-container",this._container);function s(h,f){var m=e+h+" "+e+f;t[h+f]=G("div",m,n)}s("top","left"),s("top","right"),s("bottom","left"),s("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)st(this._controlCorners[t]);st(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var fr=Ct.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,s){return n<s?-1:s<n?1:0}},initialize:function(t,e,n){z(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var s in t)this._addLayer(t[s],s);for(s in e)this._addLayer(e[s],s,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Ct.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(c(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){Y(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(Y(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):ht(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ht(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=G("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),ze(e),nn(e);var s=this._section=G("section",t+"-list");n&&(this._map.on("click",this.collapse,this),U(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var h=this._layersLink=G("a",t+"-toggle",e);h.href="#",h.title="Layers",h.setAttribute("role","button"),U(h,{keydown:function(f){f.keyCode===13&&this._expandSafely()},click:function(f){_t(f),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=G("div",t+"-base",s),this._separator=G("div",t+"-separator",s),this._overlaysList=G("div",t+"-overlays",s),e.appendChild(s)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&c(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(l(function(s,h){return this.options.sortFunction(s.layer,h.layer,s.name,h.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ke(this._baseLayersList),Ke(this._overlaysList),this._layerControlInputs=[];var t,e,n,s,h=0;for(n=0;n<this._layers.length;n++)s=this._layers[n],this._addItem(s),e=e||s.overlay,t=t||!s.overlay,h+=s.overlay?0:1;return this.options.hideSingleBase&&(t=t&&h>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(c(t.target)),n=e.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",s=document.createElement("div");return s.innerHTML=n,s.firstChild},_addItem:function(t){var e=document.createElement("label"),n=this._map.hasLayer(t.layer),s;t.overlay?(s=document.createElement("input"),s.type="checkbox",s.className="leaflet-control-layers-selector",s.defaultChecked=n):s=this._createRadioElement("leaflet-base-layers_"+c(this),n),this._layerControlInputs.push(s),s.layerId=c(t.layer),U(s,"click",this._onInputClick,this);var h=document.createElement("span");h.innerHTML=" "+t.name;var f=document.createElement("span");e.appendChild(f),f.appendChild(s),f.appendChild(h);var m=t.overlay?this._overlaysList:this._baseLayersList;return m.appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,e,n,s=[],h=[];this._handlingClick=!0;for(var f=t.length-1;f>=0;f--)e=t[f],n=this._getLayer(e.layerId).layer,e.checked?s.push(n):e.checked||h.push(n);for(f=0;f<h.length;f++)this._map.hasLayer(h[f])&&this._map.removeLayer(h[f]);for(f=0;f<s.length;f++)this._map.hasLayer(s[f])||this._map.addLayer(s[f]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,e,n,s=this._map.getZoom(),h=t.length-1;h>=0;h--)e=t[h],n=this._getLayer(e.layerId).layer,e.disabled=n.options.minZoom!==void 0&&s<n.options.minZoom||n.options.maxZoom!==void 0&&s>n.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,U(t,"click",_t),this.expand();var e=this;setTimeout(function(){rt(t,"click",_t),e._preventClick=!1})}}),Ts=function(t,e,n){return new fr(t,e,n)},on=Ct.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=G("div",e+" leaflet-bar"),s=this.options;return this._zoomInButton=this._createButton(s.zoomInText,s.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(s.zoomOutText,s.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,s,h){var f=G("a",n,s);return f.innerHTML=t,f.href="#",f.title=e,f.setAttribute("role","button"),f.setAttribute("aria-label",e),ze(f),U(f,"click",Qt),U(f,"click",h,this),U(f,"click",this._refocusOnMap,this),f},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";ht(this._zoomInButton,e),ht(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(Y(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(Y(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});K.mergeOptions({zoomControl:!0}),K.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new on,this.addControl(this.zoomControl))});var ks=function(t){return new on(t)},dr=Ct.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=G("div",e),s=this.options;return this._addScales(s,e+"-line",n),t.on(s.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=G("div",e,n)),t.imperial&&(this._iScale=G("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e=t*3.2808399,n,s,h;e>5280?(n=e/5280,s=this._getRoundNum(n),this._updateScale(this._iScale,s+" mi",s/n)):(h=this._getRoundNum(e),this._updateScale(this._iScale,h+" ft",h/e))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,e*n}}),zs=function(t){return new dr(t)},Ms='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',sn=Ct.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(N.inlineSvg?Ms+" ":"")+"Leaflet</a>"},initialize:function(t){z(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=G("div","leaflet-control-attribution"),ze(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});K.mergeOptions({attributionControl:!0}),K.addInitHook(function(){this.options.attributionControl&&new sn().addTo(this)});var Ss=function(t){return new sn(t)};Ct.Layers=fr,Ct.Zoom=on,Ct.Scale=dr,Ct.Attribution=sn,Me.layers=Ts,Me.zoom=ks,Me.scale=zs,Me.attribution=Ss;var Dt=et.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Dt.addTo=function(t,e){return t.addHandler(e,this),this};var Cs={Events:ot},mr=N.touch?"touchstart mousedown":"mousedown",Wt=ft.extend({options:{clickTolerance:3},initialize:function(t,e,n,s){z(this,s),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(U(this._dragStartTarget,mr,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Wt._dragging===this&&this.finishDrag(!0),rt(this._dragStartTarget,mr,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!Wi(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){Wt._dragging===this&&this.finishDrag();return}if(!(Wt._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(Wt._dragging=this,this._preventOutline&&Gi(this._element),qi(),Pe(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t,n=sr(this._element);this._startPoint=new j(e.clientX,e.clientY),this._startPos=Gt(this._element),this._parentScale=Ji(n);var s=t.type==="mousedown";U(document,s?"mousemove":"touchmove",this._onMove,this),U(document,s?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var e=t.touches&&t.touches.length===1?t.touches[0]:t,n=new j(e.clientX,e.clientY)._subtract(this._startPoint);!n.x&&!n.y||Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,_t(t),this._moved||(this.fire("dragstart"),this._moved=!0,Y(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Y(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),ut(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){ht(document.body,"leaflet-dragging"),this._lastTarget&&(ht(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),rt(document,"mousemove touchmove",this._onMove,this),rt(document,"mouseup touchend touchcancel",this._onUp,this),$i(),Te();var e=this._moved&&this._moving;this._moving=!1,Wt._dragging=!1,e&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function _r(t,e,n){var s,h=[1,4,2,8],f,m,b,P,M,D,H,q;for(f=0,D=t.length;f<D;f++)t[f]._code=te(t[f],e);for(b=0;b<4;b++){for(H=h[b],s=[],f=0,D=t.length,m=D-1;f<D;m=f++)P=t[f],M=t[m],P._code&H?M._code&H||(q=ei(M,P,H,e,n),q._code=te(q,e),s.push(q)):(M._code&H&&(q=ei(M,P,H,e,n),q._code=te(q,e),s.push(q)),s.push(P));t=s}return t}function pr(t,e){var n,s,h,f,m,b,P,M,D;if(!t||t.length===0)throw new Error("latlngs not passed");zt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var H=W([0,0]),q=nt(t),yt=q.getNorthWest().distanceTo(q.getSouthWest())*q.getNorthEast().distanceTo(q.getNorthWest());yt<1700&&(H=an(t));var mt=t.length,Mt=[];for(n=0;n<mt;n++){var bt=W(t[n]);Mt.push(e.project(W([bt.lat-H.lat,bt.lng-H.lng])))}for(b=P=M=0,n=0,s=mt-1;n<mt;s=n++)h=Mt[n],f=Mt[s],m=h.y*f.x-f.y*h.x,P+=(h.x+f.x)*m,M+=(h.y+f.y)*m,b+=m*3;b===0?D=Mt[0]:D=[P/b,M/b];var de=e.unproject(Z(D));return W([de.lat+H.lat,de.lng+H.lng])}function an(t){for(var e=0,n=0,s=0,h=0;h<t.length;h++){var f=W(t[h]);e+=f.lat,n+=f.lng,s++}return W([e/s,n/s])}var As={__proto__:null,clipPolygon:_r,polygonCenter:pr,centroid:an};function gr(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=Bs(t,n),t=Es(t,n),t}function yr(t,e,n){return Math.sqrt(Se(t,e,n,!0))}function Os(t,e,n){return Se(t,e,n)}function Es(t,e){var n=t.length,s=typeof Uint8Array<"u"?Uint8Array:Array,h=new s(n);h[0]=h[n-1]=1,ln(t,h,e,0,n-1);var f,m=[];for(f=0;f<n;f++)h[f]&&m.push(t[f]);return m}function ln(t,e,n,s,h){var f=0,m,b,P;for(b=s+1;b<=h-1;b++)P=Se(t[b],t[s],t[h],!0),P>f&&(m=b,f=P);f>n&&(e[m]=1,ln(t,e,n,s,m),ln(t,e,n,m,h))}function Bs(t,e){for(var n=[t[0]],s=1,h=0,f=t.length;s<f;s++)Is(t[s],t[h])>e&&(n.push(t[s]),h=s);return h<f-1&&n.push(t[f-1]),n}var vr;function br(t,e,n,s,h){var f=s?vr:te(t,n),m=te(e,n),b,P,M;for(vr=m;;){if(!(f|m))return[t,e];if(f&m)return!1;b=f||m,P=ei(t,e,b,n,h),M=te(P,n),b===f?(t=P,f=M):(e=P,m=M)}}function ei(t,e,n,s,h){var f=e.x-t.x,m=e.y-t.y,b=s.min,P=s.max,M,D;return n&8?(M=t.x+f*(P.y-t.y)/m,D=P.y):n&4?(M=t.x+f*(b.y-t.y)/m,D=b.y):n&2?(M=P.x,D=t.y+m*(P.x-t.x)/f):n&1&&(M=b.x,D=t.y+m*(b.x-t.x)/f),new j(M,D,h)}function te(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function Is(t,e){var n=e.x-t.x,s=e.y-t.y;return n*n+s*s}function Se(t,e,n,s){var h=e.x,f=e.y,m=n.x-h,b=n.y-f,P=m*m+b*b,M;return P>0&&(M=((t.x-h)*m+(t.y-f)*b)/P,M>1?(h=n.x,f=n.y):M>0&&(h+=m*M,f+=b*M)),m=t.x-h,b=t.y-f,s?m*m+b*b:new j(h,f)}function zt(t){return!y(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function xr(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),zt(t)}function wr(t,e){var n,s,h,f,m,b,P,M;if(!t||t.length===0)throw new Error("latlngs not passed");zt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var D=W([0,0]),H=nt(t),q=H.getNorthWest().distanceTo(H.getSouthWest())*H.getNorthEast().distanceTo(H.getNorthWest());q<1700&&(D=an(t));var yt=t.length,mt=[];for(n=0;n<yt;n++){var Mt=W(t[n]);mt.push(e.project(W([Mt.lat-D.lat,Mt.lng-D.lng])))}for(n=0,s=0;n<yt-1;n++)s+=mt[n].distanceTo(mt[n+1])/2;if(s===0)M=mt[0];else for(n=0,f=0;n<yt-1;n++)if(m=mt[n],b=mt[n+1],h=m.distanceTo(b),f+=h,f>s){P=(f-s)/h,M=[b.x-P*(b.x-m.x),b.y-P*(b.y-m.y)];break}var bt=e.unproject(Z(M));return W([bt.lat+D.lat,bt.lng+D.lng])}var Ds={__proto__:null,simplify:gr,pointToSegmentDistance:yr,closestPointOnSegment:Os,clipSegment:br,_getEdgeIntersection:ei,_getBitCode:te,_sqClosestPointOnSegment:Se,isFlat:zt,_flat:xr,polylineCenter:wr},hn={project:function(t){return new j(t.lng,t.lat)},unproject:function(t){return new Q(t.y,t.x)},bounds:new J([-180,-90],[180,90])},un={R:6378137,R_MINOR:6356752314245179e-9,bounds:new J([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var e=Math.PI/180,n=this.R,s=t.lat*e,h=this.R_MINOR/n,f=Math.sqrt(1-h*h),m=f*Math.sin(s),b=Math.tan(Math.PI/4-s/2)/Math.pow((1-m)/(1+m),f/2);return s=-n*Math.log(Math.max(b,1e-10)),new j(t.lng*e*n,s)},unproject:function(t){for(var e=180/Math.PI,n=this.R,s=this.R_MINOR/n,h=Math.sqrt(1-s*s),f=Math.exp(-t.y/n),m=Math.PI/2-2*Math.atan(f),b=0,P=.1,M;b<15&&Math.abs(P)>1e-7;b++)M=h*Math.sin(m),M=Math.pow((1-M)/(1+M),h/2),P=Math.PI/2-2*Math.atan(f*M)-m,m+=P;return new Q(m*e,t.x*e/n)}},Fs={__proto__:null,LonLat:hn,Mercator:un,SphericalMercator:ne},Zs=r({},Tt,{code:"EPSG:3395",projection:un,transformation:(function(){var t=.5/(Math.PI*un.R);return Ut(t,.5,-t,.5)})()}),Lr=r({},Tt,{code:"EPSG:4326",projection:hn,transformation:Ut(1/180,1,-1/180,.5)}),Rs=r({},xt,{projection:hn,transformation:Ut(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,s=e.lat-t.lat;return Math.sqrt(n*n+s*s)},infinite:!0});xt.Earth=Tt,xt.EPSG3395=Zs,xt.EPSG3857=re,xt.EPSG900913=Xe,xt.EPSG4326=Lr,xt.Simple=Rs;var At=ft.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[c(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[c(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});K.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=c(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=c(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return c(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){t=t?y(t)?t:[t]:[];for(var e=0,n=t.length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[c(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=c(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var s in this._zoomBoundLayers){var h=this._zoomBoundLayers[s].options;t=h.minZoom===void 0?t:Math.min(t,h.minZoom),e=h.maxZoom===void 0?e:Math.max(e,h.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var le=At.extend({initialize:function(t,e){z(this,e),this._layers={};var n,s;if(t)for(n=0,s=t.length;n<s;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){var e=typeof t=="number"?t:this.getLayerId(t);return e in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e=Array.prototype.slice.call(arguments,1),n,s;for(n in this._layers)s=this._layers[n],s[t]&&s[t].apply(s,e);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return c(t)}}),Ns=function(t,e){return new le(t,e)},Rt=le.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),le.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),le.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new dt;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),js=function(t,e){return new Rt(t,e)},he=et.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){z(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var s=this._createImg(n,e&&e.tagName==="IMG"?e:null);return this._setIconStyles(s,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(s.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),s},_setIconStyles:function(t,e){var n=this.options,s=n[e+"Size"];typeof s=="number"&&(s=[s,s]);var h=Z(s),f=Z(e==="shadow"&&n.shadowAnchor||n.iconAnchor||h&&h.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),f&&(t.style.marginLeft=-f.x+"px",t.style.marginTop=-f.y+"px"),h&&(t.style.width=h.x+"px",t.style.height=h.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return N.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Vs(t){return new he(t)}var Ce=he.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Ce.imagePath!="string"&&(Ce.imagePath=this._detectIconPath()),(this.options.imagePath||Ce.imagePath)+he.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(n,s,h){var f=s.exec(n);return f&&f[h]};return t=e(t,/^url\((['"])?(.+)\1\)$/,2),t&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=G("div","leaflet-default-icon-path",document.body),e=Le(t,"background-image")||Le(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e),e)return e;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-11-1):""}}),Pr=Dt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Wt(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Y(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ht(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,s=this._marker.options.autoPanSpeed,h=this._marker.options.autoPanPadding,f=Gt(e._icon),m=n.getPixelBounds(),b=n.getPixelOrigin(),P=it(m.min._subtract(b).add(h),m.max._subtract(b).subtract(h));if(!P.contains(f)){var M=Z((Math.max(P.max.x,f.x)-P.max.x)/(m.max.x-P.max.x)-(Math.min(P.min.x,f.x)-P.min.x)/(m.min.x-P.min.x),(Math.max(P.max.y,f.y)-P.max.y)/(m.max.y-P.max.y)-(Math.min(P.min.y,f.y)-P.min.y)/(m.min.y-P.min.y)).multiplyBy(s);n.panBy(M,{animate:!1}),this._draggable._newPos._add(M),this._draggable._startPos._add(M),ut(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=I(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(V(this._panRequest),this._panRequest=I(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,s=Gt(e._icon),h=e._map.layerPointToLatLng(s);n&&ut(n,s),e._latlng=h,t.latlng=h,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){V(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),ii=At.extend({options:{icon:new Ce,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){z(this,e),this._latlng=W(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=W(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),s=!1;n!==this._icon&&(this._icon&&this._removeIcon(),s=!0,t.title&&(n.title=t.title),n.tagName==="IMG"&&(n.alt=t.alt||"")),Y(n,e),t.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&U(n,"focus",this._panOnFocus,this);var h=t.icon.createShadow(this._shadow),f=!1;h!==this._shadow&&(this._removeShadow(),f=!0),h&&(Y(h,e),h.alt=""),this._shadow=h,t.opacity<1&&this._updateOpacity(),s&&this.getPane().appendChild(this._icon),this._initInteraction(),h&&f&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&rt(this._icon,"focus",this._panOnFocus,this),st(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&st(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&ut(this._icon,t),this._shadow&&ut(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(Y(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Pr)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Pr(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&kt(this._icon,t),this._shadow&&kt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,n=e.iconSize?Z(e.iconSize):Z(0,0),s=e.iconAnchor?Z(e.iconAnchor):Z(0,0);t.panInside(this._latlng,{paddingTopLeft:s,paddingBottomRight:n.subtract(s)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Hs(t,e){return new ii(t,e)}var Yt=At.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return z(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ni=Yt.extend({options:{fill:!0,radius:10},initialize:function(t,e){z(this,e),this._latlng=W(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=W(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Yt.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),s=[t+n,e+n];this._pxBounds=new J(this._point.subtract(s),this._point.add(s))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Us(t,e){return new ni(t,e)}var cn=ni.extend({initialize:function(t,e,n){if(typeof e=="number"&&(e=r({},n,{radius:e})),z(this,e),this._latlng=W(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new dt(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Yt.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,s=n.options.crs;if(s.distance===Tt.distance){var h=Math.PI/180,f=this._mRadius/Tt.R/h,m=n.project([e+f,t]),b=n.project([e-f,t]),P=m.add(b).divideBy(2),M=n.unproject(P).lat,D=Math.acos((Math.cos(f*h)-Math.sin(e*h)*Math.sin(M*h))/(Math.cos(e*h)*Math.cos(M*h)))/h;(isNaN(D)||D===0)&&(D=f/Math.cos(Math.PI/180*e)),this._point=P.subtract(n.getPixelOrigin()),this._radius=isNaN(D)?0:P.x-n.project([M,t-D]).x,this._radiusY=P.y-m.y}else{var H=s.unproject(s.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(H).x}this._updateBounds()}});function Ws(t,e,n){return new cn(t,e,n)}var Nt=Yt.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){z(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e=1/0,n=null,s=Se,h,f,m=0,b=this._parts.length;m<b;m++)for(var P=this._parts[m],M=1,D=P.length;M<D;M++){h=P[M-1],f=P[M];var H=s(t,h,f,!0);H<e&&(e=H,n=s(t,h,f))}return n&&(n.distance=Math.sqrt(e)),n},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return wr(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=W(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new dt,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return zt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=zt(t),s=0,h=t.length;s<h;s++)n?(e[s]=W(t[s]),this._bounds.extend(e[s])):e[s]=this._convertLatLngs(t[s]);return e},_project:function(){var t=new J;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new j(t,t);this._rawPxBounds&&(this._pxBounds=new J([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,n){var s=t[0]instanceof Q,h=t.length,f,m;if(s){for(m=[],f=0;f<h;f++)m[f]=this._map.latLngToLayerPoint(t[f]),n.extend(m[f]);e.push(m)}else for(f=0;f<h;f++)this._projectLatlngs(t[f],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var e=this._parts,n,s,h,f,m,b,P;for(n=0,h=0,f=this._rings.length;n<f;n++)for(P=this._rings[n],s=0,m=P.length;s<m-1;s++)b=br(P[s],P[s+1],t,s,!0),b&&(e[h]=e[h]||[],e[h].push(b[0]),(b[1]!==P[s+1]||s===m-2)&&(e[h].push(b[1]),h++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,s=t.length;n<s;n++)t[n]=gr(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,s,h,f,m,b,P=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,f=this._parts.length;n<f;n++)for(b=this._parts[n],s=0,m=b.length,h=m-1;s<m;h=s++)if(!(!e&&s===0)&&yr(t,b[h],b[s])<=P)return!0;return!1}});function Ys(t,e){return new Nt(t,e)}Nt._flat=xr;var ue=Nt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return pr(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=Nt.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof Q&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){Nt.prototype._setLatLngs.call(this,t),zt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return zt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new j(e,e);if(t=new J(t.min.subtract(n),t.max.add(n)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var s=0,h=this._rings.length,f;s<h;s++)f=_r(this._rings[s],t,!0),f.length&&this._parts.push(f)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e=!1,n,s,h,f,m,b,P,M;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(f=0,P=this._parts.length;f<P;f++)for(n=this._parts[f],m=0,M=n.length,b=M-1;m<M;b=m++)s=n[m],h=n[b],s.y>t.y!=h.y>t.y&&t.x<(h.x-s.x)*(t.y-s.y)/(h.y-s.y)+s.x&&(e=!e);return e||Nt.prototype._containsPoint.call(this,t,!0)}});function Xs(t,e){return new ue(t,e)}var jt=Rt.extend({initialize:function(t,e){z(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e=y(t)?t:t.features,n,s,h;if(e){for(n=0,s=e.length;n<s;n++)h=e[n],(h.geometries||h.geometry||h.features||h.coordinates)&&this.addData(h);return this}var f=this.options;if(f.filter&&!f.filter(t))return this;var m=ri(t,f);return m?(m.feature=ai(t),m.defaultOptions=m.options,this.resetStyle(m),f.onEachFeature&&f.onEachFeature(t,m),this.addLayer(m)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=r({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&(typeof e=="function"&&(e=e(t.feature)),t.setStyle(e))}});function ri(t,e){var n=t.type==="Feature"?t.geometry:t,s=n?n.coordinates:null,h=[],f=e&&e.pointToLayer,m=e&&e.coordsToLatLng||fn,b,P,M,D;if(!s&&!n)return null;switch(n.type){case"Point":return b=m(s),Tr(f,t,b,e);case"MultiPoint":for(M=0,D=s.length;M<D;M++)b=m(s[M]),h.push(Tr(f,t,b,e));return new Rt(h);case"LineString":case"MultiLineString":return P=oi(s,n.type==="LineString"?0:1,m),new Nt(P,e);case"Polygon":case"MultiPolygon":return P=oi(s,n.type==="Polygon"?1:2,m),new ue(P,e);case"GeometryCollection":for(M=0,D=n.geometries.length;M<D;M++){var H=ri({geometry:n.geometries[M],type:"Feature",properties:t.properties},e);H&&h.push(H)}return new Rt(h);case"FeatureCollection":for(M=0,D=n.features.length;M<D;M++){var q=ri(n.features[M],e);q&&h.push(q)}return new Rt(h);default:throw new Error("Invalid GeoJSON object.")}}function Tr(t,e,n,s){return t?t(e,n):new ii(n,s&&s.markersInheritOptions&&s)}function fn(t){return new Q(t[1],t[0],t[2])}function oi(t,e,n){for(var s=[],h=0,f=t.length,m;h<f;h++)m=e?oi(t[h],e-1,n):(n||fn)(t[h]),s.push(m);return s}function dn(t,e){return t=W(t),t.alt!==void 0?[v(t.lng,e),v(t.lat,e),v(t.alt,e)]:[v(t.lng,e),v(t.lat,e)]}function si(t,e,n,s){for(var h=[],f=0,m=t.length;f<m;f++)h.push(e?si(t[f],zt(t[f])?0:e-1,n,s):dn(t[f],s));return!e&&n&&h.length>0&&h.push(h[0].slice()),h}function ce(t,e){return t.feature?r({},t.feature,{geometry:e}):ai(e)}function ai(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var mn={toGeoJSON:function(t){return ce(this,{type:"Point",coordinates:dn(this.getLatLng(),t)})}};ii.include(mn),cn.include(mn),ni.include(mn),Nt.include({toGeoJSON:function(t){var e=!zt(this._latlngs),n=si(this._latlngs,e?1:0,!1,t);return ce(this,{type:(e?"Multi":"")+"LineString",coordinates:n})}}),ue.include({toGeoJSON:function(t){var e=!zt(this._latlngs),n=e&&!zt(this._latlngs[0]),s=si(this._latlngs,n?2:e?1:0,!0,t);return e||(s=[s]),ce(this,{type:(n?"Multi":"")+"Polygon",coordinates:s})}}),le.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(n){e.push(n.toGeoJSON(t).geometry.coordinates)}),ce(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(e==="MultiPoint")return this.toMultiPoint(t);var n=e==="GeometryCollection",s=[];return this.eachLayer(function(h){if(h.toGeoJSON){var f=h.toGeoJSON(t);if(n)s.push(f.geometry);else{var m=ai(f);m.type==="FeatureCollection"?s.push.apply(s,m.features):s.push(m)}}}),n?ce(this,{geometries:s,type:"GeometryCollection"}):{type:"FeatureCollection",features:s}}});function kr(t,e){return new jt(t,e)}var qs=kr,li=At.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=nt(e),z(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Y(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){st(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&se(this._image),this},bringToBack:function(){return this._map&&ae(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=nt(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",e=this._image=t?this._url:G("img");if(Y(e,"leaflet-image-layer"),this._zoomAnimated&&Y(e,"leaflet-zoom-animated"),this.options.className&&Y(e,this.options.className),e.onselectstart=p,e.onmousemove=p,e.onload=l(this.fire,this,"load"),e.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(e.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=e.src;return}e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Kt(this._image,n,e)},_reset:function(){var t=this._image,e=new J(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();ut(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){kt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),$s=function(t,e,n){return new li(t,e,n)},zr=li.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",e=this._image=t?this._url:G("video");if(Y(e,"leaflet-image-layer"),this._zoomAnimated&&Y(e,"leaflet-zoom-animated"),this.options.className&&Y(e,this.options.className),e.onselectstart=p,e.onmousemove=p,e.onloadeddata=l(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),s=[],h=0;h<n.length;h++)s.push(n[h].src);this._url=n.length>0?s:[e.src];return}y(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var f=0;f<this._url.length;f++){var m=G("source");m.src=this._url[f],e.appendChild(m)}}});function Ks(t,e,n){return new zr(t,e,n)}var Mr=li.extend({_initImage:function(){var t=this._image=this._url;Y(t,"leaflet-image-layer"),this._zoomAnimated&&Y(t,"leaflet-zoom-animated"),this.options.className&&Y(t,this.options.className),t.onselectstart=p,t.onmousemove=p}});function Gs(t,e,n){return new Mr(t,e,n)}var Ft=At.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof Q||y(t))?(this._latlng=W(t),z(this,e)):(z(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&kt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&kt(this._container,1),this.bringToFront(),this.options.interactive&&(Y(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(kt(this._container,0),this._removeTimeout=setTimeout(l(st,void 0,this._container),200)):st(this._container),this.options.interactive&&(ht(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=W(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&se(this._container),this},bringToBack:function(){return this._map&&ae(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof Rt){e=null;var n=this._source._layers;for(var s in n)if(n[s]._map){e=n[s];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else if(e.getBounds)t=e.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof e=="string")t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=Z(this.options.offset),n=this._getAnchor();this._zoomAnimated?ut(this._container,t.add(n)):e=e.add(t).add(n);var s=this._containerBottom=-e.y,h=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=s+"px",this._container.style.left=h+"px"}},_getAnchor:function(){return[0,0]}});K.include({_initOverlay:function(t,e,n,s){var h=e;return h instanceof t||(h=new t(s).setContent(e)),n&&h.setLatLng(n),h}}),At.include({_initOverlay:function(t,e,n,s){var h=n;return h instanceof t?(z(h,s),h._source=this):(h=e&&!s?e:new t(s,this),h.setContent(n)),h}});var hi=Ft.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Ft.prototype.openOn.call(this,t)},onAdd:function(t){Ft.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Yt||this._source.on("preclick",Jt))},onRemove:function(t){Ft.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Yt||this._source.off("preclick",Jt))},getEvents:function(){var t=Ft.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=G("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=G("div",t+"-content-wrapper",e);if(this._contentNode=G("div",t+"-content",n),ze(e),nn(this._contentNode),U(e,"contextmenu",Jt),this._tipContainer=G("div",t+"-tip-container",e),this._tip=G("div",t+"-tip",this._tipContainer),this.options.closeButton){var s=this._closeButton=G("a",t+"-close-button",e);s.setAttribute("role","button"),s.setAttribute("aria-label","Close popup"),s.href="#close",s.innerHTML='<span aria-hidden="true">&#215;</span>',U(s,"click",function(h){_t(h),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var s=t.offsetHeight,h=this.options.maxHeight,f="leaflet-popup-scrolled";h&&s>h?(e.height=h+"px",Y(t,f)):ht(t,f),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();ut(this._container,e.add(n))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,e=parseInt(Le(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,s=this._containerWidth,h=new j(this._containerLeft,-n-this._containerBottom);h._add(Gt(this._container));var f=t.layerPointToContainerPoint(h),m=Z(this.options.autoPanPadding),b=Z(this.options.autoPanPaddingTopLeft||m),P=Z(this.options.autoPanPaddingBottomRight||m),M=t.getSize(),D=0,H=0;f.x+s+P.x>M.x&&(D=f.x+s-M.x+P.x),f.x-D-b.x<0&&(D=f.x-b.x),f.y+n+P.y>M.y&&(H=f.y+n-M.y+P.y),f.y-H-b.y<0&&(H=f.y-b.y),(D||H)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([D,H]))}},_getAnchor:function(){return Z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Js=function(t,e){return new hi(t,e)};K.mergeOptions({closePopupOnClick:!0}),K.include({openPopup:function(t,e,n){return this._initOverlay(hi,t,e,n).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),At.include({bindPopup:function(t,e){return this._popup=this._initOverlay(hi,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Rt||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){Qt(t);var e=t.layer||t.target;if(this._popup._source===e&&!(e instanceof Yt)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=e,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var ui=Ft.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Ft.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Ft.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Ft.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=G("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,n,s=this._map,h=this._container,f=s.latLngToContainerPoint(s.getCenter()),m=s.layerPointToContainerPoint(t),b=this.options.direction,P=h.offsetWidth,M=h.offsetHeight,D=Z(this.options.offset),H=this._getAnchor();b==="top"?(e=P/2,n=M):b==="bottom"?(e=P/2,n=0):b==="center"?(e=P/2,n=M/2):b==="right"?(e=0,n=M/2):b==="left"?(e=P,n=M/2):m.x<f.x?(b="right",e=0,n=M/2):(b="left",e=P+(D.x+H.x)*2,n=M/2),t=t.subtract(Z(e,n,!0)).add(D).add(H),ht(h,"leaflet-tooltip-right"),ht(h,"leaflet-tooltip-left"),ht(h,"leaflet-tooltip-top"),ht(h,"leaflet-tooltip-bottom"),Y(h,"leaflet-tooltip-"+b),ut(h,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&kt(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return Z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Qs=function(t,e){return new ui(t,e)};K.include({openTooltip:function(t,e,n){return this._initOverlay(ui,t,e,n).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),At.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ui,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Rt||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&(U(e,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),U(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var e=this;this._map.once("moveend",function(){e._openOnceFlag=!1,e._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var e=t.latlng,n,s;this._tooltip.options.sticky&&t.originalEvent&&(n=this._map.mouseEventToContainerPoint(t.originalEvent),s=this._map.containerPointToLayerPoint(n),e=this._map.layerPointToLatLng(s)),this._tooltip.setLatLng(e)}});var Sr=he.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&t.tagName==="DIV"?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(Ke(e),e.appendChild(n.html)):e.innerHTML=n.html!==!1?n.html:"",n.bgPos){var s=Z(n.bgPos);e.style.backgroundPosition=-s.x+"px "+-s.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function ta(t){return new Sr(t)}he.Default=Ce;var Ae=At.extend({options:{tileSize:256,opacity:1,updateWhenIdle:N.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){z(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),st(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(se(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ae(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof j?t:new j(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e=this.getPane().children,n=-t(-1/0,1/0),s=0,h=e.length,f;s<h;s++)f=e[s].style.zIndex,e[s]!==this._container&&f&&(n=t(n,+f));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!N.ielt9){kt(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var s in this._tiles){var h=this._tiles[s];if(!(!h.current||!h.loaded)){var f=Math.min(1,(t-h.loaded)/200);kt(h.el,f),f<1?e=!0:(h.active?n=!0:this._onOpaqueTile(h),h.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(V(this._fadeFrame),this._fadeFrame=I(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=G("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t!==void 0){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(st(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var s=this._levels[t],h=this._map;return s||(s=this._levels[t]={},s.el=G("div","leaflet-tile-container leaflet-zoom-animated",this._container),s.el.style.zIndex=e,s.origin=h.project(h.unproject(h.getPixelOrigin()),t).round(),s.zoom=t,this._setZoomTransform(s,h.getCenter(),h.getZoom()),p(s.el.offsetWidth),this._onCreateLevel(s)),this._level=s,s}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var s=e.coords;this._retainParent(s.x,s.y,s.z,s.z-5)||this._retainChildren(s.x,s.y,s.z,s.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)st(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,s){var h=Math.floor(t/2),f=Math.floor(e/2),m=n-1,b=new j(+h,+f);b.z=+m;var P=this._tileCoordsToKey(b),M=this._tiles[P];return M&&M.active?(M.retain=!0,!0):(M&&M.loaded&&(M.retain=!0),m>s?this._retainParent(h,f,m,s):!1)},_retainChildren:function(t,e,n,s){for(var h=2*t;h<2*t+2;h++)for(var f=2*e;f<2*e+2;f++){var m=new j(h,f);m.z=n+1;var b=this._tileCoordsToKey(m),P=this._tiles[b];if(P&&P.active){P.retain=!0;continue}else P&&P.loaded&&(P.retain=!0);n+1<s&&this._retainChildren(h,f,n+1,s)}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return e.minNativeZoom!==void 0&&t<e.minNativeZoom?e.minNativeZoom:e.maxNativeZoom!==void 0&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,s){var h=Math.round(e);this.options.maxZoom!==void 0&&h>this.options.maxZoom||this.options.minZoom!==void 0&&h<this.options.minZoom?h=void 0:h=this._clampZoom(h);var f=this.options.updateWhenZooming&&h!==this._tileZoom;(!s||f)&&(this._tileZoom=h,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),h!==void 0&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var s=this._map.getZoomScale(n,t.zoom),h=t.origin.multiplyBy(s).subtract(this._map._getNewPixelOrigin(e,n)).round();N.any3d?Kt(t.el,h,s):ut(t.el,h)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),s=this._tileZoom,h=this._map.getPixelWorldBounds(this._tileZoom);h&&(this._globalTileRange=this._pxBoundsToTileRange(h)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],s).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],s).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],s).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],s).y/n.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),s=e.getZoomScale(n,this._tileZoom),h=e.project(t,this._tileZoom).floor(),f=e.getSize().divideBy(s*2);return new J(h.subtract(f),h.add(f))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(t===void 0&&(t=e.getCenter()),this._tileZoom!==void 0){var s=this._getTiledPixelBounds(t),h=this._pxBoundsToTileRange(s),f=h.getCenter(),m=[],b=this.options.keepBuffer,P=new J(h.getBottomLeft().subtract([b,-b]),h.getTopRight().add([b,-b]));if(!(isFinite(h.min.x)&&isFinite(h.min.y)&&isFinite(h.max.x)&&isFinite(h.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var M in this._tiles){var D=this._tiles[M].coords;(D.z!==this._tileZoom||!P.contains(new j(D.x,D.y)))&&(this._tiles[M].current=!1)}if(Math.abs(n-this._tileZoom)>1){this._setView(t,n);return}for(var H=h.min.y;H<=h.max.y;H++)for(var q=h.min.x;q<=h.max.x;q++){var yt=new j(q,H);if(yt.z=this._tileZoom,!!this._isValidTile(yt)){var mt=this._tiles[this._tileCoordsToKey(yt)];mt?mt.current=!0:m.push(yt)}}if(m.sort(function(bt,de){return bt.distanceTo(f)-de.distanceTo(f)}),m.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Mt=document.createDocumentFragment();for(q=0;q<m.length;q++)this._addTile(m[q],Mt);this._level.el.appendChild(Mt)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var s=this._tileCoordsToBounds(t);return nt(this.options.bounds).overlaps(s)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),s=t.scaleBy(n),h=s.add(n),f=e.unproject(s,t.z),m=e.unproject(h,t.z);return[f,m]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new dt(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new j(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(st(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Y(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=p,t.onmousemove=p,N.ielt9&&this.options.opacity<1&&kt(t,this.options.opacity)},_addTile:function(t,e){var n=this._getTilePos(t),s=this._tileCoordsToKey(t),h=this.createTile(this._wrapCoords(t),l(this._tileReady,this,t));this._initTile(h),this.createTile.length<2&&I(l(this._tileReady,this,t,null,h)),ut(h,n),this._tiles[s]={el:h,coords:t,current:!0},e.appendChild(h),this.fire("tileloadstart",{tile:h,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var s=this._tileCoordsToKey(t);n=this._tiles[s],n&&(n.loaded=+new Date,this._map._fadeAnimated?(kt(n.el,0),V(this._fadeFrame),this._fadeFrame=I(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(Y(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),N.ielt9||!this._map._fadeAnimated?I(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new j(this._wrapX?_(t.x,this._wrapX):t.x,this._wrapY?_(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new J(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function ea(t){return new Ae(t)}var fe=Ae.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,e=z(this,e),e.detectRetina&&N.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),typeof e.subdomains=="string"&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&e===void 0&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return U(n,"load",l(this._tileOnLoad,this,e,n)),U(n,"error",l(this._tileOnError,this,e,n)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(n.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:N.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=n),e["-y"]=n}return g(this._url,r(e,this.options))},_tileOnLoad:function(t,e){N.ielt9?setTimeout(l(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var s=this.options.errorTileUrl;s&&e.getAttribute("src")!==s&&(e.src=s),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,n=this.options.zoomReverse,s=this.options.zoomOffset;return n&&(t=e-t),t+s},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=p,e.onerror=p,!e.complete)){e.src=C;var n=this._tiles[t].coords;st(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:n})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",C),Ae.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(!(!this._map||n&&n.getAttribute("src")===C))return Ae.prototype._tileReady.call(this,t,e,n)}});function Cr(t,e){return new fe(t,e)}var Ar=fe.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var n=r({},this.defaultWmsParams);for(var s in e)s in this.options||(n[s]=e[s]);e=z(this,e);var h=e.detectRetina&&N.retina?2:1,f=this.getTileSize();n.width=f.x*h,n.height=f.y*h,this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,fe.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,s=it(n.project(e[0]),n.project(e[1])),h=s.min,f=s.max,m=(this._wmsVersion>=1.3&&this._crs===Lr?[h.y,h.x,f.y,f.x]:[h.x,h.y,f.x,f.y]).join(","),b=fe.prototype.getTileUrl.call(this,t);return b+A(this.wmsParams,b,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+m},setParams:function(t,e){return r(this.wmsParams,t),e||this.redraw(),this}});function ia(t,e){return new Ar(t,e)}fe.WMS=Ar,Cr.wms=ia;var Vt=At.extend({options:{padding:.1},initialize:function(t){z(this,t),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Y(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),s=this._map.getSize().multiplyBy(.5+this.options.padding),h=this._map.project(this._center,e),f=s.multiplyBy(-n).add(h).subtract(this._map._getNewPixelOrigin(t,e));N.any3d?Kt(this._container,f,n):ut(this._container,f)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new J(n,n.add(e.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Or=Vt.extend({options:{tolerance:0},getEvents:function(){var t=Vt.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Vt.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");U(t,"mousemove",this._onMouseMove,this),U(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),U(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){V(this._redrawRequest),delete this._ctx,st(this._container),rt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Vt.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),s=N.retina?2:1;ut(e,t.min),e.width=s*n.x,e.height=s*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",N.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Vt.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[c(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,s=e.prev;n?n.prev=s:this._drawLast=s,s?s.next=n:this._drawFirst=n,delete t._order,delete this._layers[c(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var e=t.options.dashArray.split(/[, ]+/),n=[],s,h;for(h=0;h<e.length;h++){if(s=Number(e[h]),isNaN(s))return;n.push(s)}t.options._dashArray=n}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||I(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new J,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var s=this._drawFirst;s;s=s.next)t=s.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,s,h,f,m=t._parts,b=m.length,P=this._ctx;if(b){for(P.beginPath(),n=0;n<b;n++){for(s=0,h=m[n].length;s<h;s++)f=m[n][s],P[s?"lineTo":"moveTo"](f.x,f.y);e&&P.closePath()}this._fillStroke(P,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var e=t._point,n=this._ctx,s=Math.max(Math.round(t._radius),1),h=(Math.max(Math.round(t._radiusY),1)||s)/s;h!==1&&(n.save(),n.scale(1,h)),n.beginPath(),n.arc(e.x,e.y/h,s,0,Math.PI*2,!1),h!==1&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&n.weight!==0&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e=this._map.mouseEventToLayerPoint(t),n,s,h=this._drawFirst;h;h=h.next)n=h.layer,n.options.interactive&&n._containsPoint(e)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(n))&&(s=n);this._fireEvent(s?[s]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(ht(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,s,h=this._drawFirst;h;h=h.next)n=h.layer,n.options.interactive&&n._containsPoint(e)&&(s=n);s!==this._hoveredLayer&&(this._handleMouseOut(t),s&&(Y(this._container,"leaflet-interactive"),this._fireEvent([s],t,"mouseover"),this._hoveredLayer=s)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,s=e.prev;if(n)n.prev=s;else return;s?s.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t)}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,s=e.prev;if(s)s.next=n;else return;n?n.prev=s:s&&(this._drawLast=s),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t)}}});function Er(t){return N.canvas?new Or(t):null}var Oe=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),na={_initContainer:function(){this._container=G("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Vt.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=Oe("shape");Y(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=Oe("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[c(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;st(e),t.removeInteractiveTarget(e),delete this._layers[c(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,s=t.options,h=t._container;h.stroked=!!s.stroke,h.filled=!!s.fill,s.stroke?(e||(e=t._stroke=Oe("stroke")),h.appendChild(e),e.weight=s.weight+"px",e.color=s.color,e.opacity=s.opacity,s.dashArray?e.dashStyle=y(s.dashArray)?s.dashArray.join(" "):s.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=s.lineCap.replace("butt","flat"),e.joinstyle=s.lineJoin):e&&(h.removeChild(e),t._stroke=null),s.fill?(n||(n=t._fill=Oe("fill")),h.appendChild(n),n.color=s.fillColor||s.color,n.opacity=s.fillOpacity):n&&(h.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),s=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+s+" 0,"+65535*360)},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){se(t._container)},_bringToBack:function(t){ae(t._container)}},ci=N.vml?Oe:Fn,Ee=Vt.extend({_initContainer:function(){this._container=ci("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ci("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){st(this._container),rt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Vt.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;(!this._svgSize||!this._svgSize.equals(e))&&(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),ut(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=ci("path");t.options.className&&Y(e,t.options.className),t.options.interactive&&Y(e,"leaflet-interactive"),this._updateStyle(t),this._layers[c(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){st(t._path),t.removeInteractiveTarget(t._path),delete this._layers[c(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,Zn(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),s=Math.max(Math.round(t._radiusY),1)||n,h="a"+n+","+s+" 0 1,0 ",f=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+h+n*2+",0 "+h+-n*2+",0 ";this._setPath(t,f)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){se(t._path)},_bringToBack:function(t){ae(t._path)}});N.vml&&Ee.include(na);function Br(t){return N.svg||N.vml?new Ee(t):null}K.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var e=this._paneRenderers[t];return e===void 0&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&Er(t)||Br(t)}});var Ir=ue.extend({initialize:function(t,e){ue.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=nt(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function ra(t,e){return new Ir(t,e)}Ee.create=ci,Ee.pointsToPath=Zn,jt.geometryToLayer=ri,jt.coordsToLatLng=fn,jt.coordsToLatLngs=oi,jt.latLngToCoords=dn,jt.latLngsToCoords=si,jt.getFeature=ce,jt.asFeature=ai,K.mergeOptions({boxZoom:!0});var Dr=Dt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){U(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){rt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){st(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Pe(),qi(),this._startPoint=this._map.mouseEventToContainerPoint(t),U(document,{contextmenu:Qt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=G("div","leaflet-zoom-box",this._container),Y(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new J(this._point,this._startPoint),n=e.getSize();ut(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(st(this._box),ht(this._container,"leaflet-crosshair")),Te(),$i(),rt(document,{contextmenu:Qt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var e=new dt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});K.addInitHook("addHandler","boxZoom",Dr),K.mergeOptions({doubleClickZoom:!0});var Fr=Dt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),s=e.options.zoomDelta,h=t.originalEvent.shiftKey?n-s:n+s;e.options.doubleClickZoom==="center"?e.setZoom(h):e.setZoomAround(t.containerPoint,h)}});K.addInitHook("addHandler","doubleClickZoom",Fr),K.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Zr=Dt.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Wt(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Y(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ht(this._map._container,"leaflet-grab"),ht(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=nt(this._map.options.maxBounds);this._offsetLimit=it(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,s=this._draggable._newPos.x,h=(s-e+n)%t+e-n,f=(s+e+n)%t-e-n,m=Math.abs(h+n)<Math.abs(f+n)?h:f;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=m},_onDragEnd:function(t){var e=this._map,n=e.options,s=!n.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),s)e.fire("moveend");else{this._prunePositions(+new Date);var h=this._lastPos.subtract(this._positions[0]),f=(this._lastTime-this._times[0])/1e3,m=n.easeLinearity,b=h.multiplyBy(m/f),P=b.distanceTo([0,0]),M=Math.min(n.inertiaMaxSpeed,P),D=b.multiplyBy(M/P),H=M/(n.inertiaDeceleration*m),q=D.multiplyBy(-H/2).round();!q.x&&!q.y?e.fire("moveend"):(q=e._limitOffset(q,e.options.maxBounds),I(function(){e.panBy(q,{duration:H,easeLinearity:m,noMoveStart:!0,animate:!0})}))}}});K.addInitHook("addHandler","dragging",Zr),K.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Rr=Dt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),U(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),rt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,s=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(s,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e=this._panKeys={},n=this.keyCodes,s,h;for(s=0,h=n.left.length;s<h;s++)e[n.left[s]]=[-1*t,0];for(s=0,h=n.right.length;s<h;s++)e[n.right[s]]=[t,0];for(s=0,h=n.down.length;s<h;s++)e[n.down[s]]=[0,t];for(s=0,h=n.up.length;s<h;s++)e[n.up[s]]=[0,-1*t]},_setZoomDelta:function(t){var e=this._zoomKeys={},n=this.keyCodes,s,h;for(s=0,h=n.zoomIn.length;s<h;s++)e[n.zoomIn[s]]=t;for(s=0,h=n.zoomOut.length;s<h;s++)e[n.zoomOut[s]]=-t},_addHooks:function(){U(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){rt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=t.keyCode,n=this._map,s;if(e in this._panKeys){if(!n._panAnim||!n._panAnim._inProgress)if(s=this._panKeys[e],t.shiftKey&&(s=Z(s).multiplyBy(3)),n.options.maxBounds&&(s=n._limitOffset(Z(s),n.options.maxBounds)),n.options.worldCopyJump){var h=n.wrapLatLng(n.unproject(n.project(n.getCenter()).add(s)));n.panTo(h)}else n.panBy(s)}else if(e in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else if(e===27&&n._popup&&n._popup.options.closeOnEscapeKey)n.closePopup();else return;Qt(t)}}});K.addInitHook("addHandler","keyboard",Rr),K.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Nr=Dt.extend({addHooks:function(){U(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){rt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=ur(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var s=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),s),Qt(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var s=this._delta/(this._map.options.wheelPxPerZoomLevel*4),h=4*Math.log(2/(1+Math.exp(-Math.abs(s))))/Math.LN2,f=n?Math.ceil(h/n)*n:h,m=t._limitZoom(e+(this._delta>0?f:-f))-e;this._delta=0,this._startTime=null,m&&(t.options.scrollWheelZoom==="center"?t.setZoom(e+m):t.setZoomAround(this._lastMousePos,e+m))}});K.addInitHook("addHandler","scrollWheelZoom",Nr);var oa=600;K.mergeOptions({tapHold:N.touchNative&&N.safari&&N.mobile,tapTolerance:15});var jr=Dt.extend({addHooks:function(){U(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){rt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var e=t.touches[0];this._startPos=this._newPos=new j(e.clientX,e.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(U(document,"touchend",_t),U(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))},this),oa),U(document,"touchend touchcancel contextmenu",this._cancel,this),U(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){rt(document,"touchend",_t),rt(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),rt(document,"touchend touchcancel contextmenu",this._cancel,this),rt(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new j(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var n=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});n._simulated=!0,e.target.dispatchEvent(n)}});K.addInitHook("addHandler","tapHold",jr),K.mergeOptions({touchZoom:N.touch,bounceAtZoomLimits:!0});var Vr=Dt.extend({addHooks:function(){Y(this._map._container,"leaflet-touch-zoom"),U(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ht(this._map._container,"leaflet-touch-zoom"),rt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(!(!t.touches||t.touches.length!==2||e._animatingZoom||this._zooming)){var n=e.mouseEventToContainerPoint(t.touches[0]),s=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),e.options.touchZoom!=="center"&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(s)._divideBy(2))),this._startDist=n.distanceTo(s),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),U(document,"touchmove",this._onTouchMove,this),U(document,"touchend touchcancel",this._onTouchEnd,this),_t(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),s=e.mouseEventToContainerPoint(t.touches[1]),h=n.distanceTo(s)/this._startDist;if(this._zoom=e.getScaleZoom(h,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&h<1||this._zoom>e.getMaxZoom()&&h>1)&&(this._zoom=e._limitZoom(this._zoom)),e.options.touchZoom==="center"){if(this._center=this._startLatLng,h===1)return}else{var f=n._add(s)._divideBy(2)._subtract(this._centerPoint);if(h===1&&f.x===0&&f.y===0)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(f),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),V(this._animRequest);var m=l(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=I(m,this,!0),_t(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,V(this._animRequest),rt(document,"touchmove",this._onTouchMove,this),rt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});K.addInitHook("addHandler","touchZoom",Vr),K.BoxZoom=Dr,K.DoubleClickZoom=Fr,K.Drag=Zr,K.Keyboard=Rr,K.ScrollWheelZoom=Nr,K.TapHold=jr,K.TouchZoom=Vr,o.Bounds=J,o.Browser=N,o.CRS=xt,o.Canvas=Or,o.Circle=cn,o.CircleMarker=ni,o.Class=et,o.Control=Ct,o.DivIcon=Sr,o.DivOverlay=Ft,o.DomEvent=Ls,o.DomUtil=xs,o.Draggable=Wt,o.Evented=ft,o.FeatureGroup=Rt,o.GeoJSON=jt,o.GridLayer=Ae,o.Handler=Dt,o.Icon=he,o.ImageOverlay=li,o.LatLng=Q,o.LatLngBounds=dt,o.Layer=At,o.LayerGroup=le,o.LineUtil=Ds,o.Map=K,o.Marker=ii,o.Mixin=Cs,o.Path=Yt,o.Point=j,o.PolyUtil=As,o.Polygon=ue,o.Polyline=Nt,o.Popup=hi,o.PosAnimation=cr,o.Projection=Fs,o.Rectangle=Ir,o.Renderer=Vt,o.SVG=Ee,o.SVGOverlay=Mr,o.TileLayer=fe,o.Tooltip=ui,o.Transformation=be,o.Util=$,o.VideoOverlay=zr,o.bind=l,o.bounds=it,o.canvas=Er,o.circle=Ws,o.circleMarker=Us,o.control=Me,o.divIcon=ta,o.extend=r,o.featureGroup=js,o.geoJSON=kr,o.geoJson=qs,o.gridLayer=ea,o.icon=Vs,o.imageOverlay=$s,o.latLng=W,o.latLngBounds=nt,o.layerGroup=Ns,o.map=Ps,o.marker=Hs,o.point=Z,o.polygon=Xs,o.polyline=Ys,o.popup=Js,o.rectangle=ra,o.setOptions=z,o.stamp=c,o.svg=Br,o.svgOverlay=Gs,o.tileLayer=Cr,o.tooltip=Qs,o.transformation=Ut,o.version=i,o.videoOverlay=Ks;var sa=window.L;o.noConflict=function(){return window.L=sa,this},window.L=o}))});var jo=Yr((On,En)=>{(function(o,i){typeof On=="object"&&typeof En<"u"?En.exports=i():typeof define=="function"&&define.amd?define(i):(o=o||self).RBush=i()})(On,function(){"use strict";function o(g,y,x,C,O){(function k(E,F,B,I,V){for(;I>B;){if(I-B>600){var $=I-B+1,et=F-B+1,Zt=Math.log($),ot=.5*Math.exp(2*Zt/3),ft=.5*Math.sqrt(Zt*ot*($-ot)/$)*(et-$/2<0?-1:1),j=Math.max(B,Math.floor(F-et*ot/$+ft)),$t=Math.min(I,Math.floor(F+($-et)*ot/$+ft));k(E,F,j,$t,V)}var Z=E[F],J=B,it=I;for(i(E,B,F),V(E[I],Z)>0&&i(E,B,I);J<it;){for(i(E,J,it),J++,it--;V(E[J],Z)<0;)J++;for(;V(E[it],Z)>0;)it--}V(E[B],Z)===0?i(E,B,it):i(E,++it,I),it<=F&&(B=it+1),F<=it&&(I=it-1)}})(g,y,x||0,C||g.length-1,O||r)}function i(g,y,x){var C=g[y];g[y]=g[x],g[x]=C}function r(g,y){return g<y?-1:g>y?1:0}var a=function(g){g===void 0&&(g=9),this._maxEntries=Math.max(4,g),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function l(g,y,x){if(!x)return y.indexOf(g);for(var C=0;C<y.length;C++)if(x(g,y[C]))return C;return-1}function u(g,y){c(g,0,g.children.length,y,g)}function c(g,y,x,C,O){O||(O=A(null)),O.minX=1/0,O.minY=1/0,O.maxX=-1/0,O.maxY=-1/0;for(var k=y;k<x;k++){var E=g.children[k];d(O,g.leaf?C(E):E)}return O}function d(g,y){return g.minX=Math.min(g.minX,y.minX),g.minY=Math.min(g.minY,y.minY),g.maxX=Math.max(g.maxX,y.maxX),g.maxY=Math.max(g.maxY,y.maxY),g}function _(g,y){return g.minX-y.minX}function p(g,y){return g.minY-y.minY}function v(g){return(g.maxX-g.minX)*(g.maxY-g.minY)}function w(g){return g.maxX-g.minX+(g.maxY-g.minY)}function T(g,y){return g.minX<=y.minX&&g.minY<=y.minY&&y.maxX<=g.maxX&&y.maxY<=g.maxY}function z(g,y){return y.minX<=g.maxX&&y.minY<=g.maxY&&y.maxX>=g.minX&&y.maxY>=g.minY}function A(g){return{children:g,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function R(g,y,x,C,O){for(var k=[y,x];k.length;)if(!((x=k.pop())-(y=k.pop())<=C)){var E=y+Math.ceil((x-y)/C/2)*C;o(g,E,y,x,O),k.push(y,E,E,x)}}return a.prototype.all=function(){return this._all(this.data,[])},a.prototype.search=function(g){var y=this.data,x=[];if(!z(g,y))return x;for(var C=this.toBBox,O=[];y;){for(var k=0;k<y.children.length;k++){var E=y.children[k],F=y.leaf?C(E):E;z(g,F)&&(y.leaf?x.push(E):T(g,F)?this._all(E,x):O.push(E))}y=O.pop()}return x},a.prototype.collides=function(g){var y=this.data;if(!z(g,y))return!1;for(var x=[];y;){for(var C=0;C<y.children.length;C++){var O=y.children[C],k=y.leaf?this.toBBox(O):O;if(z(g,k)){if(y.leaf||T(g,k))return!0;x.push(O)}}y=x.pop()}return!1},a.prototype.load=function(g){if(!g||!g.length)return this;if(g.length<this._minEntries){for(var y=0;y<g.length;y++)this.insert(g[y]);return this}var x=this._build(g.slice(),0,g.length-1,0);if(this.data.children.length)if(this.data.height===x.height)this._splitRoot(this.data,x);else{if(this.data.height<x.height){var C=this.data;this.data=x,x=C}this._insert(x,this.data.height-x.height-1,!0)}else this.data=x;return this},a.prototype.insert=function(g){return g&&this._insert(g,this.data.height-1),this},a.prototype.clear=function(){return this.data=A([]),this},a.prototype.remove=function(g,y){if(!g)return this;for(var x,C,O,k=this.data,E=this.toBBox(g),F=[],B=[];k||F.length;){if(k||(k=F.pop(),C=F[F.length-1],x=B.pop(),O=!0),k.leaf){var I=l(g,k.children,y);if(I!==-1)return k.children.splice(I,1),F.push(k),this._condense(F),this}O||k.leaf||!T(k,E)?C?(x++,k=C.children[x],O=!1):k=null:(F.push(k),B.push(x),x=0,C=k,k=k.children[0])}return this},a.prototype.toBBox=function(g){return g},a.prototype.compareMinX=function(g,y){return g.minX-y.minX},a.prototype.compareMinY=function(g,y){return g.minY-y.minY},a.prototype.toJSON=function(){return this.data},a.prototype.fromJSON=function(g){return this.data=g,this},a.prototype._all=function(g,y){for(var x=[];g;)g.leaf?y.push.apply(y,g.children):x.push.apply(x,g.children),g=x.pop();return y},a.prototype._build=function(g,y,x,C){var O,k=x-y+1,E=this._maxEntries;if(k<=E)return u(O=A(g.slice(y,x+1)),this.toBBox),O;C||(C=Math.ceil(Math.log(k)/Math.log(E)),E=Math.ceil(k/Math.pow(E,C-1))),(O=A([])).leaf=!1,O.height=C;var F=Math.ceil(k/E),B=F*Math.ceil(Math.sqrt(E));R(g,y,x,B,this.compareMinX);for(var I=y;I<=x;I+=B){var V=Math.min(I+B-1,x);R(g,I,V,F,this.compareMinY);for(var $=I;$<=V;$+=F){var et=Math.min($+F-1,V);O.children.push(this._build(g,$,et,C-1))}}return u(O,this.toBBox),O},a.prototype._chooseSubtree=function(g,y,x,C){for(;C.push(y),!y.leaf&&C.length-1!==x;){for(var O=1/0,k=1/0,E=void 0,F=0;F<y.children.length;F++){var B=y.children[F],I=v(B),V=($=g,et=B,(Math.max(et.maxX,$.maxX)-Math.min(et.minX,$.minX))*(Math.max(et.maxY,$.maxY)-Math.min(et.minY,$.minY))-I);V<k?(k=V,O=I<O?I:O,E=B):V===k&&I<O&&(O=I,E=B)}y=E||y.children[0]}var $,et;return y},a.prototype._insert=function(g,y,x){var C=x?g:this.toBBox(g),O=[],k=this._chooseSubtree(C,this.data,y,O);for(k.children.push(g),d(k,C);y>=0&&O[y].children.length>this._maxEntries;)this._split(O,y),y--;this._adjustParentBBoxes(C,O,y)},a.prototype._split=function(g,y){var x=g[y],C=x.children.length,O=this._minEntries;this._chooseSplitAxis(x,O,C);var k=this._chooseSplitIndex(x,O,C),E=A(x.children.splice(k,x.children.length-k));E.height=x.height,E.leaf=x.leaf,u(x,this.toBBox),u(E,this.toBBox),y?g[y-1].children.push(E):this._splitRoot(x,E)},a.prototype._splitRoot=function(g,y){this.data=A([g,y]),this.data.height=g.height+1,this.data.leaf=!1,u(this.data,this.toBBox)},a.prototype._chooseSplitIndex=function(g,y,x){for(var C,O,k,E,F,B,I,V=1/0,$=1/0,et=y;et<=x-y;et++){var Zt=c(g,0,et,this.toBBox),ot=c(g,et,x,this.toBBox),ft=(O=Zt,k=ot,E=void 0,F=void 0,B=void 0,I=void 0,E=Math.max(O.minX,k.minX),F=Math.max(O.minY,k.minY),B=Math.min(O.maxX,k.maxX),I=Math.min(O.maxY,k.maxY),Math.max(0,B-E)*Math.max(0,I-F)),j=v(Zt)+v(ot);ft<V?(V=ft,C=et,$=j<$?j:$):ft===V&&j<$&&($=j,C=et)}return C||x-y},a.prototype._chooseSplitAxis=function(g,y,x){var C=g.leaf?this.compareMinX:_,O=g.leaf?this.compareMinY:p;this._allDistMargin(g,y,x,C)<this._allDistMargin(g,y,x,O)&&g.children.sort(C)},a.prototype._allDistMargin=function(g,y,x,C){g.children.sort(C);for(var O=this.toBBox,k=c(g,0,y,O),E=c(g,x-y,x,O),F=w(k)+w(E),B=y;B<x-y;B++){var I=g.children[B];d(k,g.leaf?O(I):I),F+=w(k)}for(var V=x-y-1;V>=y;V--){var $=g.children[V];d(E,g.leaf?O($):$),F+=w(E)}return F},a.prototype._adjustParentBBoxes=function(g,y,x){for(var C=x;C>=0;C--)d(y[C],g)},a.prototype._condense=function(g){for(var y=g.length-1,x=void 0;y>=0;y--)g[y].children.length===0?y>0?(x=g[y-1].children).splice(x.indexOf(g[y]),1):this.clear():u(g[y],this.toBBox)},a})});var qr=window.name=="neos-content-main",$r=document,Kr=$r.documentElement,Gr=window.matchMedia("(prefers-color-scheme: dark)");function Jr(o){return[...o.querySelectorAll(".carbon-geomap-coordinate")].map(i=>{let r=i.dataset,a=JSON.parse(r?.coordinate||null);return a?{element:i,html:i.outerHTML,popup:!!i.innerHTML,lat:a.lat,lng:a.lng,pinColor:r?.pinColor||"red"}:null}).filter(i=>i!==null)}function Qr(o){return{html:`<svg version="1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 149 178"><path fill="${o}" stroke="#FFF" stroke-width="6" stroke-miterlimit="10" d="M126 23l-6-6A69 69 0 0 0 74 1a69 69 0 0 0-51 22A70 70 0 0 0 1 74c0 21 7 38 22 52l43 47c6 6 11 6 16 0l48-51c12-13 18-29 18-48 0-20-8-37-22-51z"/><circle fill="${o}" cx="74" cy="75" r="61"/><circle fill="#FFF" cx="74" cy="75" r="30"/></svg>`,iconAnchor:[12,32],iconSize:[25,30],popupAnchor:[0,-28]}}function to(o){return o.querySelector(".carbon-geomap__canvas")}function eo(o,i){[...$r.querySelectorAll(`.carbon-geomap.jonnitto-maps--${o.toLowerCase()}`)].forEach(r=>{r.querySelector(".carbon-geomap__reload-button")?.remove(),!r.classList.contains("jonnitto-maps--done")&&(r.classList.add("jonnitto-maps--done"),i(r))})}function Be(o){if(typeof o=="string")return o;if(!_i(o))return o?.light||o?.dark;let i=mi(o);return io(i)?o.dark:o.light}function gn(o,i){return o?o.replaceAll("{{STYLE}}",Be(i)):Be(i)}function di(o,i,r=!0){if(!(!r||typeof o!="function")){if(i){new MutationObserver(l=>{l.forEach(function(u){u.type==="attributes"&&u.attributeName==="class"&&o()})}).observe(Kr,{attributes:!0});return}Gr.addEventListener("change",o)}}function io(o){return!!(!o&&Gr.matches||o&&Kr.classList.contains("dark"))}function mi(o){return o?.basedOn==="class"}function _i(o){return!!(typeof o=="object"&&o?.light&&o?.dark)}function no(o){if(!_i(o))return;let i=()=>{let a=io(r)?o.dark:o.light;[...document.querySelectorAll(".jonnitto-maps .carbon-geomap__canvas")].forEach(l=>{l.dataset.effect=a})},r=mi(o);di(i,r),i()}async function pi(){return await fetch("/maps-settings.json").then(o=>o.json())}function ro(o){return Object.fromEntries(Object.entries(o).filter(([i,r])=>r!=null))}function oo(o){o(),window.addEventListener("jonnitto-maps:init",o,!0)}var ee=Xr(ao(),1),wa=[],lo=[];function La({element:o,service:i,library:r,layer:a,styleURL:l}){let u=to(o),c=[],d=Jr(o),_=d.length,p=JSON.parse(o.dataset?.center||null),v=i?.options||{},w=ro(r.options?.mapOptions||{}),T=parseInt(o.dataset?.zoom)||w.zoom||14;w.center=p?[p.lat,p.lng]:[0,0],w.zoom=T;let z=ee.default.map(u,w);if(ee.default.control.scale({imperial:!1}).addTo(z),a)a.addTo(z);else{let A={detectRetina:!0,maxZoom:v?.maxZoom||20};v?.attribution&&(A.attribution=v.attribution),v?.subdomains&&(A.subdomains=v.subdomains),lo.push(ee.default.tileLayer(l,A).addTo(z))}d.forEach(A=>{let R=ee.default.divIcon({...Qr(A.pinColor),className:"leaflet-data-marker"}),g=ee.default.marker([A.lat,A.lng],{icon:R}).addTo(z);if(c.push(g),A.html){let y=g.bindPopup(A.html,{maxWidth:500})}qr&&g.addEventListener("click",()=>{["mousedown","mouseup"].forEach(y=>A.element.dispatchEvent(new Event(y,{bubbles:!0})))})}),_>1&&(z.fitBounds(new ee.default.featureGroup(c).getBounds()),setTimeout(()=>{z.getZoom()>T&&z.setZoom(T)},200)),document.dispatchEvent(new CustomEvent("initializedJonnittoMaps",{detail:{element:o,service:i,library:r,layer:a,map:z,markers:c}})),wa.push(z)}async function ho({layerFunction:o=null,layerOptions:i=null,options:r=null,setLayerStyle:a=null}={}){let{service:l,library:u,effect:c}=r??await pi(),{style:d,styleTemplate:_}=l.options,p=_i(d),v=p?mi(d):!1,w=_?gn(_,d):d;oo(()=>{no(c);let T=null;o?(T=o(i),a&&(a(T,Be(d)),di(()=>{a(T,Be(d))},v,p))):di(()=>{let z=gn(_,d);lo.forEach(A=>A.setUrl(z))},v,p),eo(l.name,z=>{La({element:z,service:l,library:u,layer:T,styleURL:w})})})}function X(o,i){this.x=o,this.y=i}X.prototype={clone(){return new X(this.x,this.y)},add(o){return this.clone()._add(o)},sub(o){return this.clone()._sub(o)},multByPoint(o){return this.clone()._multByPoint(o)},divByPoint(o){return this.clone()._divByPoint(o)},mult(o){return this.clone()._mult(o)},div(o){return this.clone()._div(o)},rotate(o){return this.clone()._rotate(o)},rotateAround(o,i){return this.clone()._rotateAround(o,i)},matMult(o){return this.clone()._matMult(o)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(o){return this.x===o.x&&this.y===o.y},dist(o){return Math.sqrt(this.distSqr(o))},distSqr(o){let i=o.x-this.x,r=o.y-this.y;return i*i+r*r},angle(){return Math.atan2(this.y,this.x)},angleTo(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith(o){return this.angleWithSep(o.x,o.y)},angleWithSep(o,i){return Math.atan2(this.x*i-this.y*o,this.x*o+this.y*i)},_matMult(o){let i=o[0]*this.x+o[1]*this.y,r=o[2]*this.x+o[3]*this.y;return this.x=i,this.y=r,this},_add(o){return this.x+=o.x,this.y+=o.y,this},_sub(o){return this.x-=o.x,this.y-=o.y,this},_mult(o){return this.x*=o,this.y*=o,this},_div(o){return this.x/=o,this.y/=o,this},_multByPoint(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint(o){return this.x/=o.x,this.y/=o.y,this},_unit(){return this._div(this.mag()),this},_perp(){let o=this.y;return this.y=this.x,this.x=-o,this},_rotate(o){let i=Math.cos(o),r=Math.sin(o),a=i*this.x-r*this.y,l=r*this.x+i*this.y;return this.x=a,this.y=l,this},_rotateAround(o,i){let r=Math.cos(o),a=Math.sin(o),l=i.x+r*(this.x-i.x)-a*(this.y-i.y),u=i.y+a*(this.x-i.x)+r*(this.y-i.y);return this.x=l,this.y=u,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:X};X.convert=function(o){if(o instanceof X)return o;if(Array.isArray(o))return new X(+o[0],+o[1]);if(o.x!==void 0&&o.y!==void 0)return new X(+o.x,+o.y);throw new Error("Expected [x, y] or {x, y} point format")};function me(o,i,r){return Math.min(Math.max(o,r),i)}var yn=class extends Error{constructor(i){super(`Failed to parse color: "${i}"`)}},Ie=yn;function uo(o){if(typeof o!="string")throw new Ie(o);if(o.trim().toLowerCase()==="transparent")return[0,0,0,0];let i=o.trim();i=Aa.test(o)?ka(o):o;let r=za.exec(i);if(r){let c=Array.from(r).slice(1);return[...c.slice(0,3).map(d=>parseInt(De(d,2),16)),parseInt(De(c[3]||"f",2),16)/255]}let a=Ma.exec(i);if(a){let c=Array.from(a).slice(1);return[...c.slice(0,3).map(d=>parseInt(d,16)),parseInt(c[3]||"ff",16)/255]}let l=Sa.exec(i);if(l){let c=Array.from(l).slice(1);return[...c.slice(0,3).map(d=>parseInt(d,10)),parseFloat(c[3]||"1")]}let u=Ca.exec(i);if(u){let[c,d,_,p]=Array.from(u).slice(1).map(parseFloat);if(me(0,100,d)!==d)throw new Ie(o);if(me(0,100,_)!==_)throw new Ie(o);return[...Oa(c,d,_),Number.isNaN(p)?1:p]}throw new Ie(o)}function Pa(o){let i=5381,r=o.length;for(;r;)i=i*33^o.charCodeAt(--r);return(i>>>0)%2341}var co=o=>parseInt(o.replace(/_/g,""),36),Ta="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((o,i)=>{let r=co(i.substring(0,3)),a=co(i.substring(3)).toString(16),l="";for(let u=0;u<6-a.length;u++)l+="0";return o[r]=`${l}${a}`,o},{});function ka(o){let i=o.toLowerCase().trim(),r=Ta[Pa(i)];if(!r)throw new Ie(o);return`#${r}`}var De=(o,i)=>Array.from(Array(i)).map(()=>o).join(""),za=new RegExp(`^#${De("([a-f0-9])",3)}([a-f0-9])?$`,"i"),Ma=new RegExp(`^#${De("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),Sa=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${De(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),Ca=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,Aa=/^[a-z]+$/i,fo=o=>Math.round(o*255),Oa=(o,i,r)=>{let a=r/100;if(i===0)return[a,a,a].map(fo);let l=(o%360+360)%360/60,u=(1-Math.abs(2*a-1))*(i/100),c=u*(1-Math.abs(l%2-1)),d=0,_=0,p=0;l>=0&&l<1?(d=u,_=c):l>=1&&l<2?(d=c,_=u):l>=2&&l<3?(_=u,p=c):l>=3&&l<4?(_=c,p=u):l>=4&&l<5?(d=c,p=u):l>=5&&l<6&&(d=u,p=c);let v=a-u/2,w=d+v,T=_+v,z=p+v;return[w,T,z].map(fo)};function Ea(o,i,r,a){return`rgba(${me(0,255,o).toFixed()}, ${me(0,255,i).toFixed()}, ${me(0,255,r).toFixed()}, ${parseFloat(me(0,1,a).toFixed(3))})`}function yi(o,i,r){let a=(k,E)=>E===3?k:k/255,[l,u,c,d]=uo(o).map(a),[_,p,v,w]=uo(i).map(a),T=w-d,z=r*2-1,R=((z*T===-1?z:z+T/(1+z*T))+1)/2,g=1-R,y=(l*g+_*R)*255,x=(u*g+p*R)*255,C=(c*g+v*R)*255,O=w*r+d*(1-r);return Ea(y,x,C,O)}var vt=class{constructor(i,r){S(this,"str");S(this,"perFeature");this.str=i??r,this.perFeature=typeof this.str=="function"&&this.str.length===2}get(i,r){return typeof this.str=="function"?this.str(i,r):this.str}},at=class{constructor(i,r=1){S(this,"value");S(this,"perFeature");this.value=i??r,this.perFeature=typeof this.value=="function"&&this.value.length===2}get(i,r){return typeof this.value=="function"?this.value(i,r):this.value}},Fe=class{constructor(i){S(this,"labelProps");S(this,"textTransform");this.labelProps=i?.labelProps??["name"],this.textTransform=i?.textTransform}get(i,r){let a,l;typeof this.labelProps=="function"?l=this.labelProps(i,r):l=this.labelProps;for(let c of l)if(Object.prototype.hasOwnProperty.call(r.props,c)&&typeof r.props[c]=="string"){a=r.props[c];break}let u;return typeof this.textTransform=="function"?u=this.textTransform(i,r):u=this.textTransform,a&&u==="uppercase"?a=a.toUpperCase():a&&u==="lowercase"?a=a.toLowerCase():a&&u==="capitalize"&&(a=a.toLowerCase().split(" ").map(_=>_[0].toUpperCase()+_.slice(1)).join(" ")),a}},Ze=class{constructor(i){S(this,"family");S(this,"size");S(this,"weight");S(this,"style");S(this,"font");i?.font?this.font=i.font:(this.family=i?.fontFamily??"sans-serif",this.size=i?.fontSize??12,this.weight=i?.fontWeight,this.style=i?.fontStyle)}get(i,r){if(this.font)return typeof this.font=="function"?this.font(i,r):this.font;let a="";this.style&&(typeof this.style=="function"?a=`${this.style(i,r)} `:a=`${this.style} `);let l="";this.weight&&(typeof this.weight=="function"?l=`${this.weight(i,r)} `:l=`${this.weight} `);let u;typeof this.size=="function"?u=this.size(i,r):u=this.size;let c;return typeof this.family=="function"?c=this.family(i,r):c=this.family,`${a}${l}${u}px ${c}`}},vi=class{constructor(i,r=[]){S(this,"value");S(this,"perFeature");this.value=i??r,this.perFeature=typeof this.value=="function"&&this.value.length===2}get(i,r){return typeof this.value=="function"?this.value(i,r):this.value}};var Ba=(o,i,r)=>{let a=[],l,u,c,d=0,_=0,p=0,v=0,w=0,T=0,z=0,A=0,R=0,g=0,y=0,x=0;if(o.length<2)return[];if(o.length===2)return p=Math.sqrt((o[1].x-o[0].x)**2+(o[1].y-o[0].y)**2),[{length:p,beginIndex:0,beginDistance:0,endIndex:2,endDistance:p}];for(v=Math.sqrt((o[1].x-o[0].x)**2+(o[1].y-o[0].y)**2),d=1,_=o.length-1;d<_;d++)l=o[d-1],u=o[d],c=o[d+1],T=u.x-l.x,z=u.y-l.y,A=c.x-u.x,R=c.y-u.y,w=Math.sqrt(A*A+R*R),p+=v,g=Math.acos((T*A+z*R)/(v*w)),(g>i||p-x>r)&&(a.push({length:p-x,beginDistance:x,beginIndex:y,endIndex:d+1,endDistance:p}),y=d,x=p),v=w;return d-y>0&&a.push({length:p-x+w,beginIndex:y,beginDistance:x,endIndex:d+1,endDistance:p+w}),a};function mo(o,i,r,a){let l=[];for(let u of o){let c=Ba(u,Math.PI/45,i);for(let d of c)if(d.length>=i+a){let _=new X(u[d.beginIndex].x,u[d.beginIndex].y),p=u[d.endIndex-1],v=new X((p.x-_.x)/d.length,(p.y-_.y)/d.length);for(let w=a;w<d.length-i;w+=r)l.push({start:_.add(v.mult(w)),end:_.add(v.mult(w+i))})}}return l}function _o(o,i,r,a){let l=i.x-o.x,u=i.y-o.y,c=Math.sqrt((i.x-o.x)**2+(i.y-o.y)**2),d=[];for(let _=0;_<r+a;_+=2*a){let p=_*1/c;d.push({x:o.x+p*l,y:o.y+p*u})}return d}function vn(o,i){if(o.length<=i)return[o];let r=i-1,a=o.lastIndexOf(" ",r),l=o.indexOf(" ",r);if(a===-1&&l===-1)return[o];let u,c;return l===-1||a>=0&&r-a<l-r?(u=o.substring(0,a),c=o.substring(a+1,o.length)):(u=o.substring(0,l),c=o.substring(l+1,o.length)),[u,...vn(c,i)]}var Ia="\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DB5\u4E00-\u9FEA\uF900-\uFA6D\uFA70-\uFAD9\u2000",bh=new RegExp(`^[${Ia}]+$`);var bi=class{constructor(i,r,a,l,u){this.properties={},this.extent=a,this.type=0,this.id=void 0,this._pbf=i,this._geometry=-1,this._keys=l,this._values=u,i.readFields(Da,this,r)}loadGeometry(){let i=this._pbf;i.pos=this._geometry;let r=i.readVarint()+i.pos,a=[],l,u=1,c=0,d=0,_=0;for(;i.pos<r;){if(c<=0){let p=i.readVarint();u=p&7,c=p>>3}if(c--,u===1||u===2)d+=i.readSVarint(),_+=i.readSVarint(),u===1&&(l&&a.push(l),l=[]),l&&l.push(new X(d,_));else if(u===7)l&&l.push(l[0].clone());else throw new Error(`unknown command ${u}`)}return l&&a.push(l),a}bbox(){let i=this._pbf;i.pos=this._geometry;let r=i.readVarint()+i.pos,a=1,l=0,u=0,c=0,d=1/0,_=-1/0,p=1/0,v=-1/0;for(;i.pos<r;){if(l<=0){let w=i.readVarint();a=w&7,l=w>>3}if(l--,a===1||a===2)u+=i.readSVarint(),c+=i.readSVarint(),u<d&&(d=u),u>_&&(_=u),c<p&&(p=c),c>v&&(v=c);else if(a!==7)throw new Error(`unknown command ${a}`)}return[d,p,_,v]}toGeoJSON(i,r,a){let l=this.extent*Math.pow(2,a),u=this.extent*i,c=this.extent*r,d=this.loadGeometry();function _(T){return[(T.x+u)*360/l-180,360/Math.PI*Math.atan(Math.exp((1-(T.y+c)*2/l)*Math.PI))-90]}function p(T){return T.map(_)}let v;if(this.type===1){let T=[];for(let A of d)T.push(A[0]);let z=p(T);v=T.length===1?{type:"Point",coordinates:z[0]}:{type:"MultiPoint",coordinates:z}}else if(this.type===2){let T=d.map(p);v=T.length===1?{type:"LineString",coordinates:T[0]}:{type:"MultiLineString",coordinates:T}}else if(this.type===3){let T=Za(d),z=[];for(let A of T)z.push(A.map(p));v=z.length===1?{type:"Polygon",coordinates:z[0]}:{type:"MultiPolygon",coordinates:z}}else throw new Error("unknown feature type");let w={type:"Feature",geometry:v,properties:this.properties};return this.id!=null&&(w.id=this.id),w}};bi.types=["Unknown","Point","LineString","Polygon"];function Da(o,i,r){o===1?i.id=r.readVarint():o===2?Fa(r,i):o===3?i.type=r.readVarint():o===4&&(i._geometry=r.pos)}function Fa(o,i){let r=o.readVarint()+o.pos;for(;o.pos<r;){let a=i._keys[o.readVarint()],l=i._values[o.readVarint()];i.properties[a]=l}}function Za(o){let i=o.length;if(i<=1)return[o];let r=[],a,l;for(let u=0;u<i;u++){let c=Ra(o[u]);c!==0&&(l===void 0&&(l=c<0),l===c<0?(a&&r.push(a),a=[o[u]]):a&&a.push(o[u]))}return a&&r.push(a),r}function Ra(o){let i=0;for(let r=0,a=o.length,l=a-1,u,c;r<a;l=r++)u=o[r],c=o[l],i+=(c.x-u.x)*(u.y+c.y);return i}var bn=class{constructor(i,r){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(Na,this,r),this.length=this._features.length}feature(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];let r=this._pbf.readVarint()+this._pbf.pos;return new bi(this._pbf,r,this.extent,this._keys,this._values)}};function Na(o,i,r){o===15?i.version=r.readVarint():o===1?i.name=r.readString():o===5?i.extent=r.readVarint():o===2?i._features.push(r.pos):o===3?i._keys.push(r.readString()):o===4&&i._values.push(ja(r))}function ja(o){let i=null,r=o.readVarint()+o.pos;for(;o.pos<r;){let a=o.readVarint()>>3;i=a===1?o.readString():a===2?o.readFloat():a===3?o.readDouble():a===4?o.readVarint64():a===5?o.readVarint():a===6?o.readSVarint():a===7?o.readBoolean():null}if(i==null)throw new Error("unknown feature value");return i}var xi=class{constructor(i,r){this.layers=i.readFields(Va,{},r)}};function Va(o,i,r){if(o===3){let a=new bn(r,r.readVarint()+r.pos);a.length&&(i[a.name]=a)}}var po=23283064365386963e-26,Ha=12,go=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),xn=0,wi=1,Re=2,Li=5,Ne=class{constructor(i=new Uint8Array(16)){this.buf=ArrayBuffer.isView(i)?i:new Uint8Array(i),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(i,r,a=this.length){for(;this.pos<a;){let l=this.readVarint(),u=l>>3,c=this.pos;this.type=l&7,i(u,r,this),this.pos===c&&this.skip(l)}return r}readMessage(i,r){return this.readFields(i,r,this.readVarint()+this.pos)}readFixed32(){let i=this.dataView.getUint32(this.pos,!0);return this.pos+=4,i}readSFixed32(){let i=this.dataView.getInt32(this.pos,!0);return this.pos+=4,i}readFixed64(){let i=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*4294967296;return this.pos+=8,i}readSFixed64(){let i=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*4294967296;return this.pos+=8,i}readFloat(){let i=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,i}readDouble(){let i=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,i}readVarint(i){let r=this.buf,a,l;return l=r[this.pos++],a=l&127,l<128||(l=r[this.pos++],a|=(l&127)<<7,l<128)||(l=r[this.pos++],a|=(l&127)<<14,l<128)||(l=r[this.pos++],a|=(l&127)<<21,l<128)?a:(l=r[this.pos],a|=(l&15)<<28,Ua(a,i,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){let i=this.readVarint();return i%2===1?(i+1)/-2:i/2}readBoolean(){return!!this.readVarint()}readString(){let i=this.readVarint()+this.pos,r=this.pos;return this.pos=i,i-r>=Ha&&go?go.decode(this.buf.subarray(r,i)):nl(this.buf,r,i)}readBytes(){let i=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,i);return this.pos=i,r}readPackedVarint(i=[],r){let a=this.readPackedEnd();for(;this.pos<a;)i.push(this.readVarint(r));return i}readPackedSVarint(i=[]){let r=this.readPackedEnd();for(;this.pos<r;)i.push(this.readSVarint());return i}readPackedBoolean(i=[]){let r=this.readPackedEnd();for(;this.pos<r;)i.push(this.readBoolean());return i}readPackedFloat(i=[]){let r=this.readPackedEnd();for(;this.pos<r;)i.push(this.readFloat());return i}readPackedDouble(i=[]){let r=this.readPackedEnd();for(;this.pos<r;)i.push(this.readDouble());return i}readPackedFixed32(i=[]){let r=this.readPackedEnd();for(;this.pos<r;)i.push(this.readFixed32());return i}readPackedSFixed32(i=[]){let r=this.readPackedEnd();for(;this.pos<r;)i.push(this.readSFixed32());return i}readPackedFixed64(i=[]){let r=this.readPackedEnd();for(;this.pos<r;)i.push(this.readFixed64());return i}readPackedSFixed64(i=[]){let r=this.readPackedEnd();for(;this.pos<r;)i.push(this.readSFixed64());return i}readPackedEnd(){return this.type===Re?this.readVarint()+this.pos:this.pos+1}skip(i){let r=i&7;if(r===xn)for(;this.buf[this.pos++]>127;);else if(r===Re)this.pos=this.readVarint()+this.pos;else if(r===Li)this.pos+=4;else if(r===wi)this.pos+=8;else throw new Error(`Unimplemented type: ${r}`)}writeTag(i,r){this.writeVarint(i<<3|r)}realloc(i){let r=this.length||16;for(;r<this.pos+i;)r*=2;if(r!==this.length){let a=new Uint8Array(r);a.set(this.buf),this.buf=a,this.dataView=new DataView(a.buffer),this.length=r}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(i){this.realloc(4),this.dataView.setInt32(this.pos,i,!0),this.pos+=4}writeSFixed32(i){this.realloc(4),this.dataView.setInt32(this.pos,i,!0),this.pos+=4}writeFixed64(i){this.realloc(8),this.dataView.setInt32(this.pos,i&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(i*po),!0),this.pos+=8}writeSFixed64(i){this.realloc(8),this.dataView.setInt32(this.pos,i&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(i*po),!0),this.pos+=8}writeVarint(i){if(i=+i||0,i>268435455||i<0){Wa(i,this);return}this.realloc(4),this.buf[this.pos++]=i&127|(i>127?128:0),!(i<=127)&&(this.buf[this.pos++]=(i>>>=7)&127|(i>127?128:0),!(i<=127)&&(this.buf[this.pos++]=(i>>>=7)&127|(i>127?128:0),!(i<=127)&&(this.buf[this.pos++]=i>>>7&127)))}writeSVarint(i){this.writeVarint(i<0?-i*2-1:i*2)}writeBoolean(i){this.writeVarint(+i)}writeString(i){i=String(i),this.realloc(i.length*4),this.pos++;let r=this.pos;this.pos=rl(this.buf,i,this.pos);let a=this.pos-r;a>=128&&yo(r,a,this),this.pos=r-1,this.writeVarint(a),this.pos+=a}writeFloat(i){this.realloc(4),this.dataView.setFloat32(this.pos,i,!0),this.pos+=4}writeDouble(i){this.realloc(8),this.dataView.setFloat64(this.pos,i,!0),this.pos+=8}writeBytes(i){let r=i.length;this.writeVarint(r),this.realloc(r);for(let a=0;a<r;a++)this.buf[this.pos++]=i[a]}writeRawMessage(i,r){this.pos++;let a=this.pos;i(r,this);let l=this.pos-a;l>=128&&yo(a,l,this),this.pos=a-1,this.writeVarint(l),this.pos+=l}writeMessage(i,r,a){this.writeTag(i,Re),this.writeRawMessage(r,a)}writePackedVarint(i,r){r.length&&this.writeMessage(i,qa,r)}writePackedSVarint(i,r){r.length&&this.writeMessage(i,$a,r)}writePackedBoolean(i,r){r.length&&this.writeMessage(i,Ja,r)}writePackedFloat(i,r){r.length&&this.writeMessage(i,Ka,r)}writePackedDouble(i,r){r.length&&this.writeMessage(i,Ga,r)}writePackedFixed32(i,r){r.length&&this.writeMessage(i,Qa,r)}writePackedSFixed32(i,r){r.length&&this.writeMessage(i,tl,r)}writePackedFixed64(i,r){r.length&&this.writeMessage(i,el,r)}writePackedSFixed64(i,r){r.length&&this.writeMessage(i,il,r)}writeBytesField(i,r){this.writeTag(i,Re),this.writeBytes(r)}writeFixed32Field(i,r){this.writeTag(i,Li),this.writeFixed32(r)}writeSFixed32Field(i,r){this.writeTag(i,Li),this.writeSFixed32(r)}writeFixed64Field(i,r){this.writeTag(i,wi),this.writeFixed64(r)}writeSFixed64Field(i,r){this.writeTag(i,wi),this.writeSFixed64(r)}writeVarintField(i,r){this.writeTag(i,xn),this.writeVarint(r)}writeSVarintField(i,r){this.writeTag(i,xn),this.writeSVarint(r)}writeStringField(i,r){this.writeTag(i,Re),this.writeString(r)}writeFloatField(i,r){this.writeTag(i,Li),this.writeFloat(r)}writeDoubleField(i,r){this.writeTag(i,wi),this.writeDouble(r)}writeBooleanField(i,r){this.writeVarintField(i,+r)}};function Ua(o,i,r){let a=r.buf,l,u;if(u=a[r.pos++],l=(u&112)>>4,u<128||(u=a[r.pos++],l|=(u&127)<<3,u<128)||(u=a[r.pos++],l|=(u&127)<<10,u<128)||(u=a[r.pos++],l|=(u&127)<<17,u<128)||(u=a[r.pos++],l|=(u&127)<<24,u<128)||(u=a[r.pos++],l|=(u&1)<<31,u<128))return _e(o,l,i);throw new Error("Expected varint not more than 10 bytes")}function _e(o,i,r){return r?i*4294967296+(o>>>0):(i>>>0)*4294967296+(o>>>0)}function Wa(o,i){let r,a;if(o>=0?(r=o%4294967296|0,a=o/4294967296|0):(r=~(-o%4294967296),a=~(-o/4294967296),r^4294967295?r=r+1|0:(r=0,a=a+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),Ya(r,a,i),Xa(a,i)}function Ya(o,i,r){r.buf[r.pos++]=o&127|128,o>>>=7,r.buf[r.pos++]=o&127|128,o>>>=7,r.buf[r.pos++]=o&127|128,o>>>=7,r.buf[r.pos++]=o&127|128,o>>>=7,r.buf[r.pos]=o&127}function Xa(o,i){let r=(o&7)<<4;i.buf[i.pos++]|=r|((o>>>=3)?128:0),o&&(i.buf[i.pos++]=o&127|((o>>>=7)?128:0),o&&(i.buf[i.pos++]=o&127|((o>>>=7)?128:0),o&&(i.buf[i.pos++]=o&127|((o>>>=7)?128:0),o&&(i.buf[i.pos++]=o&127|((o>>>=7)?128:0),o&&(i.buf[i.pos++]=o&127)))))}function yo(o,i,r){let a=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(Math.LN2*7));r.realloc(a);for(let l=r.pos-1;l>=o;l--)r.buf[l+a]=r.buf[l]}function qa(o,i){for(let r=0;r<o.length;r++)i.writeVarint(o[r])}function $a(o,i){for(let r=0;r<o.length;r++)i.writeSVarint(o[r])}function Ka(o,i){for(let r=0;r<o.length;r++)i.writeFloat(o[r])}function Ga(o,i){for(let r=0;r<o.length;r++)i.writeDouble(o[r])}function Ja(o,i){for(let r=0;r<o.length;r++)i.writeBoolean(o[r])}function Qa(o,i){for(let r=0;r<o.length;r++)i.writeFixed32(o[r])}function tl(o,i){for(let r=0;r<o.length;r++)i.writeSFixed32(o[r])}function el(o,i){for(let r=0;r<o.length;r++)i.writeFixed64(o[r])}function il(o,i){for(let r=0;r<o.length;r++)i.writeSFixed64(o[r])}function nl(o,i,r){let a="",l=i;for(;l<r;){let u=o[l],c=null,d=u>239?4:u>223?3:u>191?2:1;if(l+d>r)break;let _,p,v;d===1?u<128&&(c=u):d===2?(_=o[l+1],(_&192)===128&&(c=(u&31)<<6|_&63,c<=127&&(c=null))):d===3?(_=o[l+1],p=o[l+2],(_&192)===128&&(p&192)===128&&(c=(u&15)<<12|(_&63)<<6|p&63,(c<=2047||c>=55296&&c<=57343)&&(c=null))):d===4&&(_=o[l+1],p=o[l+2],v=o[l+3],(_&192)===128&&(p&192)===128&&(v&192)===128&&(c=(u&15)<<18|(_&63)<<12|(p&63)<<6|v&63,(c<=65535||c>=1114112)&&(c=null))),c===null?(c=65533,d=1):c>65535&&(c-=65536,a+=String.fromCharCode(c>>>10&1023|55296),c=56320|c&1023),a+=String.fromCharCode(c),l+=d}return a}function rl(o,i,r){for(let a=0,l,u;a<i.length;a++){if(l=i.charCodeAt(a),l>55295&&l<57344)if(u)if(l<56320){o[r++]=239,o[r++]=191,o[r++]=189,u=l;continue}else l=u-55296<<10|l-56320|65536,u=null;else{l>56319||a+1===i.length?(o[r++]=239,o[r++]=191,o[r++]=189):u=l;continue}else u&&(o[r++]=239,o[r++]=191,o[r++]=189,u=null);l<128?o[r++]=l:(l<2048?o[r++]=l>>6|192:(l<65536?o[r++]=l>>12|224:(o[r++]=l>>18|240,o[r++]=l>>12&63|128),o[r++]=l>>6&63|128),o[r++]=l&63|128)}return r}var ye=Math.pow,pt=(o,i,r)=>new Promise((a,l)=>{var u=_=>{try{d(r.next(_))}catch(p){l(p)}},c=_=>{try{d(r.throw(_))}catch(p){l(p)}},d=_=>_.done?a(_.value):Promise.resolve(_.value).then(u,c);d((r=r.apply(o,i)).next())}),Lt=Uint8Array,ge=Uint16Array,ol=Int32Array,xo=new Lt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),wo=new Lt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),sl=new Lt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Lo=function(o,i){for(var r=new ge(31),a=0;a<31;++a)r[a]=i+=1<<o[a-1];for(var l=new ol(r[30]),a=1;a<30;++a)for(var u=r[a];u<r[a+1];++u)l[u]=u-r[a]<<5|a;return{b:r,r:l}},Po=Lo(xo,2),To=Po.b,al=Po.r;To[28]=258,al[258]=28;var ko=Lo(wo,0),ll=ko.b,Th=ko.r,Pn=new ge(32768);for(tt=0;tt<32768;++tt)Ht=(tt&43690)>>1|(tt&21845)<<1,Ht=(Ht&52428)>>2|(Ht&13107)<<2,Ht=(Ht&61680)>>4|(Ht&3855)<<4,Pn[tt]=((Ht&65280)>>8|(Ht&255)<<8)>>1;var Ht,tt,He=function(o,i,r){for(var a=o.length,l=0,u=new ge(i);l<a;++l)o[l]&&++u[o[l]-1];var c=new ge(i);for(l=1;l<i;++l)c[l]=c[l-1]+u[l-1]<<1;var d;if(r){d=new ge(1<<i);var _=15-i;for(l=0;l<a;++l)if(o[l])for(var p=l<<4|o[l],v=i-o[l],w=c[o[l]-1]++<<v,T=w|(1<<v)-1;w<=T;++w)d[Pn[w]>>_]=p}else for(d=new ge(a),l=0;l<a;++l)o[l]&&(d[l]=Pn[c[o[l]-1]++]>>15-o[l]);return d},Ue=new Lt(288);for(tt=0;tt<144;++tt)Ue[tt]=8;var tt;for(tt=144;tt<256;++tt)Ue[tt]=9;var tt;for(tt=256;tt<280;++tt)Ue[tt]=7;var tt;for(tt=280;tt<288;++tt)Ue[tt]=8;var tt,zo=new Lt(32);for(tt=0;tt<32;++tt)zo[tt]=5;var tt,hl=He(Ue,9,1),ul=He(zo,5,1),wn=function(o){for(var i=o[0],r=1;r<o.length;++r)o[r]>i&&(i=o[r]);return i},Ot=function(o,i,r){var a=i/8|0;return(o[a]|o[a+1]<<8)>>(i&7)&r},Ln=function(o,i){var r=i/8|0;return(o[r]|o[r+1]<<8|o[r+2]<<16)>>(i&7)},cl=function(o){return(o+7)/8|0},fl=function(o,i,r){(i==null||i<0)&&(i=0),(r==null||r>o.length)&&(r=o.length);var a=new Lt(r-i);return a.set(o.subarray(i,r)),a},dl=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],wt=function(o,i,r){var a=new Error(i||dl[o]);if(a.code=o,Error.captureStackTrace&&Error.captureStackTrace(a,wt),!r)throw a;return a},zn=function(o,i,r,a){var l=o.length,u=a?a.length:0;if(!l||i.f&&!i.l)return r||new Lt(0);var c=!r||i.i!=2,d=i.i;r||(r=new Lt(l*3));var _=function(Ut){var re=r.length;if(Ut>re){var Xe=new Lt(Math.max(re*2,Ut));Xe.set(r),r=Xe}},p=i.f||0,v=i.p||0,w=i.b||0,T=i.l,z=i.d,A=i.m,R=i.n,g=l*8;do{if(!T){p=Ot(o,v,1);var y=Ot(o,v+1,3);if(v+=3,y)if(y==1)T=hl,z=ul,A=9,R=5;else if(y==2){var k=Ot(o,v,31)+257,E=Ot(o,v+10,15)+4,F=k+Ot(o,v+5,31)+1;v+=14;for(var B=new Lt(F),I=new Lt(19),V=0;V<E;++V)I[sl[V]]=Ot(o,v+V*3,7);v+=E*3;for(var $=wn(I),et=(1<<$)-1,Zt=He(I,$,1),V=0;V<F;){var ot=Zt[Ot(o,v,et)];v+=ot&15;var x=ot>>4;if(x<16)B[V++]=x;else{var ft=0,j=0;for(x==16?(j=3+Ot(o,v,3),v+=2,ft=B[V-1]):x==17?(j=3+Ot(o,v,7),v+=3):x==18&&(j=11+Ot(o,v,127),v+=7);j--;)B[V++]=ft}}var $t=B.subarray(0,k),Z=B.subarray(k);A=wn($t),R=wn(Z),T=He($t,A,1),z=He(Z,R,1)}else wt(1);else{var x=cl(v)+4,C=o[x-4]|o[x-3]<<8,O=x+C;if(O>l){d&&wt(0);break}c&&_(w+C),r.set(o.subarray(x,O),w),i.b=w+=C,i.p=v=O*8,i.f=p;continue}if(v>g){d&&wt(0);break}}c&&_(w+131072);for(var J=(1<<A)-1,it=(1<<R)-1,dt=v;;dt=v){var ft=T[Ln(o,v)&J],nt=ft>>4;if(v+=ft&15,v>g){d&&wt(0);break}if(ft||wt(2),nt<256)r[w++]=nt;else if(nt==256){dt=v,T=null;break}else{var Q=nt-254;if(nt>264){var V=nt-257,W=xo[V];Q=Ot(o,v,(1<<W)-1)+To[V],v+=W}var xt=z[Ln(o,v)&it],Tt=xt>>4;xt||wt(3),v+=xt&15;var Z=ll[Tt];if(Tt>3){var W=wo[Tt];Z+=Ln(o,v)&(1<<W)-1,v+=W}if(v>g){d&&wt(0);break}c&&_(w+131072);var ie=w+Q;if(w<Z){var ne=u-Z,be=Math.min(Z,ie);for(ne+w<0&&wt(3);w<be;++w)r[w]=a[ne+w]}for(;w<ie;w+=4)r[w]=r[w-Z],r[w+1]=r[w+1-Z],r[w+2]=r[w+2-Z],r[w+3]=r[w+3-Z];w=ie}}i.l=T,i.p=dt,i.b=w,i.f=p,T&&(p=1,i.m=A,i.d=z,i.n=R)}while(!p);return w==r.length?r:fl(r,0,w)},ml=new Lt(0),_l=function(o){(o[0]!=31||o[1]!=139||o[2]!=8)&&wt(6,"invalid gzip data");var i=o[3],r=10;i&4&&(r+=(o[10]|o[11]<<8)+2);for(var a=(i>>3&1)+(i>>4&1);a>0;a-=!o[r++]);return r+(i&2)},pl=function(o){var i=o.length;return(o[i-4]|o[i-3]<<8|o[i-2]<<16|o[i-1]<<24)>>>0},gl=function(o,i){return((o[0]&15)!=8||o[0]>>4>7||(o[0]<<8|o[1])%31)&&wt(6,"invalid zlib data"),(o[1]>>5&1)==+!i&&wt(6,"invalid zlib data: "+(o[1]&32?"need":"unexpected")+" dictionary"),(o[1]>>3&4)+2};function yl(o,i){return zn(o,{i:2},i&&i.out,i&&i.dictionary)}function vl(o,i){var r=_l(o);return r+8>o.length&&wt(6,"invalid gzip data"),zn(o.subarray(r,-8),{i:2},i&&i.out||new Lt(pl(o)),i&&i.dictionary)}function bl(o,i){return zn(o.subarray(gl(o,i&&i.dictionary),-4),{i:2},i&&i.out,i&&i.dictionary)}function Tn(o,i){return o[0]==31&&o[1]==139&&o[2]==8?vl(o,i):(o[0]&15)!=8||o[0]>>4>7||(o[0]<<8|o[1])%31?yl(o,i):bl(o,i)}var xl=typeof TextDecoder<"u"&&new TextDecoder,wl=0;try{xl.decode(ml,{stream:!0}),wl=1}catch{}var Mo=(o,i)=>o*ye(2,i),je=(o,i)=>Math.floor(o/ye(2,i)),Pi=(o,i)=>Mo(o.getUint16(i+1,!0),8)+o.getUint8(i),So=(o,i)=>Mo(o.getUint32(i+2,!0),16)+o.getUint16(i,!0),Ll=(o,i,r,a,l)=>{if(o!==a.getUint8(l))return o-a.getUint8(l);let u=Pi(a,l+1);if(i!==u)return i-u;let c=Pi(a,l+4);return r!==c?r-c:0},Pl=(o,i,r,a)=>{let l=Co(o,i|128,r,a);return l?{z:i,x:r,y:a,offset:l[0],length:l[1],isDir:!0}:null},vo=(o,i,r,a)=>{let l=Co(o,i,r,a);return l?{z:i,x:r,y:a,offset:l[0],length:l[1],isDir:!1}:null},Co=(o,i,r,a)=>{let l=0,u=o.byteLength/17-1;for(;l<=u;){let c=u+l>>1,d=Ll(i,r,a,o,c*17);if(d>0)l=c+1;else if(d<0)u=c-1;else return[So(o,c*17+7),o.getUint32(c*17+13,!0)]}return null},Tl=(o,i)=>o.isDir&&!i.isDir?1:!o.isDir&&i.isDir?-1:o.z!==i.z?o.z-i.z:o.x!==i.x?o.x-i.x:o.y-i.y,Ao=(o,i)=>{let r=o.getUint8(i*17);return{z:r&127,x:Pi(o,i*17+1),y:Pi(o,i*17+4),offset:So(o,i*17+7),length:o.getUint32(i*17+13,!0),isDir:r>>7===1}},bo=o=>{let i=[],r=new DataView(o);for(let a=0;a<r.byteLength/17;a++)i.push(Ao(r,a));return kl(i)},kl=o=>{o.sort(Tl);let i=new ArrayBuffer(17*o.length),r=new Uint8Array(i);for(let a=0;a<o.length;a++){let l=o[a],u=l.z;l.isDir&&(u=u|128),r[a*17]=u,r[a*17+1]=l.x&255,r[a*17+2]=l.x>>8&255,r[a*17+3]=l.x>>16&255,r[a*17+4]=l.y&255,r[a*17+5]=l.y>>8&255,r[a*17+6]=l.y>>16&255,r[a*17+7]=l.offset&255,r[a*17+8]=je(l.offset,8)&255,r[a*17+9]=je(l.offset,16)&255,r[a*17+10]=je(l.offset,24)&255,r[a*17+11]=je(l.offset,32)&255,r[a*17+12]=je(l.offset,48)&255,r[a*17+13]=l.length&255,r[a*17+14]=l.length>>8&255,r[a*17+15]=l.length>>16&255,r[a*17+16]=l.length>>24&255}return i},zl=(o,i)=>{if(o.byteLength<17)return null;let r=o.byteLength/17,a=Ao(o,r-1);if(a.isDir){let l=a.z,u=i.z-l,c=Math.trunc(i.x/(1<<u)),d=Math.trunc(i.y/(1<<u));return{z:l,x:c,y:d}}return null};function Ml(o){return pt(this,null,function*(){let i=yield o.getBytes(0,512e3),r=new DataView(i.data),a=r.getUint32(4,!0),l=r.getUint16(8,!0),u=new TextDecoder("utf-8"),c=JSON.parse(u.decode(new DataView(i.data,10,a))),d=0;c.compression==="gzip"&&(d=2);let _=0;"minzoom"in c&&(_=+c.minzoom);let p=0;"maxzoom"in c&&(p=+c.maxzoom);let v=0,w=0,T=0,z=-180,A=-85,R=180,g=85;if(c.bounds){let x=c.bounds.split(",");z=+x[0],A=+x[1],R=+x[2],g=+x[3]}if(c.center){let x=c.center.split(",");v=+x[0],w=+x[1],T=+x[2]}return{specVersion:r.getUint16(2,!0),rootDirectoryOffset:10+a,rootDirectoryLength:l*17,jsonMetadataOffset:10,jsonMetadataLength:a,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:d,tileType:1,minZoom:_,maxZoom:p,minLon:z,minLat:A,maxLon:R,maxLat:g,centerZoom:T,centerLon:v,centerLat:w,etag:i.etag}})}function Sl(o,i,r,a,l,u,c){return pt(this,null,function*(){let d=yield r.getArrayBuffer(i,o.rootDirectoryOffset,o.rootDirectoryLength,o);o.specVersion===1&&(d=bo(d));let _=vo(new DataView(d),a,l,u);if(_){let w=(yield i.getBytes(_.offset,_.length,c)).data,T=new DataView(w);return T.getUint8(0)===31&&T.getUint8(1)===139&&(w=Tn(new Uint8Array(w))),{data:w}}let p=zl(new DataView(d),{z:a,x:l,y:u});if(p){let v=Pl(new DataView(d),p.z,p.x,p.y);if(v){let w=yield r.getArrayBuffer(i,v.offset,v.length,o);o.specVersion===1&&(w=bo(w));let T=vo(new DataView(w),a,l,u);if(T){let A=(yield i.getBytes(T.offset,T.length,c)).data,R=new DataView(A);return R.getUint8(0)===31&&R.getUint8(1)===139&&(A=Tn(new Uint8Array(A))),{data:A}}}}})}var Oo={getHeader:Ml,getZxy:Sl};function pe(o,i){return(i>>>0)*4294967296+(o>>>0)}function Cl(o,i){let r=i.buf,a=r[i.pos++],l=(a&112)>>4;if(a<128||(a=r[i.pos++],l|=(a&127)<<3,a<128)||(a=r[i.pos++],l|=(a&127)<<10,a<128)||(a=r[i.pos++],l|=(a&127)<<17,a<128)||(a=r[i.pos++],l|=(a&127)<<24,a<128)||(a=r[i.pos++],l|=(a&1)<<31,a<128))return pe(o,l);throw new Error("Expected varint not more than 10 bytes")}function Ve(o){let i=o.buf,r=i[o.pos++],a=r&127;return r<128||(r=i[o.pos++],a|=(r&127)<<7,r<128)||(r=i[o.pos++],a|=(r&127)<<14,r<128)||(r=i[o.pos++],a|=(r&127)<<21,r<128)?a:(r=i[o.pos],a|=(r&15)<<28,Cl(a,o))}function Al(o,i,r,a){if(a===0){r===1&&(i[0]=o-1-i[0],i[1]=o-1-i[1]);let l=i[0];i[0]=i[1],i[1]=l}}var Ol=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function El(o,i,r){if(o>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(i>ye(2,o)-1||r>ye(2,o)-1)throw Error("tile x/y outside zoom level bounds");let a=Ol[o],l=ye(2,o),u=0,c=0,d=0,_=[i,r],p=l/2;for(;p>0;)u=(_[0]&p)>0?1:0,c=(_[1]&p)>0?1:0,d+=p*p*(3*u^c),Al(p,_,u,c),p=p/2;return a+d}function Eo(o,i){return pt(this,null,function*(){if(i===1||i===0)return o;if(i===2){if(typeof globalThis.DecompressionStream>"u")return Tn(new Uint8Array(o));let r=new Response(o).body;if(!r)throw Error("Failed to read response stream");let a=r.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(a).arrayBuffer()}throw Error("Compression method not supported")})}function Bl(o){return o===1?".mvt":o===2?".png":o===3?".jpg":o===4?".webp":o===5?".avif":""}var Il=127;function Dl(o,i){let r=0,a=o.length-1;for(;r<=a;){let l=a+r>>1,u=i-o[l].tileId;if(u>0)r=l+1;else if(u<0)a=l-1;else return o[l]}return a>=0&&(o[a].runLength===0||i-o[a].tileId<o[a].runLength)?o[a]:null}var Fl=class{constructor(o,i=new Headers){this.url=o,this.customHeaders=i,this.mustReload=!1;let r="";"navigator"in globalThis&&(r=globalThis.navigator.userAgent||"");let a=r.indexOf("Windows")>-1,l=/Chrome|Chromium|Edg|OPR|Brave/.test(r);this.chromeWindowsNoCache=!1,a&&l&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(o){this.customHeaders=o}getBytes(o,i,r,a){return pt(this,null,function*(){let l,u;r?u=r:(l=new AbortController,u=l.signal);let c=new Headers(this.customHeaders);c.set("range",`bytes=${o}-${o+i-1}`);let d;this.mustReload?d="reload":this.chromeWindowsNoCache&&(d="no-store");let _=yield fetch(this.url,{signal:u,cache:d,headers:c});if(o===0&&_.status===416){let T=_.headers.get("Content-Range");if(!T||!T.startsWith("bytes */"))throw Error("Missing content-length on 416 response");let z=+T.substr(8);_=yield fetch(this.url,{signal:u,cache:"reload",headers:{range:`bytes=0-${z-1}`}})}let p=_.headers.get("Etag");if(p?.startsWith("W/")&&(p=null),_.status===416||a&&p&&p!==a)throw this.mustReload=!0,new kn(`Server returned non-matching ETag ${a} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(_.status>=300)throw Error(`Bad response code: ${_.status}`);let v=_.headers.get("Content-Length");if(_.status===200&&(!v||+v>i))throw l&&l.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield _.arrayBuffer(),etag:p||void 0,cacheControl:_.headers.get("Cache-Control")||void 0,expires:_.headers.get("Expires")||void 0}})}};function Et(o,i){let r=o.getUint32(i+4,!0),a=o.getUint32(i+0,!0);return r*ye(2,32)+a}function Zl(o,i){let r=new DataView(o),a=r.getUint8(7);if(a>3)throw Error(`Archive is spec version ${a} but this library supports up to spec version 3`);return{specVersion:a,rootDirectoryOffset:Et(r,8),rootDirectoryLength:Et(r,16),jsonMetadataOffset:Et(r,24),jsonMetadataLength:Et(r,32),leafDirectoryOffset:Et(r,40),leafDirectoryLength:Et(r,48),tileDataOffset:Et(r,56),tileDataLength:Et(r,64),numAddressedTiles:Et(r,72),numTileEntries:Et(r,80),numTileContents:Et(r,88),clustered:r.getUint8(96)===1,internalCompression:r.getUint8(97),tileCompression:r.getUint8(98),tileType:r.getUint8(99),minZoom:r.getUint8(100),maxZoom:r.getUint8(101),minLon:r.getInt32(102,!0)/1e7,minLat:r.getInt32(106,!0)/1e7,maxLon:r.getInt32(110,!0)/1e7,maxLat:r.getInt32(114,!0)/1e7,centerZoom:r.getUint8(118),centerLon:r.getInt32(119,!0)/1e7,centerLat:r.getInt32(123,!0)/1e7,etag:i}}function Bo(o){let i={buf:new Uint8Array(o),pos:0},r=Ve(i),a=[],l=0;for(let u=0;u<r;u++){let c=Ve(i);a.push({tileId:l+c,offset:0,length:0,runLength:1}),l+=c}for(let u=0;u<r;u++)a[u].runLength=Ve(i);for(let u=0;u<r;u++)a[u].length=Ve(i);for(let u=0;u<r;u++){let c=Ve(i);c===0&&u>0?a[u].offset=a[u-1].offset+a[u-1].length:a[u].offset=c-1}return a}function Rl(o){let i=new DataView(o);return i.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):i.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var kn=class extends Error{};function Nl(o,i){return pt(this,null,function*(){let r=yield o.getBytes(0,16384);if(new DataView(r.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(Rl(r.data)<3)return[yield Oo.getHeader(o)];let l=r.data.slice(0,Il),u=Zl(l,r.etag),c=r.data.slice(u.rootDirectoryOffset,u.rootDirectoryOffset+u.rootDirectoryLength),d=`${o.getKey()}|${u.etag||""}|${u.rootDirectoryOffset}|${u.rootDirectoryLength}`,_=Bo(yield i(c,u.internalCompression));return[u,[d,_.length,_]]})}function jl(o,i,r,a,l){return pt(this,null,function*(){let u=yield o.getBytes(r,a,void 0,l.etag),c=yield i(u.data,l.internalCompression),d=Bo(c);if(d.length===0)throw new Error("Empty directory is invalid");return d})}var Vl=class{constructor(o=100,i=!0,r=Eo){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=o,this.counter=1,this.decompress=r}getHeader(o){return pt(this,null,function*(){let i=o.getKey(),r=this.cache.get(i);if(r)return r.lastUsed=this.counter++,yield r.data;let a=new Promise((l,u)=>{Nl(o,this.decompress).then(c=>{c[1]&&this.cache.set(c[1][0],{lastUsed:this.counter++,data:Promise.resolve(c[1][2])}),l(c[0]),this.prune()}).catch(c=>{u(c)})});return this.cache.set(i,{lastUsed:this.counter++,data:a}),a})}getDirectory(o,i,r,a){return pt(this,null,function*(){let l=`${o.getKey()}|${a.etag||""}|${i}|${r}`,u=this.cache.get(l);if(u)return u.lastUsed=this.counter++,yield u.data;let c=new Promise((d,_)=>{jl(o,this.decompress,i,r,a).then(p=>{d(p),this.prune()}).catch(p=>{_(p)})});return this.cache.set(l,{lastUsed:this.counter++,data:c}),c})}getArrayBuffer(o,i,r,a){return pt(this,null,function*(){let l=`${o.getKey()}|${a.etag||""}|${i}|${r}`,u=this.cache.get(l);if(u)return u.lastUsed=this.counter++,yield u.data;let c=new Promise((d,_)=>{o.getBytes(i,r,void 0,a.etag).then(p=>{d(p.data),this.cache.has(l),this.prune()}).catch(p=>{_(p)})});return this.cache.set(l,{lastUsed:this.counter++,data:c}),c})}prune(){if(this.cache.size>=this.maxCacheEntries){let o=1/0,i;this.cache.forEach((r,a)=>{r.lastUsed<o&&(o=r.lastUsed,i=a)}),i&&this.cache.delete(i)}}invalidate(o){return pt(this,null,function*(){let i=o.getKey();if(this.invalidations.get(i))return yield this.invalidations.get(i);this.cache.delete(o.getKey());let r=new Promise((a,l)=>{this.getHeader(o).then(u=>{a(),this.invalidations.delete(i)}).catch(u=>{l(u)})});this.invalidations.set(i,r)})}},Io=class{constructor(o,i,r){typeof o=="string"?this.source=new Fl(o):this.source=o,r?this.decompress=r:this.decompress=Eo,i?this.cache=i:this.cache=new Vl}getHeader(){return pt(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(o,i,r,a){return pt(this,null,function*(){let l=El(o,i,r),u=yield this.cache.getHeader(this.source);if(u.specVersion<3)return Oo.getZxy(u,this.source,this.cache,o,i,r,a);if(o<u.minZoom||o>u.maxZoom)return;let c=u.rootDirectoryOffset,d=u.rootDirectoryLength;for(let _=0;_<=3;_++){let p=yield this.cache.getDirectory(this.source,c,d,u),v=Dl(p,l);if(v){if(v.runLength>0){let w=yield this.source.getBytes(u.tileDataOffset+v.offset,v.length,a,u.etag);return{data:yield this.decompress(w.data,u.tileCompression),cacheControl:w.cacheControl,expires:w.expires}}c=u.leafDirectoryOffset+v.offset,d=v.length}else return}throw Error("Maximum directory depth exceeded")})}getZxy(o,i,r,a){return pt(this,null,function*(){try{return yield this.getZxyAttempt(o,i,r,a)}catch(l){if(l instanceof kn)return this.cache.invalidate(this.source),yield this.getZxyAttempt(o,i,r,a);throw l}})}getMetadataAttempt(){return pt(this,null,function*(){let o=yield this.cache.getHeader(this.source),i=yield this.source.getBytes(o.jsonMetadataOffset,o.jsonMetadataLength,void 0,o.etag),r=yield this.decompress(i.data,o.internalCompression),a=new TextDecoder("utf-8");return JSON.parse(a.decode(r))})}getMetadata(){return pt(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(o){if(o instanceof kn)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw o}})}getTileJson(o){return pt(this,null,function*(){let i=yield this.getHeader(),r=yield this.getMetadata(),a=Bl(i.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${o}/{z}/{x}/{y}${a}`],vector_layers:r.vector_layers,attribution:r.attribution,description:r.description,name:r.name,version:r.version,bounds:[i.minLon,i.minLat,i.maxLon,i.maxLat],center:[i.centerLon,i.centerLat,i.centerZoom],minzoom:i.minZoom,maxzoom:i.maxZoom}})}};function Xt(o){return`${o.x}:${o.y}:${o.z}`}var Hl=(o,i,r)=>{o.pos=i;let a=o.readVarint()+o.pos,l=1,u=0,c=0,d=0,_=1/0,p=-1/0,v=1/0,w=-1/0,T=[],z=[];for(;o.pos<a;){if(u<=0){let A=o.readVarint();l=A&7,u=A>>3}if(u--,l===1||l===2)c+=o.readSVarint()*r,d+=o.readSVarint()*r,c<_&&(_=c),c>p&&(p=c),d<v&&(v=d),d>w&&(w=d),l===1&&(z.length>0&&T.push(z),z=[]),z.push(new X(c,d));else if(l===7)z&&z.push(z[0].clone());else throw new Error(`unknown command ${l}`)}return z&&T.push(z),{geom:T,bbox:{minX:_,minY:v,maxX:p,maxY:w}}};function Ro(o,i){let r=new xi(new Ne(o)),a=new Map;for(let[l,u]of Object.entries(r.layers)){let c=[],d=u;for(let _=0;_<d.length;_++){let p=Hl(d.feature(_)._pbf,d.feature(_)._geometry,i/d.extent),v=0;for(let w of p.geom)v+=w.length;c.push({id:d.feature(_).id,geomType:d.feature(_).type,geom:p.geom,numVertices:v,bbox:p.bbox,props:d.feature(_).properties})}a.set(l,c)}return a}var We=class{constructor(i,r){S(this,"p");S(this,"zoomaborts");S(this,"shouldCancelZooms");typeof i=="string"?this.p=new Io(i):this.p=i,this.zoomaborts=[],this.shouldCancelZooms=r}async get(i,r){this.shouldCancelZooms&&(this.zoomaborts=this.zoomaborts.filter(c=>c.z!==i.z?(c.controller.abort(),!1):!0));let a=new AbortController;this.zoomaborts.push({z:i.z,controller:a});let l=a.signal,u=await this.p.getZxy(i.z,i.x,i.y,l);return u?Ro(u.data,r):new Map}},zi=class{constructor(i,r){S(this,"url");S(this,"zoomaborts");S(this,"shouldCancelZooms");this.url=i,this.zoomaborts=[],this.shouldCancelZooms=r}async get(i,r){this.shouldCancelZooms&&(this.zoomaborts=this.zoomaborts.filter(c=>c.z!==i.z?(c.controller.abort(),!1):!0));let a=this.url.replace("{z}",i.z.toString()).replace("{x}",i.x.toString()).replace("{y}",i.y.toString()),l=new AbortController;this.zoomaborts.push({z:i.z,controller:l});let u=l.signal;return new Promise((c,d)=>{fetch(a,{signal:u}).then(_=>_.arrayBuffer()).then(_=>{let p=Ro(_,r);c(p)}).catch(_=>{d(_)})})}},Mn=6378137,Do=85.0511287798,Ti=Mn*Math.PI,Ul=o=>{let i=Math.PI/180,r=Math.max(Math.min(Do,o[0]),-Do),a=Math.sin(r*i);return new X(Mn*o[1]*i,Mn*Math.log((1+a)/(1-a))/2)};function Fo(o){return o*o}function ki(o,i){return Fo(o.x-i.x)+Fo(o.y-i.y)}function Wl(o,i,r){let a=ki(i,r);if(a===0)return ki(o,i);let l=((o.x-i.x)*(r.x-i.x)+(o.y-i.y)*(r.y-i.y))/a;return l=Math.max(0,Math.min(1,l)),ki(o,new X(i.x+l*(r.x-i.x),i.y+l*(r.y-i.y)))}function Zo(o,i){let r=!1;for(let a=0,l=i.length-1;a<i.length;l=a++){let u=i[a].x,c=i[a].y,d=i[l].x,_=i[l].y;c>o.y!=_>o.y&&o.x<(d-u)*(o.y-c)/(_-c)+u&&(r=!r)}return r}function Yl(o){let i=0;for(let r=0;r<o.length;r++){let a=(r+1)%o.length;i+=o[r].x*o[a].y,i-=o[a].x*o[r].y}return i<0}function Xl(o,i){let r=!1;for(let a of i)if(Yl(a))Zo(o,a)&&(r=!1);else{if(r)return!0;Zo(o,a)&&(r=!0)}return r}function ql(o,i){let r=1/0;for(let a of i){let l=Math.sqrt(ki(o,a[0]));l<r&&(r=l)}return r}function $l(o,i){let r=1/0;for(let a of i)for(let l=0;l<a.length-1;l++){let u=Math.sqrt(Wl(o,a[l],a[l+1]));u<r&&(r=u)}return r}var Mi=class{constructor(i,r){S(this,"source");S(this,"cache");S(this,"inflight");S(this,"tileSize");this.source=i,this.cache=new Map,this.inflight=new Map,this.tileSize=r}async get(i){let r=Xt(i);return new Promise((a,l)=>{let u=this.cache.get(r);if(u)u.used=performance.now(),a(u.data);else{let c=this.inflight.get(r);c?c.push({resolve:a,reject:l}):(this.inflight.set(r,[]),this.source.get(i,this.tileSize).then(d=>{this.cache.set(r,{used:performance.now(),data:d});let _=this.inflight.get(r);if(_)for(let p of _)p.resolve(d);if(this.inflight.delete(r),a(d),this.cache.size>=64){let p=1/0,v;this.cache.forEach((w,T)=>{w.used<p&&(p=w.used,v=T)}),v&&this.cache.delete(v)}}).catch(d=>{let _=this.inflight.get(r);if(_)for(let p of _)p.reject(d);this.inflight.delete(r),l(d)}))}})}queryFeatures(i,r,a,l){let u=Ul([r,i]),c=new X((u.x+Ti)/(Ti*2),1-(u.y+Ti)/(Ti*2));c.x>1&&(c.x=c.x-Math.floor(c.x));let d=c.mult(1<<a),_=Math.floor(d.x),p=Math.floor(d.y),v=Xt({z:a,x:_,y:p}),w=[],T=this.cache.get(v);if(T){let z=new X((d.x-_)*this.tileSize,(d.y-p)*this.tileSize);for(let[A,R]of T.data.entries())for(let g of R)g.geomType===1?ql(z,g.geom)<l&&w.push({feature:g,layerName:A}):g.geomType===2?$l(z,g.geom)<l&&w.push({feature:g,layerName:A}):Xl(z,g.geom)&&w.push({feature:g,layerName:A})}return w}};var lt=class{constructor(i){S(this,"pattern");S(this,"fill");S(this,"opacity");S(this,"stroke");S(this,"width");S(this,"perFeature");S(this,"doStroke");this.pattern=i.pattern,this.fill=new vt(i.fill,"black"),this.opacity=new at(i.opacity,1),this.stroke=new vt(i.stroke,"black"),this.width=new at(i.width,0),this.perFeature=(this.fill.perFeature||this.opacity.perFeature||this.stroke.perFeature||this.width.perFeature||i.perFeature)??!1,this.doStroke=!1}before(i,r){if(!this.perFeature){i.globalAlpha=this.opacity.get(r),i.fillStyle=this.fill.get(r),i.strokeStyle=this.stroke.get(r);let a=this.width.get(r);a>0&&(this.doStroke=!0),i.lineWidth=a}if(this.pattern){let a=i.createPattern(this.pattern,"repeat");a&&(i.fillStyle=a)}}draw(i,r,a,l){let u=!1;if(this.perFeature){i.globalAlpha=this.opacity.get(a,l),i.fillStyle=this.fill.get(a,l);let d=this.width.get(a,l);d&&(u=!0,i.strokeStyle=this.stroke.get(a,l),i.lineWidth=d)}let c=()=>{i.fill(),(u||this.doStroke)&&i.stroke()};i.beginPath();for(let d of r)for(let _=0;_<d.length;_++){let p=d[_];_===0?i.moveTo(p.x,p.y):i.lineTo(p.x,p.y)}c()}};function Kl(o,i){let r=0;for(;i[r+1][0]<o;)r++;return r}function Gl(o,i,r){return o*(r-i)+i}function Jl(o,i,r,a){let l=a[i+1][0]-a[i][0],u=o-a[i][0];return l===0?0:r===1?u/l:(r**u-1)/(r**l-1)}function St(o,i){return r=>{if(i.length<1)return 0;if(r<=i[0][0])return i[0][1];if(r>=i[i.length-1][0])return i[i.length-1][1];let a=Kl(r,i),l=Jl(r,a,o,i);return Gl(l,i[a][1],i[a+1][1])}}function An(o){return St(1,o)}var gt=class{constructor(i){S(this,"color");S(this,"width");S(this,"opacity");S(this,"dash");S(this,"dashColor");S(this,"dashWidth");S(this,"skip");S(this,"perFeature");S(this,"lineCap");S(this,"lineJoin");this.color=new vt(i.color,"black"),this.width=new at(i.width),this.opacity=new at(i.opacity),this.dash=i.dash?new vi(i.dash):null,this.dashColor=new vt(i.dashColor,"black"),this.dashWidth=new at(i.dashWidth,1),this.lineCap=new vt(i.lineCap,"butt"),this.lineJoin=new vt(i.lineJoin,"miter"),this.skip=!1,this.perFeature=!!(this.dash?.perFeature||this.color.perFeature||this.opacity.perFeature||this.width.perFeature||this.lineCap.perFeature||this.lineJoin.perFeature||i.perFeature)}before(i,r){this.perFeature||(i.strokeStyle=this.color.get(r),i.lineWidth=this.width.get(r),i.globalAlpha=this.opacity.get(r),i.lineCap=this.lineCap.get(r),i.lineJoin=this.lineJoin.get(r))}draw(i,r,a,l){if(this.skip)return;let u=()=>{this.perFeature&&(i.globalAlpha=this.opacity.get(a,l),i.lineCap=this.lineCap.get(a,l),i.lineJoin=this.lineJoin.get(a,l)),this.dash?(i.save(),this.perFeature?(i.lineWidth=this.dashWidth.get(a,l),i.strokeStyle=this.dashColor.get(a,l),i.setLineDash(this.dash.get(a,l))):i.setLineDash(this.dash.get(a)),i.stroke(),i.restore()):(i.save(),this.perFeature&&(i.lineWidth=this.width.get(a,l),i.strokeStyle=this.color.get(a,l)),i.stroke(),i.restore())};i.beginPath();for(let c of r)for(let d=0;d<c.length;d++){let _=c[d];d===0?i.moveTo(_.x,_.y):i.lineTo(_.x,_.y)}u()}};var Si=class{constructor(i){S(this,"radius");S(this,"fill");S(this,"stroke");S(this,"width");S(this,"opacity");this.radius=new at(i.radius,3),this.fill=new vt(i.fill,"black"),this.stroke=new vt(i.stroke,"white"),this.width=new at(i.width,0),this.opacity=new at(i.opacity)}draw(i,r,a,l){i.globalAlpha=this.opacity.get(a,l);let u=this.radius.get(a,l),c=this.width.get(a,l);c>0&&(i.strokeStyle=this.stroke.get(a,l),i.lineWidth=c,i.beginPath(),i.arc(r[0][0].x,r[0][0].y,u+c/2,0,2*Math.PI),i.stroke()),i.fillStyle=this.fill.get(a,l),i.beginPath(),i.arc(r[0][0].x,r[0][0].y,u,0,2*Math.PI),i.fill()}place(i,r,a){let l=r[0],u=new X(r[0][0].x,r[0][0].y),c=this.radius.get(i.zoom,a),d={minX:u.x-c,minY:u.y-c,maxX:u.x+c,maxY:u.y+c};return[{anchor:u,bboxes:[d],draw:p=>{this.draw(p,[[new X(0,0)]],i.zoom,a)}}]}};var Ql=(o,i)=>({minX:Math.min(o.minX,i.minX),minY:Math.min(o.minY,i.minY),maxX:Math.max(o.maxX,i.maxX),maxY:Math.max(o.maxY,i.maxY)}),Ci=class{constructor(i){S(this,"list");this.list=i}place(i,r,a){let l=this.list[0];if(!l)return;let u=l.place(i,r,a);if(!u)return;let c=u[0],d=c.anchor,_=c.bboxes[0],p=[c.draw];for(let w=1;w<this.list.length;w++){if(u=this.list[w].place(i,r,a),!u)return;c=u[0],_=Ql(_,c.bboxes[0]),p.push(c.draw)}return[{anchor:d,bboxes:[_],draw:w=>{for(let T of p)T(w)}}]}},Sn=class{constructor(i){S(this,"symbolizer");this.symbolizer=i}place(i,r,a){let l=r[0][0],u=this.symbolizer.place(i,[[new X(0,0)]],a);if(!u||u.length===0)return;let c=u[0],d=c.bboxes[0],_=d.maxX-d.minX,p=d.maxY-d.minY,v={minX:l.x-_/2,maxX:l.x+_/2,minY:l.y-p/2,maxY:l.y+p/2};return[{anchor:l,bboxes:[v],draw:T=>{T.translate(-_/2,p/2-d.maxY),c.draw(T,{justify:2})}}]}};var Ai=class{constructor(i){S(this,"font");S(this,"text");S(this,"fill");S(this,"stroke");S(this,"width");S(this,"lineHeight");S(this,"letterSpacing");S(this,"maxLineCodeUnits");S(this,"justify");this.font=new Ze(i),this.text=new Fe(i),this.fill=new vt(i.fill,"black"),this.stroke=new vt(i.stroke,"black"),this.width=new at(i.width,0),this.lineHeight=new at(i.lineHeight,1),this.letterSpacing=new at(i.letterSpacing,0),this.maxLineCodeUnits=new at(i.maxLineChars,15),this.justify=i.justify}place(i,r,a){let l=this.text.get(i.zoom,a);if(!l)return;let u=this.font.get(i.zoom,a);i.scratch.font=u;let c=this.letterSpacing.get(i.zoom,a),d=vn(l,this.maxLineCodeUnits.get(i.zoom,a)),_="",p=0;for(let x of d)x.length>p&&(p=x.length,_=x);let v=i.scratch.measureText(_),w=v.width+c*(p-1),T=v.actualBoundingBoxAscent,z=v.actualBoundingBoxDescent,A=(T+z)*this.lineHeight.get(i.zoom,a),R=new X(r[0][0].x,r[0][0].y),g={minX:R.x,minY:R.y-T,maxX:R.x+w,maxY:R.y+z+(d.length-1)*A};return[{anchor:R,bboxes:[g],draw:(x,C)=>{x.globalAlpha=1,x.font=u,x.fillStyle=this.fill.get(i.zoom,a);let O=this.width.get(i.zoom,a),k=0;for(let E of d){let F=0;if(this.justify===2||C&&C.justify===2?F=(w-x.measureText(E).width)/2:(this.justify===3||C&&C.justify===3)&&(F=w-x.measureText(E).width),O)if(x.lineWidth=O*2,x.strokeStyle=this.stroke.get(i.zoom,a),c>0){let B=F;for(let I of E)x.strokeText(I,B,k),B+=x.measureText(I).width+c}else x.strokeText(E,F,k);if(c>0){let B=F;for(let I of E)x.fillText(I,B,k),B+=x.measureText(I).width+c}else x.fillText(E,F,k);k+=A}}}]}},qt=class{constructor(i){S(this,"centered");this.centered=new Sn(new Ai(i))}place(i,r,a){return this.centered.place(i,r,a)}},Cn=class{constructor(i,r){S(this,"symbolizer");S(this,"offsetX");S(this,"offsetY");S(this,"justify");S(this,"placements");S(this,"ddValues");this.symbolizer=i,this.offsetX=new at(r.offsetX,0),this.offsetY=new at(r.offsetY,0),this.justify=r.justify??void 0,this.placements=r.placements??[2,6,8,4,1,3,5,7],this.ddValues=r.ddValues??(()=>({}))}place(i,r,a){if(a.geomType!==1)return;let l=r[0][0],u=this.symbolizer.place(i,[[new X(0,0)]],a);if(!u||u.length===0)return;let c=u[0],d=c.bboxes[0],_=this.offsetX,p=this.offsetY,v=this.justify,w=this.placements,{offsetX:T,offsetY:z,justify:A,placements:R}=this.ddValues(i.zoom,a)||{};T&&(_=new at(T,0)),z&&(p=new at(z,0)),A&&(v=A),R&&(w=R);let g=_.get(i.zoom,a),y=p.get(i.zoom,a),x=(F,B)=>({minX:F.x+B.x+d.minX,minY:F.y+B.y+d.minY,maxX:F.x+B.x+d.maxX,maxY:F.y+B.y+d.maxY}),C=new X(g,y),O,k=F=>{F.translate(C.x,C.y),c.draw(F,{justify:O})},E=(F,B)=>{let I=x(F,B);if(!i.index.bboxCollides(I,i.order))return[{anchor:l,bboxes:[I],draw:k}]};for(let F of w){let B=this.computeXaxisOffset(g,d,F),I=this.computeYaxisOffset(y,d,F);return O=this.computeJustify(v,F),C=new X(B,I),E(l,C)}}computeXaxisOffset(i,r,a){let l=r.maxX,u=l/2;return[1,5].includes(a)?i-u:[8,7,6].includes(a)?i-l:i}computeYaxisOffset(i,r,a){let l=Math.abs(r.minY),u=r.maxY,c=(r.minY+r.maxY)/2;return[3,7].includes(a)?i-c:[8,2,1].includes(a)?i-u:[6,4,5].includes(a)?i+l:i}computeJustify(i,r){return i||([1,5].includes(r)?2:[2,3,4].includes(r)?1:3)}},Oi=class{constructor(i){S(this,"symbolizer");this.symbolizer=new Cn(new Ai(i),i)}place(i,r,a){return this.symbolizer.place(i,r,a)}};var ve=class{constructor(i){S(this,"font");S(this,"text");S(this,"fill");S(this,"stroke");S(this,"width");S(this,"offset");S(this,"position");S(this,"maxLabelCodeUnits");S(this,"repeatDistance");this.font=new Ze(i),this.text=new Fe(i),this.fill=new vt(i.fill,"black"),this.stroke=new vt(i.stroke,"black"),this.width=new at(i.width,0),this.offset=new at(i.offset,0),this.position=i.position??1,this.maxLabelCodeUnits=new at(i.maxLabelChars,40),this.repeatDistance=new at(i.repeatDistance,250)}place(i,r,a){let l=this.text.get(i.zoom,a);if(!l||l.length>this.maxLabelCodeUnits.get(i.zoom,a))return;let u=20,c=a.bbox;if(c.maxY-c.minY<u&&c.maxX-c.minX<u)return;let d=this.font.get(i.zoom,a);i.scratch.font=d;let _=i.scratch.measureText(l),p=_.width,v=_.actualBoundingBoxAscent+_.actualBoundingBoxDescent,w=this.repeatDistance.get(i.zoom,a);i.overzoom>4&&(w*=1<<i.overzoom-4);let T=v*2,z=mo(r,p,w,T);if(z.length===0)return;let A=[];for(let R of z){let g=R.end.x-R.start.x,y=R.end.y-R.start.y,C=_o(R.start,R.end,p,T/2).map(k=>({minX:k.x-T/2,minY:k.y-T/2,maxX:k.x+T/2,maxY:k.y+T/2})),O=k=>{k.globalAlpha=1,k.rotate(Math.atan2(y,g)),g<0&&(k.scale(-1,-1),k.translate(-p,0));let E=0;this.position===3?E+=v:this.position===2&&(E+=v/2),k.translate(0,E-this.offset.get(i.zoom,a)),k.font=d;let F=this.width.get(i.zoom,a);F&&(k.lineWidth=F,k.strokeStyle=this.stroke.get(i.zoom,a),k.strokeText(l,0,0)),k.fillStyle=this.fill.get(i.zoom,a),k.fillText(l,0,0)};A.push({anchor:R.start,bboxes:C,draw:O,deduplicationKey:l,deduplicationDistance:w})}return A}};var Pt=(o,i)=>{let r=o[i];return typeof r=="string"?r:""},No=(o,i)=>{let r=o[i];return typeof r=="number"?r:0},Ei=o=>[{dataLayer:"earth",symbolizer:new lt({fill:o.earth})},{dataLayer:"landuse",symbolizer:new lt({fill:(i,r)=>yi(o.park_a,o.park_b,Math.min(Math.max(i/12,12),0))}),filter:(i,r)=>{let a=Pt(r.props,"pmap:kind");return["allotments","village_green","playground"].includes(a)}},{dataLayer:"landuse",symbolizer:new lt({fill:o.park_b,opacity:.7}),filter:(i,r)=>{let a=Pt(r.props,"pmap:kind");return["national_park","park","cemetery","protected_area","nature_reserve","forest","golf_course"].includes(a)}},{dataLayer:"landuse",symbolizer:new lt({fill:o.hospital}),filter:(i,r)=>r.props["pmap:kind"]==="hospital"},{dataLayer:"landuse",symbolizer:new lt({fill:o.industrial}),filter:(i,r)=>r.props["pmap:kind"]==="industrial"},{dataLayer:"landuse",symbolizer:new lt({fill:o.school}),filter:(i,r)=>{let a=Pt(r.props,"pmap:kind");return["school","university","college"].includes(a)}},{dataLayer:"landuse",symbolizer:new lt({fill:o.beach}),filter:(i,r)=>r.props["pmap:kind"]==="beach"},{dataLayer:"landuse",symbolizer:new lt({fill:o.zoo}),filter:(i,r)=>r.props["pmap:kind"]==="zoo"},{dataLayer:"landuse",symbolizer:new lt({fill:o.zoo}),filter:(i,r)=>{let a=Pt(r.props,"pmap:kind");return["military","naval_base","airfield"].includes(a)}},{dataLayer:"natural",symbolizer:new lt({fill:(i,r)=>yi(o.wood_a,o.wood_b,Math.min(Math.max(i/12,12),0))}),filter:(i,r)=>{let a=Pt(r.props,"pmap:kind");return["wood","nature_reserve","forest"].includes(a)}},{dataLayer:"natural",symbolizer:new lt({fill:(i,r)=>yi(o.scrub_a,o.scrub_b,Math.min(Math.max(i/12,12),0))}),filter:(i,r)=>{let a=Pt(r.props,"pmap:kind");return["scrub","grassland","grass"].includes(a)}},{dataLayer:"natural",symbolizer:new lt({fill:o.scrub_b}),filter:(i,r)=>{let a=Pt(r.props,"pmap:kind");return["scrub","grassland","grass"].includes(a)}},{dataLayer:"natural",symbolizer:new lt({fill:o.glacier}),filter:(i,r)=>r.props["pmap:kind"]==="glacier"},{dataLayer:"natural",symbolizer:new lt({fill:o.sand}),filter:(i,r)=>r.props["pmap:kind"]==="sand"},{dataLayer:"landuse",symbolizer:new lt({fill:o.aerodrome}),filter:(i,r)=>r.props["pmap:kind"]==="aerodrome"},{dataLayer:"water",symbolizer:new lt({fill:o.water})},{dataLayer:"transit",symbolizer:new gt({color:o.runway,width:(i,r)=>St(1.6,[[11,0],[13,4],[19,30]])(i)}),filter:(i,r)=>r.props["pmap:kind_detail"]==="runway"},{dataLayer:"transit",symbolizer:new gt({color:o.runway,width:(i,r)=>St(1.6,[[14,0],[14.5,1],[16,6]])(i)}),filter:(i,r)=>r.props["pmap:kind_detail"]==="taxiway"},{dataLayer:"transit",symbolizer:new gt({color:o.pier,width:(i,r)=>St(1.6,[[13,0],[13.5,0,5],[21,16]])(i)}),filter:(i,r)=>r.props["pmap:kind"]==="pier"},{dataLayer:"physical_line",minzoom:14,symbolizer:new gt({color:o.water,width:(i,r)=>St(1.6,[[9,0],[9.5,1],[18,12]])(i)}),filter:(i,r)=>r.props["pmap:kind"]==="river"},{dataLayer:"physical_line",minzoom:14,symbolizer:new gt({color:o.water,width:.5}),filter:(i,r)=>r.props["pmap:kind"]==="stream"},{dataLayer:"landuse",symbolizer:new lt({fill:o.pedestrian}),filter:(i,r)=>r.props["pmap:kind"]==="pedestrian"},{dataLayer:"landuse",symbolizer:new lt({fill:o.pier}),filter:(i,r)=>r.props["pmap:kind"]==="pier"},{dataLayer:"buildings",symbolizer:new lt({fill:o.buildings,opacity:.5})},{dataLayer:"roads",symbolizer:new gt({color:o.major,width:(i,r)=>St(1.6,[[14,0],[20,7]])(i)}),filter:(i,r)=>{let a=Pt(r.props,"pmap:kind");return["other","path"].includes(a)}},{dataLayer:"roads",symbolizer:new gt({color:o.major,width:(i,r)=>St(1.6,[[13,0],[18,8]])(i)}),filter:(i,r)=>r.props["pmap:kind"]==="minor_road"},{dataLayer:"roads",symbolizer:new gt({color:o.major,width:(i,r)=>St(1.6,[[7,0],[12,1.2],[15,3],[18,13]])(i)}),filter:(i,r)=>r.props["pmap:kind"]==="medium_road"},{dataLayer:"roads",symbolizer:new gt({color:o.major,width:(i,r)=>St(1.6,[[6,0],[12,1.6],[15,3],[18,13]])(i)}),filter:(i,r)=>r.props["pmap:kind"]==="major_road"},{dataLayer:"roads",symbolizer:new gt({color:o.major,width:(i,r)=>St(1.6,[[3,0],[6,1.1],[12,1.6],[15,5],[18,15]])(i)}),filter:(i,r)=>r.props["pmap:kind"]==="highway"},{dataLayer:"boundaries",symbolizer:new gt({dash:[3,2],color:o.boundaries,width:1}),filter:(i,r)=>{let a=r.props["pmap:min_admin_level"];return typeof a=="number"&&a<=2}},{dataLayer:"transit",symbolizer:new gt({dash:[.3,.75],color:o.railway,dashWidth:(i,r)=>St(1.6,[[4,0],[7,.15],[19,9]])(i),opacity:.5}),filter:(i,r)=>r.props["pmap:kind"]==="rail"},{dataLayer:"boundaries",symbolizer:new gt({dash:[3,2],color:o.boundaries,width:.5}),filter:(i,r)=>{let a=r.props["pmap:min_admin_level"];return typeof a=="number"&&a>2}}],Bi=o=>{let i=["name"];return[{dataLayer:"roads",symbolizer:new ve({labelProps:i,fill:o.roads_label_minor,font:"400 12px sans-serif",width:2,stroke:o.roads_label_minor_halo}),minzoom:16,filter:(r,a)=>{let l=Pt(a.props,"pmap:kind");return["minor_road","other","path"].includes(l)}},{dataLayer:"roads",symbolizer:new ve({labelProps:i,fill:o.roads_label_major,font:"400 12px sans-serif",width:2,stroke:o.roads_label_major_halo}),minzoom:12,filter:(r,a)=>{let l=Pt(a.props,"pmap:kind");return["highway","major_road","medium_road"].includes(l)}},{dataLayer:"roads",symbolizer:new ve({labelProps:i,fill:o.roads_label_major,font:"400 12px sans-serif",width:2,stroke:o.roads_label_major_halo}),minzoom:12,filter:(r,a)=>{let l=Pt(a.props,"pmap:kind");return["highway","major_road","medium_road"].includes(l)}},{dataLayer:"physical_point",symbolizer:new qt({labelProps:i,fill:o.ocean_label,lineHeight:1.5,letterSpacing:1,font:(r,a)=>`400 ${An([[3,10],[10,12]])(r)}px sans-serif`,textTransform:"uppercase"}),filter:(r,a)=>{let l=Pt(a.props,"pmap:kind");return["ocean","bay","strait","fjord"].includes(l)}},{dataLayer:"physical_point",symbolizer:new qt({labelProps:i,fill:o.ocean_label,lineHeight:1.5,letterSpacing:1,font:(r,a)=>`400 ${An([[3,0],[6,12],[10,12]])(r)}px sans-serif`}),filter:(r,a)=>{let l=Pt(a.props,"pmap:kind");return["sea","lake","water"].includes(l)}},{dataLayer:"places",symbolizer:new qt({labelProps:(r,a)=>r<6?["name:short"]:i,fill:o.state_label,stroke:o.state_label_halo,width:1,lineHeight:1.5,font:(r,a)=>r<6?"400 16px sans-serif":"400 12px sans-serif",textTransform:"uppercase"}),filter:(r,a)=>a.props["pmap:kind"]==="region"},{dataLayer:"places",symbolizer:new qt({labelProps:i,fill:o.country_label,lineHeight:1.5,font:(r,a)=>(r<6,"600 12px sans-serif"),textTransform:"uppercase"}),filter:(r,a)=>a.props["pmap:kind"]==="country"},{dataLayer:"places",minzoom:9,symbolizer:new qt({labelProps:i,fill:o.city_label,lineHeight:1.5,font:(r,a)=>{if(!a)return"400 12px sans-serif";let l=a.props["pmap:min_zoom"],u=400;l&&l<=5&&(u=600);let c=12,d=a.props["pmap:population_rank"];return d&&d>9&&(c=16),`${u} ${c}px sans-serif`}}),sort:(r,a)=>{let l=No(r,"pmap:population_rank"),u=No(a,"pmap:population_rank");return l-u},filter:(r,a)=>a.props["pmap:kind"]==="locality"},{dataLayer:"places",maxzoom:8,symbolizer:new Ci([new Si({radius:2,fill:o.city_circle,stroke:o.city_circle_stroke,width:1.5}),new Oi({labelProps:i,fill:o.city_label,stroke:o.city_label_halo,width:1,offsetX:6,offsetY:4.5,font:(r,a)=>"400 12px sans-serif"})]),filter:(r,a)=>a.props["pmap:kind"]==="locality"}]};var th={background:"#cccccc",earth:"#e0e0e0",park_a:"#cfddd5",park_b:"#9cd3b4",hospital:"#e4dad9",industrial:"#d1dde1",school:"#e4ded7",wood_a:"#d0ded0",wood_b:"#a0d9a0",pedestrian:"#e3e0d4",scrub_a:"#cedcd7",scrub_b:"#99d2bb",glacier:"#e7e7e7",sand:"#e2e0d7",beach:"#e8e4d0",aerodrome:"#dadbdf",runway:"#e9e9ed",water:"#80deea",pier:"#e0e0e0",zoo:"#c6dcdc",military:"#dcdcdc",tunnel_other_casing:"#e0e0e0",tunnel_minor_casing:"#e0e0e0",tunnel_link_casing:"#e0e0e0",tunnel_medium_casing:"#e0e0e0",tunnel_major_casing:"#e0e0e0",tunnel_highway_casing:"#e0e0e0",tunnel_other:"#d5d5d5",tunnel_minor:"#d5d5d5",tunnel_link:"#d5d5d5",tunnel_medium:"#d5d5d5",tunnel_major:"#d5d5d5",tunnel_highway:"#d5d5d5",transit_pier:"#e0e0e0",buildings:"#cccccc",minor_service_casing:"#e0e0e0",minor_casing:"#e0e0e0",link_casing:"#e0e0e0",medium_casing:"#e0e0e0",major_casing_late:"#e0e0e0",highway_casing_late:"#e0e0e0",other:"#ebebeb",minor_service:"#ebebeb",minor_a:"#ebebeb",minor_b:"#ffffff",link:"#ffffff",medium:"#f5f5f5",major_casing_early:"#e0e0e0",major:"#ffffff",highway_casing_early:"#e0e0e0",highway:"#ffffff",railway:"#a7b1b3",boundaries:"#adadad",waterway_label:"#ffffff",bridges_other_casing:"#e0e0e0",bridges_minor_casing:"#e0e0e0",bridges_link_casing:"#e0e0e0",bridges_medium_casing:"#e0e0e0",bridges_major_casing:"#e0e0e0",bridges_highway_casing:"#e0e0e0",bridges_other:"#ebebeb",bridges_minor:"#ffffff",bridges_link:"#ffffff",bridges_medium:"#f0eded",bridges_major:"#f5f5f5",bridges_highway:"#ffffff",roads_label_minor:"#91888b",roads_label_minor_halo:"#ffffff",roads_label_major:"#938a8d",roads_label_major_halo:"#ffffff",ocean_label:"#ffffff",peak_label:"#7e9aa0",subplace_label:"#8f8f8f",subplace_label_halo:"#e0e0e0",city_circle:"#ffffff",city_circle_stroke:"#a3a3a3",city_label:"#5c5c5c",city_label_halo:"#e0e0e0",state_label:"#b3b3b3",state_label_halo:"#e0e0e0",country_label:"#a3a3a3"},eh={background:"#34373d",earth:"#1f1f1f",park_a:"#232325",park_b:"#232325",hospital:"#252424",industrial:"#222222",school:"#262323",wood_a:"#202121",wood_b:"#202121",pedestrian:"#1e1e1e",scrub_a:"#222323",scrub_b:"#222323",glacier:"#1c1c1c",sand:"#212123",beach:"#28282a",aerodrome:"#1e1e1e",runway:"#333333",water:"#34373d",pier:"#222222",zoo:"#222323",military:"#242323",tunnel_other_casing:"#141414",tunnel_minor_casing:"#141414",tunnel_link_casing:"#141414",tunnel_medium_casing:"#141414",tunnel_major_casing:"#141414",tunnel_highway_casing:"#141414",tunnel_other:"#292929",tunnel_minor:"#292929",tunnel_link:"#292929",tunnel_medium:"#292929",tunnel_major:"#292929",tunnel_highway:"#292929",transit_pier:"#333333",buildings:"#111111",minor_service_casing:"#1f1f1f",minor_casing:"#1f1f1f",link_casing:"#1f1f1f",medium_casing:"#1f1f1f",major_casing_late:"#1f1f1f",highway_casing_late:"#1f1f1f",other:"#333333",minor_service:"#333333",minor_a:"#3d3d3d",minor_b:"#333333",link:"#3d3d3d",medium:"#3d3d3d",major_casing_early:"#1f1f1f",major:"#3d3d3d",highway_casing_early:"#1f1f1f",highway:"#474747",railway:"#000000",boundaries:"#5b6374",waterway_label:"#717784",bridges_other_casing:"#2b2b2b",bridges_minor_casing:"#1f1f1f",bridges_link_casing:"#1f1f1f",bridges_medium_casing:"#1f1f1f",bridges_major_casing:"#1f1f1f",bridges_highway_casing:"#1f1f1f",bridges_other:"#333333",bridges_minor:"#333333",bridges_link:"#3d3d3d",bridges_medium:"#3d3d3d",bridges_major:"#3d3d3d",bridges_highway:"#474747",roads_label_minor:"#525252",roads_label_minor_halo:"#1f1f1f",roads_label_major:"#666666",roads_label_major_halo:"#1f1f1f",ocean_label:"#717784",peak_label:"#898080",subplace_label:"#525252",subplace_label_halo:"#1f1f1f",city_circle:"#000000",city_circle_stroke:"#7a7a7a",city_label:"#7a7a7a",city_label_halo:"#212121",state_label:"#3d3d3d",state_label_halo:"#1f1f1f",country_label:"#5c5c5c"},ih={background:"#ffffff",earth:"#ffffff",park_a:"#fcfcfc",park_b:"#fcfcfc",hospital:"#f8f8f8",industrial:"#fcfcfc",school:"#f8f8f8",wood_a:"#fafafa",wood_b:"#fafafa",pedestrian:"#fdfdfd",scrub_a:"#fafafa",scrub_b:"#fafafa",glacier:"#fcfcfc",sand:"#fafafa",beach:"#f6f6f6",aerodrome:"#fdfdfd",runway:"#efefef",water:"#dcdcdc",pier:"#f5f5f5",zoo:"#f7f7f7",military:"#fcfcfc",tunnel_other_casing:"#d6d6d6",tunnel_minor_casing:"#fcfcfc",tunnel_link_casing:"#fcfcfc",tunnel_medium_casing:"#fcfcfc",tunnel_major_casing:"#fcfcfc",tunnel_highway_casing:"#fcfcfc",tunnel_other:"#d6d6d6",tunnel_minor:"#d6d6d6",tunnel_link:"#d6d6d6",tunnel_medium:"#d6d6d6",tunnel_major:"#d6d6d6",tunnel_highway:"#d6d6d6",transit_pier:"#efefef",buildings:"#efefef",minor_service_casing:"#ffffff",minor_casing:"#ffffff",link_casing:"#ffffff",medium_casing:"#ffffff",major_casing_late:"#ffffff",highway_casing_late:"#ffffff",other:"#f5f5f5",minor_service:"#f5f5f5",minor_a:"#ebebeb",minor_b:"#f5f5f5",link:"#ebebeb",medium:"#ebebeb",major_casing_early:"#ffffff",major:"#ebebeb",highway_casing_early:"#ffffff",highway:"#ebebeb",railway:"#d6d6d6",boundaries:"#adadad",waterway_label:"#adadad",bridges_other_casing:"#ffffff",bridges_minor_casing:"#ffffff",bridges_link_casing:"#ffffff",bridges_medium_casing:"#ffffff",bridges_major_casing:"#ffffff",bridges_highway_casing:"#ffffff",bridges_other:"#f5f5f5",bridges_minor:"#f5f5f5",bridges_link:"#ebebeb",bridges_medium:"#ebebeb",bridges_major:"#ebebeb",bridges_highway:"#ebebeb",roads_label_minor:"#adadad",roads_label_minor_halo:"#ffffff",roads_label_major:"#999999",roads_label_major_halo:"#ffffff",ocean_label:"#adadad",peak_label:"#adadad",subplace_label:"#8f8f8f",subplace_label_halo:"#ffffff",city_circle:"#ffffff",city_circle_stroke:"#adadad",city_label:"#5c5c5c",city_label_halo:"#ffffff",state_label:"#b3b3b3",state_label_halo:"#ffffff",country_label:"#b8b8b8"},nh={background:"#a3a3a3",earth:"#cccccc",park_a:"#c2c2c2",park_b:"#c2c2c2",hospital:"#d0d0d0",industrial:"#c6c6c6",school:"#d0d0d0",wood_a:"#c2c2c2",wood_b:"#c2c2c2",pedestrian:"#c4c4c4",scrub_a:"#c2c2c2",scrub_b:"#c2c2c2",glacier:"#d2d2d2",sand:"#d2d2d2",beach:"#d2d2d2",aerodrome:"#c9c9c9",runway:"#f5f5f5",water:"#a3a3a3",pier:"#b8b8b8",zoo:"#c7c7c7",military:"#bfbfbf",tunnel_other_casing:"#b8b8b8",tunnel_minor_casing:"#b8b8b8",tunnel_link_casing:"#b8b8b8",tunnel_medium_casing:"#b8b8b8",tunnel_major_casing:"#b8b8b8",tunnel_highway_casing:"#b8b8b8",tunnel_other:"#d6d6d6",tunnel_minor:"#d6d6d6",tunnel_link:"#d6d6d6",tunnel_medium:"#d6d6d6",tunnel_major:"#d6d6d6",tunnel_highway:"#d6d6d6",transit_pier:"#b8b8b8",buildings:"#e0e0e0",minor_service_casing:"#cccccc",minor_casing:"#cccccc",link_casing:"#cccccc",medium_casing:"#cccccc",major_casing_late:"#cccccc",highway_casing_late:"#cccccc",other:"#e0e0e0",minor_service:"#e0e0e0",minor_a:"#ebebeb",minor_b:"#e0e0e0",link:"#ebebeb",medium:"#ebebeb",major_casing_early:"#cccccc",major:"#ebebeb",highway_casing_early:"#cccccc",highway:"#ebebeb",railway:"#f5f5f5",boundaries:"#5c5c5c",waterway_label:"#7a7a7a",bridges_other_casing:"#cccccc",bridges_minor_casing:"#cccccc",bridges_link_casing:"#cccccc",bridges_medium_casing:"#cccccc",bridges_major_casing:"#cccccc",bridges_highway_casing:"#cccccc",bridges_other:"#e0e0e0",bridges_minor:"#e0e0e0",bridges_link:"#ebebeb",bridges_medium:"#ebebeb",bridges_major:"#ebebeb",bridges_highway:"#ebebeb",roads_label_minor:"#999999",roads_label_minor_halo:"#e0e0e0",roads_label_major:"#8f8f8f",roads_label_major_halo:"#ebebeb",ocean_label:"#7a7a7a",peak_label:"#5c5c5c",subplace_label:"#7a7a7a",subplace_label_halo:"#cccccc",city_circle:"#c2c2c2",city_circle_stroke:"#7a7a7a",city_label:"#474747",city_label_halo:"#cccccc",state_label:"#999999",state_label_halo:"#cccccc",country_label:"#858585"},rh={background:"#2b2b2b",earth:"#141414",park_a:"#181818",park_b:"#181818",hospital:"#1d1d1d",industrial:"#101010",school:"#111111",wood_a:"#1a1a1a",wood_b:"#1a1a1a",pedestrian:"#191919",scrub_a:"#1c1c1c",scrub_b:"#1c1c1c",glacier:"#191919",sand:"#161616",beach:"#1f1f1f",aerodrome:"#191919",runway:"#323232",water:"#333333",pier:"#0a0a0a",zoo:"#191919",military:"#121212",tunnel_other_casing:"#101010",tunnel_minor_casing:"#101010",tunnel_link_casing:"#101010",tunnel_medium_casing:"#101010",tunnel_major_casing:"#101010",tunnel_highway_casing:"#101010",tunnel_other:"#292929",tunnel_minor:"#292929",tunnel_link:"#292929",tunnel_medium:"#292929",tunnel_major:"#292929",tunnel_highway:"#292929",transit_pier:"#0a0a0a",buildings:"#0a0a0a",minor_service_casing:"#141414",minor_casing:"#141414",link_casing:"#141414",medium_casing:"#141414",major_casing_late:"#141414",highway_casing_late:"#141414",other:"#1f1f1f",minor_service:"#1f1f1f",minor_a:"#292929",minor_b:"#1f1f1f",link:"#1f1f1f",medium:"#292929",major_casing_early:"#141414",major:"#292929",highway_casing_early:"#141414",highway:"#292929",railway:"#292929",boundaries:"#707070",waterway_label:"#707070",bridges_other_casing:"#141414",bridges_minor_casing:"#141414",bridges_link_casing:"#141414",bridges_medium_casing:"#141414",bridges_major_casing:"#141414",bridges_highway_casing:"#141414",bridges_other:"#1f1f1f",bridges_minor:"#1f1f1f",bridges_link:"#292929",bridges_medium:"#292929",bridges_major:"#292929",bridges_highway:"#292929",roads_label_minor:"#525252",roads_label_minor_halo:"#141414",roads_label_major:"#5c5c5c",roads_label_major_halo:"#141414",ocean_label:"#707070",peak_label:"#707070",subplace_label:"#5c5c5c",subplace_label_halo:"#141414",city_circle:"#000000",city_circle_stroke:"#666666",city_label:"#999999",city_label_halo:"#141414",state_label:"#3d3d3d",state_label_halo:"#141414",country_label:"#707070"},Ii={light:th,dark:eh,white:ih,grayscale:nh,black:rh};var Ho=Xr(jo(),1);var Fi=(o,i,r)=>{let a=[];for(let l of o){let u=[];for(let c of l)u.push(c.clone().mult(i).add(r));a.push(u)}return a},Di=(o,i)=>{let r=1<<i;return o<0?r+o:o>=r?o%r:o},Bn=class{constructor(i,r,a){S(this,"levelDiff");S(this,"tileCache");S(this,"maxDataLevel");this.tileCache=i,this.maxDataLevel=r,this.levelDiff=a}dataTilesForBounds(i,r){let a=2**i/2**Math.ceil(i),l=[],u=1,c=this.tileCache.tileSize;if(i<this.levelDiff)u=1/(1<<this.levelDiff-i)*a,l.push({dataTile:{z:0,x:0,y:0},origin:new X(0,0),scale:u,dim:c*u});else if(i<=this.levelDiff+this.maxDataLevel){let d=1<<this.levelDiff,_=256*a,p=Math.ceil(i)-this.levelDiff,v=Math.floor(r.minX/d/_),w=Math.floor(r.minY/d/_),T=Math.floor(r.maxX/d/_),z=Math.floor(r.maxY/d/_);for(let A=v;A<=T;A++)for(let R=w;R<=z;R++){let g=new X(A*d*_,R*d*_);l.push({dataTile:{z:p,x:Di(A,p),y:Di(R,p)},origin:g,scale:a,dim:c*a})}}else{let d=1<<this.levelDiff;u=(1<<Math.ceil(i)-this.maxDataLevel-this.levelDiff)*a;let _=Math.floor(r.minX/d/256/u),p=Math.floor(r.minY/d/256/u),v=Math.floor(r.maxX/d/256/u),w=Math.floor(r.maxY/d/256/u);for(let T=_;T<=v;T++)for(let z=p;z<=w;z++){let A=new X(T*d*256*u,z*d*256*u);l.push({dataTile:{z:this.maxDataLevel,x:Di(T,this.maxDataLevel),y:Di(z,this.maxDataLevel)},origin:A,scale:u,dim:c*u})}}return l}dataTileForDisplayTile(i){let r,a=1,l=this.tileCache.tileSize,u;if(i.z<this.levelDiff)r={z:0,x:0,y:0},a=1/(1<<this.levelDiff-i.z),u=new X(0,0),l=l*a;else if(i.z<=this.levelDiff+this.maxDataLevel){let c=1<<this.levelDiff;r={z:i.z-this.levelDiff,x:Math.floor(i.x/c),y:Math.floor(i.y/c)},u=new X(r.x*c*256,r.y*c*256)}else{a=1<<i.z-this.maxDataLevel-this.levelDiff;let c=1<<this.levelDiff;r={z:this.maxDataLevel,x:Math.floor(i.x/c/a),y:Math.floor(i.y/c/a)},u=new X(r.x*c*a*256,r.y*c*a*256),l=l*a}return{dataTile:r,scale:a,origin:u,dim:l}}async getBbox(i,r){let a=this.dataTilesForBounds(i,r);return(await Promise.all(a.map(u=>this.tileCache.get(u.dataTile)))).map((u,c)=>{let d=a[c];return{data:u,z:i,dataTile:d.dataTile,scale:d.scale,dim:d.dim,origin:d.origin}})}async getDisplayTile(i){let r=this.dataTileForDisplayTile(i);return{data:await this.tileCache.get(r.dataTile),z:i.z,dataTile:r.dataTile,scale:r.scale,origin:r.origin,dim:r.dim}}queryFeatures(i,r,a,l){let u=Math.round(a),c=Math.min(u-this.levelDiff,this.maxDataLevel),d=l/(1<<u-c);return this.tileCache.queryFeatures(i,r,c,d)}},Vo=o=>{let i=a=>{let l=a.levelDiff===void 0?1:a.levelDiff,u=a.maxDataZoom||15,c;if(typeof a.url=="string")new URL(a.url,"http://example.com").pathname.endsWith(".pmtiles")?c=new We(a.url,!0):c=new zi(a.url,!0);else if(a.url)c=new We(a.url,!0);else throw new Error(`Invalid source ${a.url}`);let d=new Mi(c,256*1<<l);return new Bn(d,u,l)},r=new Map;if(o.sources)for(let a in o.sources)r.set(a,i(o.sources[a]));else r.set("",i(o));return r};var oh=(o,i,r)=>{let l=i/256,u=Math.floor(r.minX/256),c=Math.floor(r.minY/256),d=Math.floor(r.maxX/256),_=Math.floor(r.maxY/256),p=Math.log2(l),v=[];for(let w=u;w<=d;w++){let T=w%(1<<o);for(let z=c;z<=_;z++)v.push({display:Xt({z:o,x:T,y:z}),key:Xt({z:o-p,x:Math.floor(T/l),y:Math.floor(z/l)})})}return v},In=class{constructor(i,r){S(this,"tree");S(this,"current");S(this,"dim");S(this,"maxLabeledTiles");this.tree=new Ho.default,this.current=new Map,this.dim=i,this.maxLabeledTiles=r}hasPrefix(i){for(let r of this.current.keys())if(r.startsWith(i))return!0;return!1}has(i){return this.current.has(i)}size(){return this.current.size}keys(){return this.current.keys()}searchBbox(i,r){let a=new Set;for(let l of this.tree.search(i))l.indexedLabel.order<=r&&a.add(l.indexedLabel);return a}searchLabel(i,r){let a=new Set;for(let l of i.bboxes)for(let u of this.tree.search(l))u.indexedLabel.order<=r&&a.add(u.indexedLabel);return a}bboxCollides(i,r){for(let a of this.tree.search(i))if(a.indexedLabel.order<=r)return!0;return!1}labelCollides(i,r){for(let a of i.bboxes)for(let l of this.tree.search(a))if(l.indexedLabel.order<=r)return!0;return!1}deduplicationCollides(i){if(!i.deduplicationKey||!i.deduplicationDistance)return!1;let r=i.deduplicationDistance,a={minX:i.anchor.x-r,minY:i.anchor.y-r,maxX:i.anchor.x+r,maxY:i.anchor.y+r};for(let l of this.tree.search(a))if(l.indexedLabel.deduplicationKey===i.deduplicationKey&&l.indexedLabel.anchor.dist(i.anchor)<r)return!0;return!1}makeEntry(i){this.current.get(i)&&console.log("consistency error 1");let r=new Set;this.current.set(i,r)}insert(i,r,a){let l={anchor:i.anchor,bboxes:i.bboxes,draw:i.draw,order:r,tileKey:a,deduplicationKey:i.deduplicationKey,deduplicationDistance:i.deduplicationDistance},u=this.current.get(a);if(!u){let _=new Set;this.current.set(a,_),u=_}u.add(l);let c=!1,d=!1;for(let _ of i.bboxes)this.tree.insert({minX:_.minX,minY:_.minY,maxX:_.maxX,maxY:_.maxY,indexedLabel:l}),_.minX<0&&(c=!0),_.maxX>this.dim&&(d=!0);if(c||d){let _=c?this.dim:-this.dim,p=[];for(let T of i.bboxes)p.push({minX:T.minX+_,minY:T.minY,maxX:T.maxX+_,maxY:T.maxY});let v={anchor:new X(i.anchor.x+_,i.anchor.y),bboxes:p,draw:i.draw,order:r,tileKey:a},w=this.current.get(a);w&&w.add(v);for(let T of p)this.tree.insert({minX:T.minX,minY:T.minY,maxX:T.maxX,maxY:T.maxY,indexedLabel:v})}}pruneOrNoop(i){let r=i.split(":"),a,l=0,u=0;for(let c of this.current.keys()){let d=c.split(":");if(d[3]===r[3]){u++;let _=Math.sqrt((+d[0]-+r[0])**2+(+d[1]-+r[1])**2);_>l&&(l=_,a=c)}a&&u>this.maxLabeledTiles&&this.pruneKey(a)}}pruneKey(i){let r=this.current.get(i);if(!r)return;let a=[];for(let l of this.tree.all())r.has(l.indexedLabel)&&a.push(l);for(let l of a)this.tree.remove(l);this.current.delete(i)}removeLabel(i){let r=[];for(let l of this.tree.all())i===l.indexedLabel&&r.push(l);for(let l of r)this.tree.remove(l);let a=this.current.get(i.tileKey);a&&a.delete(i)}},Dn=class{constructor(i,r,a,l,u){S(this,"index");S(this,"z");S(this,"scratch");S(this,"labelRules");S(this,"callback");this.index=new In(256*1<<i,l),this.z=i,this.scratch=r,this.labelRules=a,this.callback=u}layout(i){let r=performance.now(),a=new Set;for(let[u,c]of i)for(let d of c){let _=`${Xt(d.dataTile)}:${u}`;this.index.has(_)||(this.index.makeEntry(_),a.add(_))}let l=new Set;for(let[u,c]of this.labelRules.entries()){if(c.visible===!1||c.minzoom&&this.z<c.minzoom||c.maxzoom&&this.z>c.maxzoom)continue;let d=c.dataSource||"",_=i.get(d);if(_)for(let p of _){let v=`${Xt(p.dataTile)}:${d}`;if(!a.has(v))continue;let w=p.data.get(c.dataLayer);if(w===void 0)continue;let T=w;c.sort&&T.sort((A,R)=>c.sort?c.sort(A.props,R.props):0);let z={index:this.index,zoom:this.z,scratch:this.scratch,order:u,overzoom:this.z-p.dataTile.z};for(let A of T){if(c.filter&&!c.filter(this.z,A))continue;let R=Fi(A.geom,p.scale,p.origin),g=c.symbolizer.place(z,R,A);if(g)for(let y of g){let x=!1;if(!(y.deduplicationKey&&this.index.deduplicationCollides(y))){if(this.index.labelCollides(y,1/0)){if(!this.index.labelCollides(y,u)){let C=this.index.searchLabel(y,1/0);for(let O of C){this.index.removeLabel(O);for(let k of O.bboxes)this.findInvalidatedTiles(l,p.dim,k,v)}this.index.insert(y,u,v),x=!0}}else this.index.insert(y,u,v),x=!0;if(x)for(let C of y.bboxes)(C.maxX>p.origin.x+p.dim||C.minX<p.origin.x||C.minY<p.origin.y||C.maxY>p.origin.y+p.dim)&&this.findInvalidatedTiles(l,p.dim,C,v)}}}}}for(let u of a)this.index.pruneOrNoop(u);return l.size>0&&this.callback&&this.callback(l),performance.now()-r}findInvalidatedTiles(i,r,a,l){let u=oh(this.z,r,a);for(let c of u)c.key!==l&&this.index.hasPrefix(c.key)&&i.add(c.display)}add(i){let r=!0;for(let[l,u]of i)for(let c of u)this.index.has(`${Xt(c.dataTile)}:${l}`)||(r=!1);return r?0:this.layout(i)}},Ye=class{constructor(i,r,a,l){S(this,"labelers");S(this,"scratch");S(this,"labelRules");S(this,"maxLabeledTiles");S(this,"callback");this.labelers=new Map,this.scratch=i,this.labelRules=r,this.maxLabeledTiles=a,this.callback=l}add(i,r){let a=this.labelers.get(i);return a||(a=new Dn(i,this.scratch,this.labelRules,this.maxLabeledTiles,this.callback),this.labelers.set(i,a)),a.add(r)}getIndex(i){let r=this.labelers.get(i);if(r)return r.index}};function Uo(o,i,r,a,l,u,c,d,_){let p=performance.now();o.save(),o.miterLimit=2;for(let v of l){if(v.minzoom&&i<v.minzoom||v.maxzoom&&i>v.maxzoom)continue;let w=r.get(v.dataSource||"");if(w)for(let T of w){let z=T.data.get(v.dataLayer);if(z===void 0)continue;v.symbolizer.before&&v.symbolizer.before(o,T.z);let A=T.origin,R=T.dim,g=T.scale;if(o.save(),d){o.beginPath();let y=Math.max(A.x-c.x,u.minX-c.x),x=Math.max(A.y-c.y,u.minY-c.y),C=Math.min(A.x-c.x+R,u.maxX-c.x),O=Math.min(A.y-c.y+R,u.maxY-c.y);o.rect(y,x,C-y,O-x),o.clip()}o.translate(A.x-c.x,A.y-c.y);for(let y of z){let x=y.geom,C=y.bbox;C.maxX*g+A.x<u.minX||C.minX*g+A.x>u.maxX||C.minY*g+A.y>u.maxY||C.maxY*g+A.y<u.minY||v.filter&&!v.filter(T.z,y)||(g!==1&&(x=Fi(x,g,new X(0,0))),v.symbolizer.draw(o,x,T.z,y))}o.restore()}}if(d&&(o.beginPath(),o.rect(u.minX-c.x,u.minY-c.y,u.maxX-u.minX,u.maxY-u.minY),o.clip()),a){let v=a.searchBbox(u,1/0);for(let w of v)if(o.save(),o.translate(w.anchor.x-c.x,w.anchor.y-c.y),w.draw(o),o.restore(),_){o.lineWidth=.5,o.strokeStyle=_,o.fillStyle=_,o.globalAlpha=1,o.fillRect(w.anchor.x-c.x-2,w.anchor.y-c.y-2,4,4);for(let T of w.bboxes)o.strokeRect(T.minX-c.x,T.minY-c.y,T.maxX-T.minX,T.maxY-T.minY)}}return o.restore(),performance.now()-p}var sh=o=>new Promise(i=>{setTimeout(()=>{i()},o)}),ah=o=>o.then(i=>({status:"fulfilled",value:i}),i=>({status:"rejected",reason:i})),Wo=(o={})=>{class i extends L.GridLayer{constructor(l={}){l.noWrap&&!l.bounds&&(l.bounds=[[-90,-180],[90,180]]),l.attribution==null&&(l.attribution='<a href="https://protomaps.com">Protomaps</a> \xA9 <a href="https://openstreetmap.org/copyright">OpenStreetMap</a>');super(l);S(this,"paintRules");S(this,"labelRules");S(this,"backgroundColor");if(l.theme){let c=Ii[l.theme];this.paintRules=Ei(c),this.labelRules=Bi(c),this.backgroundColor=c.background}else this.paintRules=l.paintRules||[],this.labelRules=l.labelRules||[],this.backgroundColor=l.backgroundColor;this.lastRequestedZ=void 0,this.tasks=l.tasks||[],this.views=Vo(l),this.debug=l.debug;let u=document.createElement("canvas").getContext("2d");this.scratch=u,this.onTilesInvalidated=c=>{for(let d of c)this.rerenderTile(d)},this.labelers=new Ye(this.scratch,this.labelRules,16,this.onTilesInvalidated),this.tileSize=256*window.devicePixelRatio,this.tileDelay=l.tileDelay||3,this.lang=l.lang}async renderTile(l,u,c,d=()=>{}){this.lastRequestedZ=l.z;let _=[];for(let[B,I]of this.views){let V=I.getDisplayTile(l);_.push({key:B,promise:V})}let p=await Promise.all(_.map(B=>B.promise.then(I=>({status:"fulfilled",value:I,key:B.key}),I=>({status:"rejected",reason:I,key:B.key})))),v=new Map;for(let B of p)B.status==="fulfilled"?v.set(B.key,[B.value]):B.reason.name==="AbortError"||console.error(B.reason);if(u.key!==c||this.lastRequestedZ!==l.z||(await Promise.all(this.tasks.map(ah)),u.key!==c)||this.lastRequestedZ!==l.z)return;let w=this.labelers.add(l.z,v);if(u.key!==c||this.lastRequestedZ!==l.z)return;let T=this.labelers.getIndex(l.z);if(!this._map)return;let z=this._map.getCenter().wrap(),A=this._getTiledPixelBounds(z),g=this._pxBoundsToTileRange(A).getCenter(),y=l.distanceTo(g)*this.tileDelay;if(await sh(y),u.key!==c||this.lastRequestedZ!==l.z)return;let x=16,C={minX:256*l.x-x,minY:256*l.y-x,maxX:256*(l.x+1)+x,maxY:256*(l.y+1)+x},O=new X(256*l.x,256*l.y);u.width=this.tileSize,u.height=this.tileSize;let k=u.getContext("2d");if(!k){console.error("Failed to get Canvas context");return}k.setTransform(this.tileSize/256,0,0,this.tileSize/256,0,0),k.clearRect(0,0,256,256),this.backgroundColor&&(k.save(),k.fillStyle=this.backgroundColor,k.fillRect(0,0,256,256),k.restore());let E=0,F=this.paintRules;if(E=Uo(k,l.z,v,this.xray?null:T,F,C,O,!1,this.debug),this.debug){k.save(),k.fillStyle=this.debug,k.font="600 12px sans-serif",k.fillText(`${l.z} ${l.x} ${l.y}`,4,14),k.font="12px sans-serif";let B=28;for(let[I,V]of v){let $=V[0].dataTile;k.fillText(`${I+(I?" ":"")+$.z} ${$.x} ${$.y}`,4,B),B+=14}k.font="600 10px sans-serif",E>8&&(k.fillText(`${E.toFixed()} ms paint`,4,B),B+=14),w>8&&k.fillText(`${w.toFixed()} ms layout`,4,B),k.strokeStyle=this.debug,k.lineWidth=.5,k.beginPath(),k.moveTo(0,0),k.lineTo(0,256),k.stroke(),k.lineWidth=.5,k.beginPath(),k.moveTo(0,0),k.lineTo(256,0),k.stroke(),k.restore()}d()}rerenderTile(l){for(let u in this._tiles){let c=this._wrapCoords(this._keyToTileCoords(u));l===this._tileCoordsToKey(c)&&this.renderTile(c,this._tiles[u].el,l)}}queryTileFeaturesDebug(l,u,c=16){let d=new Map;for(let[_,p]of this.views)d.set(_,p.queryFeatures(l,u,this._map.getZoom(),c));return d}clearLayout(){this.labelers=new Ye(this.scratch,this.labelRules,16,this.onTilesInvalidated)}rerenderTiles(){for(let l in this._tiles){let u=this._wrapCoords(this._keyToTileCoords(l)),c=this._tileCoordsToKey(u);this.renderTile(u,this._tiles[l].el,c)}}createTile(l,u){let c=L.DomUtil.create("canvas","leaflet-tile");c.lang=this.lang;let d=this._tileCoordsToKey(l);return c.key=d,this.renderTile(l,c,d,()=>{u(void 0,c)}),c}_removeTile(l){let u=this._tiles[l];u&&(u.el.removed=!0,u.el.key=void 0,L.DomUtil.removeClass(u.el,"leaflet-tile-loaded"),u.el.width=u.el.height=0,L.DomUtil.remove(u.el),delete this._tiles[l],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(l)}))}}return new i(o)};function lh(o,i){let r=Ii[i];r&&(o.options.theme=i,o.paintRules=Ei(r),o.labelRules=Bi(r),o.backgroundColor=r.background,o.clearLayout(),o.rerenderTiles())}async function hh(){let o=await pi(),i={url:o.service.options.url,attribution:o.service.options.attribution};ho({layerFunction:Wo,layerOptions:i,options:o,setLayerStyle:lh})}hh();})();
/*! For license information please see Protomaps-Leaflet.js.LEGAL.txt */
//# sourceMappingURL=Protomaps-Leaflet.js.map
